/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/
(function(){function e(e){e._performanceEntries=e._performanceEntries||[];const t=2,i="function"==typeof console.timeStamp?console.timeStamp.bind(console):()=>{};return{mark:function(t){e._performanceEntries.push(t,Date.now()),i(t)},getEntries:function(){const i=[],n=e._performanceEntries;for(let e=0;e<n.length;e+=t)i.push({name:n[e],timestamp:n[e+1]});return i},getEntry:function(i){const n=e._performanceEntries;for(let e=0;e<n.length;e+=t)if(n[e]===i)return{name:n[e],timestamp:n[e+1]}},getDuration:function(i,n){const r=e._performanceEntries;let s=n,o=0;for(let e=r.length-t;e>=0;e-=t)if(r[e]===s){if(s!==n)return r[o+1]-r[e+1];o=e,s=i}return 0},importEntries:function(t){e._performanceEntries.splice(0,0,...t)},exportEntries:function(){return e._performanceEntries.slice(0)}}}
var t=["exports","require","vs/base/common/platform","vs/base/common/lifecycle","vs/base/common/event","vs/platform/instantiation/common/instantiation","vs/base/common/path","vs/platform/log/common/log","vs/base/common/uri","vs/base/common/async","vs/nls!vs/code/electron-main/main","vs/platform/environment/common/environment","vs/nls","electron","vs/base/common/strings","vs/base/common/objects","vs/platform/configuration/common/configuration","vs/base/node/pfs","vs/base/common/errors","vs/base/common/types","fs","vs/base/common/resources","vs/platform/product/node/product","vs/base/common/network","vs/platform/lifecycle/electron-main/lifecycleMain","vs/base/common/arrays","vs/platform/workspaces/common/workspaces","vs/base/common/map","vs/platform/telemetry/common/telemetry","vs/base/common/amd","vs/platform/files/common/files","vs/base/common/buffer","vs/base/common/extpath","os","vs/base/common/cancellation","vs/platform/registry/common/platform","vs/base/parts/ipc/common/ipc","child_process","vs/platform/state/common/state","vs/base/common/uuid","vs/platform/environment/node/argv","vs/platform/windows/electron-main/windows","vs/base/common/json","vs/platform/update/common/update","vs/platform/history/common/history","vs/base/common/labels","vs/platform/configuration/common/configurationRegistry","vs/platform/request/common/request","vs/platform/windows/common/windows","vs/platform/product/node/package","vs/base/common/functional","vs/base/parts/ipc/node/ipc.net","vs/base/common/keyCodes","vs/platform/url/common/url","vs/base/common/decorators","vs/base/common/normalization","vs/platform/theme/electron-main/themeMainService","vs/platform/backup/common/backup","vs/platform/update/electron-main/abstractUpdateService","vs/platform/instantiation/common/descriptors","util","crypto","vs/platform/instantiation/common/serviceCollection","vs/platform/launch/electron-main/launchService","vs/platform/diagnostics/common/diagnostics","vs/platform/diagnostics/node/diagnosticsIpc","vs/base/common/scanCode","vs/platform/remote/common/remoteHosts","vs/base/node/extpath","vs/base/node/ps","vs/base/node/watcher","vs/base/node/decoder","vs/platform/diagnostics/node/diagnosticsService","vs/base/common/process","vs/platform/files/node/watcher/watcher","vs/base/node/id","vs/code/node/paths","vs/base/common/iterator","vs/platform/menubar/node/menubar","vs/base/common/glob","vs/platform/workspaces/electron-main/workspacesMainService","vs/base/parts/ipc/node/ipc.cp","vs/platform/files/node/watcher/nsfw/watcherIpc","vs/nls!vs/platform/configuration/common/configurationRegistry","vs/nls!vs/platform/environment/node/argv","vs/nls!vs/platform/environment/node/argvHelper","vs/nls!vs/platform/extensionManagement/common/extensionManagement","vs/nls!vs/platform/extensions/common/extensionValidator","vs/nls!vs/platform/files/common/fileService","vs/nls!vs/platform/files/node/diskFileSystemProvider","vs/nls!vs/platform/history/electron-main/historyMainService","vs/nls!vs/platform/issue/electron-main/issueService","vs/nls!vs/platform/label/common/label","vs/nls!vs/platform/menubar/electron-main/menubar","vs/nls!vs/platform/request/common/request","vs/nls!vs/platform/telemetry/common/telemetryService","vs/nls!vs/platform/update/node/update.config.contribution","vs/nls!vs/platform/windows/electron-main/windowsService","vs/nls!vs/platform/workspaces/common/workspaces","vs/platform/debug/common/extensionHostDebugIpc","vs/base/common/linkedList","vs/base/common/jsonFormatter","vs/platform/driver/node/driver","vs/platform/extensions/common/extensionValidator","vs/platform/extensions/common/extensions","vs/platform/extensionManagement/common/extensionManagementUtil","vs/base/node/paths","vs/platform/files/node/watcher/nsfw/watcherService","vs/platform/files/node/watcher/unix/watcherIpc","vs/platform/files/node/watcher/unix/watcherService","vs/platform/files/node/watcher/win32/csharpWatcherService","vs/platform/files/node/watcher/win32/watcherService","vs/base/common/jsonEdit","vs/platform/instantiation/common/graph","vs/base/common/keybindingParser","vs/base/node/crypto","vs/base/common/console","vs/platform/extensionManagement/common/extensionManagement","vs/base/common/assert","vs/base/node/config","vs/platform/files/node/watcher/nodejs/watcherService","vs/base/parts/contextmenu/common/contextmenu","vs/platform/history/common/historyStorage","vs/base/parts/contextmenu/electron-main/contextmenu","vs/platform/instantiation/common/instantiationService","vs/platform/issue/node/issue","vs/platform/issue/node/issueIpc","vs/platform/keybinding/common/baseResolvedKeybinding","vs/platform/keybinding/common/usLayoutResolvedKeybinding","vs/platform/lifecycle/common/lifecycle","vs/base/common/date","vs/platform/files/common/fileService","vs/platform/files/node/diskFileSystemProvider","vs/platform/log/common/bufferLog","vs/platform/log/common/logIpc","vs/platform/log/node/spdlogService","vs/platform/request/electron-main/requestService","vs/platform/menubar/node/menubarIpc","vs/platform/product/common/product","vs/base/parts/ipc/common/ipc.net","vs/base/parts/ipc/node/ipc.electron","vs/platform/environment/node/environmentService","vs/base/parts/ipc/electron-main/ipc.electron-main","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/base/node/encoding","vs/platform/issue/electron-main/issueService","vs/platform/configuration/common/configurationModels","vs/platform/configuration/node/configurationService","vs/base/parts/storage/common/storage","vs/base/parts/storage/node/storage","vs/platform/request/node/proxy","url","vs/platform/sign/common/sign","vs/platform/sign/node/signService","vs/code/electron-main/windowsStateStorage","vs/platform/request/node/requestService","vs/platform/state/node/stateService","vs/platform/storage/common/storage","vs/platform/storage/node/storageMainService","vs/code/node/shellEnv","vs/nls!vs/base/common/keybindingLabels","vs/platform/extensionManagement/common/extensionGalleryService","vs/platform/storage/node/storageIpc","vs/platform/telemetry/common/telemetryService","vs/platform/telemetry/common/telemetryUtils","vs/platform/telemetry/node/commonProperties","vs/platform/telemetry/node/telemetryIpc","vs/base/common/collections","vs/code/electron-main/sharedProcess","vs/code/electron-main/app","vs/base/common/keybindingLabels","vs/platform/update/electron-main/updateService.darwin","vs/platform/update/electron-main/updateService.linux","vs/platform/update/electron-main/updateService.snap","vs/platform/update/electron-main/updateService.win32","vs/platform/update/node/update.config.contribution","vs/platform/update/node/updateIpc","vs/nls!vs/base/node/processes","vs/platform/url/common/urlService","vs/platform/url/node/urlIpc","vs/platform/url/node/urlService","vs/base/node/processes","vs/base/node/macAddress","vs/code/electron-main/auth","vs/platform/driver/electron-main/driver","vs/platform/menubar/electron-main/menubar","vs/platform/menubar/electron-main/menubarService","vs/platform/url/electron-main/electronUrlListener","vs/platform/windows/electron-main/windowsService","vs/nls!vs/code/electron-main/app","vs/code/node/windowsFinder","vs/platform/backup/electron-main/backupMainService","vs/platform/label/common/label","vs/platform/history/electron-main/historyMainService","vs/platform/windows/common/windowsIpc","vs/platform/workspace/common/workspace","vs/nls!vs/code/electron-main/auth","vs/platform/workspaces/node/workspacesIpc","vs/nls!vs/code/electron-main/window","vs/nls!vs/code/electron-main/windows","vs/code/electron-main/window","vs/platform/environment/node/argvHelper","vs/code/electron-main/windows","vs/base/common/performance","assert","vscode-minimist","net","stream","iconv-lite","zlib","string_decoder","vs/code/electron-main/main"],i=function(e){
for(var i=[],n=0,r=e.length;n<r;n++)i[n]=t[e[n]];return i};define(t[118],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ok=function(e,t){if(!e)throw new Error(t?"Assertion failed ("+t+")":"Assertion Failed")}}),define(t[31],i([1,0]),function(e,t){"use strict";function i(e,t){return e[t]*Math.pow(2,24)+e[t+1]*Math.pow(2,16)+e[t+2]*Math.pow(2,8)+e[t+3]}function n(e,t,i){e[i+3]=t,t>>>=8,e[i+2]=t,t>>>=8,e[i+1]=t,t>>>=8,e[i]=t}function r(){return new c}Object.defineProperty(t,"__esModule",{value:!0}),t.hasBuffer="undefined"!=typeof Buffer;let s,o;class a{static alloc(e){return new a(t.hasBuffer?Buffer.allocUnsafe(e):new Uint8Array(e))}static wrap(e){return t.hasBuffer&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new a(e)}static fromString(e){return t.hasBuffer?new a(Buffer.from(e)):(s||(s=new TextEncoder),new a(s.encode(e)))}static concat(e,t){if(void 0===t){t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].byteLength}const i=a.alloc(t);let n=0
;for(let t=0,r=e.length;t<r;t++){const r=e[t];i.set(r,n),n+=r.byteLength}return i}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return t.hasBuffer?this.buffer.toString():(o||(o=new TextDecoder),o.decode(this.buffer))}slice(e,t){return new a(this.buffer.subarray(e,t))}set(e,t){this.buffer.set(e.buffer,t)}readUInt32BE(e){return i(this.buffer,e)}writeUInt32BE(e,t){n(this.buffer,e,t)}readUInt8(e){return function(e,t){return e[t]}(this.buffer,e)}writeUInt8(e,t){!function(e,t,i){e[i]=t}(this.buffer,e,t)}}t.VSBuffer=a,t.readUInt32BE=i,t.writeUInt32BE=n,t.isVSBufferReadableStream=function(e){const t=e;return t&&[t.on,t.pause,t.resume,t.destroy].every(e=>"function"==typeof e)},t.readableToBuffer=function(e){const t=[];let i;for(;i=e.read();)t.push(i);return a.concat(t)},t.bufferToReadable=function(e){let t=!1;return{read:()=>t?null:(t=!0,e)}},t.streamToBuffer=function(e){return new Promise((t,i)=>{const n=[];e.on("data",e=>n.push(e)),e.on("error",e=>i(e)),e.on("end",()=>t(a.concat(n)))
})},t.bufferToStream=function(e){const t=r();return t.end(e),t},t.toVSBufferReadableStream=function(e){const t=r();return e.on("data",e=>t.write("string"==typeof e?a.fromString(e):a.wrap(e))),e.on("end",()=>t.end()),e.on("error",e=>t.error(e)),t},t.writeableBufferStream=r;class c{constructor(){this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]}}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){this.state.destroyed||(this.state.flowing?this.listeners.data.forEach(t=>t(e)):this.buffer.data.push(e))}error(e){this.state.destroyed||(this.state.flowing?this.listeners.error.forEach(t=>t(e)):this.buffer.error.push(e))}end(e){this.state.destroyed||(e instanceof Error?this.error(e):e&&this.write(e),this.state.flowing?(this.listeners.end.forEach(e=>e()),this.destroy()):this.state.ended=!0)}on(e,t){
if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors()}}flowData(){if(this.buffer.data.length>0){const e=a.concat(this.buffer.data);this.listeners.data.forEach(t=>t(e)),this.buffer.data.length=0}}flowErrors(){if(this.listeners.error.length>0){for(const e of this.buffer.error)this.listeners.error.forEach(t=>t(e));this.buffer.error.length=0}}flowEnd(){return!!this.state.ended&&(this.listeners.end.forEach(e=>e()),this.listeners.end.length>0)}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0)}}}),define(t[167],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=Object.prototype.hasOwnProperty
;t.values=function(e){const t=[];for(let n in e)i.call(e,n)&&t.push(e[n]);return t},t.size=function(e){let t=0;for(let n in e)i.call(e,n)&&(t+=1);return t},t.first=function(e){for(const t in e)if(i.call(e,t))return e[t]},t.forEach=function(e,t){for(let n in e)if(i.call(e,n)&&!1===t({key:n,value:e[n]},function(){delete e[n]}))return},t.groupBy=function(e,t){const i=Object.create(null);for(const n of e){const e=t(n);let r=i[e];r||(r=i[e]=[]),r.push(n)}return i},t.fromMap=function(e){const t=Object.create(null);return e&&e.forEach((e,i)=>{t[i]=e}),t};class n{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),0===i.size&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}}t.SetMap=n}),define(t[54],i([1,0]),function(e,t){"use strict";function i(e){return(t,i,n)=>{let r=null,s=null;if("function"==typeof n.value?(r="value",s=n.value):"function"==typeof n.get&&(r="get",s=n.get),
!s)throw new Error("not supported");n[r]=e(s,i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=i,t.memoize=function(e,t,i){let n=null,r=null;if("function"==typeof i.value?(n="value",0!==(r=i.value).length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"==typeof i.get&&(n="get",r=i.get),!r)throw new Error("not supported");const s=`$memoize$${t}`;i[n]=function(...e){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,e)}),this[s]}},t.debounce=function(e,t,n){return i((i,r)=>{const s=`$debounce$${r}`,o=`$debounce$result$${r}`;return function(...r){this[o]||(this[o]=n?n():void 0),clearTimeout(this[s]),t&&(this[o]=t(this[o],...r),r=[this[o]]),this[s]=setTimeout(()=>{i.apply(this,r),this[o]=n?n():void 0},e)}})}}),define(t[18],i([1,0]),function(e,t){"use strict";function i(e){return e instanceof Error&&e.name===r&&e.message===r}Object.defineProperty(t,"__esModule",{value:!0});class n{
constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}t.ErrorHandler=n,t.errorHandler=new n,t.setUnexpectedErrorHandler=function(e){t.errorHandler.setUnexpectedErrorHandler(e)},t.onUnexpectedError=function(e){i(e)||t.errorHandler.onUnexpectedError(e)},t.onUnexpectedExternalError=function(e){i(e)||t.errorHandler.onUnexpectedExternalError(e)},t.transformErrorForSerialization=function(e){if(e instanceof Error){let{name:t,message:i}=e;return{$isError:!0,name:t,message:i,
stack:e.stacktrace||e.stack}}return e};const r="Canceled";t.isPromiseCanceledError=i,t.canceled=function(){const e=new Error(r);return e.name=e.message,e},t.illegalArgument=function(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")},t.illegalState=function(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")},t.readonly=function(e){return e?new Error(`readonly property '${e} cannot be changed'`):new Error("readonly property cannot be changed")},t.disposed=function(e){const t=new Error(`${e} has been disposed`);return t.name="DISPOSED",t},t.getErrorMessage=function(e){return e?e.message?e.message:e.stack?e.stack.split("\n")[0]:String(e):"Error"};class s extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}}t.NotImplementedError=s});var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){
e.done?r(e.value):new i(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t||[])).next())})};define(t[25],i([1,0,18]),function(e,t,i){"use strict";function r(e,t){let i=0,n=e.length;if(0===n)return 0;for(;i<n;){const r=Math.floor((i+n)/2);t(e[r])?n=r:i=r+1}return i}function s(e,t){return o(e,t,0,e.length-1,[]),e}function o(e,t,i,n,r){if(n<=i)return;const s=i+(n-i)/2|0;o(e,t,i,s,r),o(e,t,s+1,n,r),t(e[s],e[s+1])<=0||function(e,t,i,n,r,s){let o=i,a=n+1;for(let t=i;t<=r;t++)s[t]=e[t];for(let c=i;c<=r;c++)o>n?e[c]=s[a++]:a>r?e[c]=s[o++]:t(s[a],s[o])<0?e[c]=s[a++]:e[c]=s[o++]}(e,t,i,s,n,r)}function a(e,t,i){function n(e,t,i){if(0===t&&0===i.length)return;const n=r[r.length-1];n&&n.start+n.deleteCount===e?(n.deleteCount+=t,n.toInsert.push(...i)):r.push({start:e,deleteCount:t,toInsert:i})}const r=[];let s=0,o=0;for(;;){if(s===e.length){n(s,0,t.slice(o));break}if(o===t.length){n(s,e.length-s,[]);break}const r=e[s],a=t[o],c=i(r,a);0===c?(s+=1,o+=1):c<0?(n(s,1,[]),s+=1):c>0&&(n(s,0,[a]),o+=1)}return r}
function c(e,t,i,n,s){for(const o=i.length;n<s;n++){const s=e[n];if(t(s,i[o-1])<0){i.pop();const e=r(i,e=>t(s,e)<0);i.splice(e,0,s)}}}function l(e,t){for(let i=0;i<e.length;i++){if(t(e[i]))return i}return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.tail=function(e,t=0){return e[e.length-(1+t)]},t.tail2=function(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]},t.equals=function(e,t,i=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!i(e[n],t[n]))return!1;return!0},t.binarySearch=function(e,t,i){let n=0,r=e.length-1;for(;n<=r;){const s=(n+r)/2|0,o=i(e[s],t);if(o<0)n=s+1;else{if(!(o>0))return s;r=s-1}}return-(n+1)},t.findFirstInSorted=r,t.mergeSort=s,t.groupBy=function(e,t){const i=[];let n=void 0;for(const r of s(e.slice(0),t))n&&0===t(n[0],r)?n.push(r):(n=[r],i.push(n));return i},t.sortedDiff=a,t.delta=function(e,t,i){const n=a(e,t,i),r=[],s=[]
;for(const t of n)r.push(...e.slice(t.start,t.start+t.deleteCount)),s.push(...t.toInsert);return{removed:r,added:s}},t.top=function(e,t,i){if(0===i)return[];const n=e.slice(0,i).sort(t);return c(e,t,n,i,e.length),n},t.topAsync=function(e,t,r,s,o){return 0===r?Promise.resolve([]):new Promise((a,l)=>{(()=>n(this,void 0,void 0,function*(){const n=e.length,a=e.slice(0,r).sort(t);for(let l=r,u=Math.min(r+s,n);l<n;l=u,u=Math.min(u+s,n)){if(l>r&&(yield new Promise(e=>setTimeout(e))),o&&o.isCancellationRequested)throw i.canceled();c(e,t,a,l,u)}return a}))().then(a,l)})},t.coalesce=function(e){return e.filter(e=>!!e)},t.coalesceInPlace=function(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t},t.move=function(e,t,i){e.splice(i,0,e.splice(t,1)[0])},t.isFalsyOrEmpty=function(e){return!Array.isArray(e)||0===e.length},t.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},t.distinct=function(e,t){if(!t)return e.filter((t,i)=>e.indexOf(t)===i);const i=Object.create(null)
;return e.filter(e=>{const n=t(e);return!i[n]&&(i[n]=!0,!0)})},t.distinctES6=function(e){const t=new Set;return e.filter(e=>!t.has(e)&&(t.add(e),!0))},t.uniqueFilter=function(e){const t=Object.create(null);return i=>{const n=e(i);return!t[n]&&(t[n]=!0,!0)}},t.lastIndex=function(e,t){for(let i=e.length-1;i>=0;i--)if(t(e[i]))return i;return-1},t.firstIndex=l,t.first=function(e,t,i){const n=l(e,t);return n<0?i:e[n]},t.commonPrefixLength=function(e,t,i=((e,t)=>e===t)){let n=0;for(let r=0,s=Math.min(e.length,t.length);r<s&&i(e[r],t[r]);r++)n++;return n},t.flatten=function(e){return[].concat(...e)},t.range=function(e,t){let i="number"==typeof t?e:0;"number"==typeof t?i=e:(i=0,t=e);const n=[];if(i<=t)for(let e=i;e<t;e++)n.push(e);else for(let e=i;e>t;e--)n.push(e);return n},t.fill=function(e,t,i=[]){for(let n=0;n<e;n++)i[n]=t;return i},t.index=function(e,t,i=(e=>e)){return e.reduce((e,n)=>{const r=t(n);return e[r]=i(n,e[r]),e},Object.create(null))},t.insert=function(e,t){return e.push(t),()=>{const i=e.indexOf(t)
;i>-1&&e.splice(i,1)}},t.arrayInsert=function(e,t,i){const n=e.slice(0,t),r=e.slice(t);return n.concat(i,r)},t.shuffle=function(e,t){let i;if("number"==typeof t){let e=t;i=(()=>{const t=179426549*Math.sin(e++);return t-Math.floor(t)})}else i=Math.random;for(let t=e.length-1;t>0;t-=1){const n=Math.floor(i()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}},t.pushToStart=function(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.unshift(t))},t.pushToEnd=function(e,t){const i=e.indexOf(t);i>-1&&(e.splice(i,1),e.push(t))},t.find=function(e,t){for(let i=0;i<e.length;i++){const n=e[i];if(t(n,i,e))return n}},t.mapArrayOrNot=function(e,t){return Array.isArray(e)?e.map(t):t(e)},t.asArray=function(e){return Array.isArray(e)?e:[e]}}),define(t[50],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.once=function(e){const t=this;let i,n=!1;return function(){return n?i:(n=!0,i=e.apply(t,arguments))}}}),define(t[77],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FIN={
done:!0,value:void 0};var i;!function(e){const i={next:()=>t.FIN};e.empty=function(){return i},e.single=function(e){let i=!1;return{next:()=>i?t.FIN:(i=!0,{done:!1,value:e})}},e.fromArray=function(e,i=0,n=e.length){return{next:()=>i>=n?t.FIN:{done:!1,value:e[i++]}}},e.from=function(t){return t?Array.isArray(t)?e.fromArray(t):t:e.empty()},e.map=function(e,i){return{next(){const n=e.next();return n.done?t.FIN:{done:!1,value:i(n.value)}}}},e.filter=function(e,i){return{next(){for(;;){const n=e.next();if(n.done)return t.FIN;if(i(n.value))return{done:!1,value:n.value}}}}},e.forEach=function(e,t){for(let i=e.next();!i.done;i=e.next())t(i.value)},e.collect=function(e,t=Number.POSITIVE_INFINITY){const i=[];if(0===t)return i;let n=0;for(let r=e.next();!(r.done||(i.push(r.value),++n>=t));r=e.next());return i},e.concat=function(...e){let i=0;return{next(){if(i>=e.length)return t.FIN;const n=e[i].next();return n.done?(i++,this.next()):n}}}}(i=t.Iterator||(t.Iterator={})),t.getSequenceIterator=function(e){
return Array.isArray(e)?i.fromArray(e):e};class n{constructor(e,t=0,i=e.length,n=t-1){this.items=e,this.start=t,this.end=i,this.index=n}first(){return this.index=this.start,this.current()}next(){return this.index=Math.min(this.index+1,this.end),this.current()}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}}t.ArrayIterator=n;class r extends n{constructor(e,t=0,i=e.length,n=t-1){super(e,t,i,n)}current(){return super.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}parent(){return null}}t.ArrayNavigator=r;class s{constructor(e,t){this.iterator=e,this.fn=t}next(){return this.fn(this.iterator.next())}}t.MappedIterator=s;class o extends s{constructor(e,t){super(e,t),this.navigator=e}current(){return this.fn(this.navigator.current())}previous(){return this.fn(this.navigator.previous())}parent(){
return this.fn(this.navigator.parent())}first(){return this.fn(this.navigator.first())}last(){return this.fn(this.navigator.last())}next(){return this.fn(this.navigator.next())}}t.MappedNavigator=o}),define(t[42],i([1,0]),function(e,t){"use strict";function i(e,t=!1){function i(t){let i=0,n=0;for(;i<t;){const t=e.charCodeAt(a);if(t>=48&&t<=57)n=16*n+t-48;else if(t>=65&&t<=70)n=16*n+t-65+10;else{if(!(t>=97&&t<=102))break;n=16*n+t-97+10}a++,i++}return i<t&&(n=-1),n}function o(){if(l="",h=0,u=a,a>=c)return u=c,d=17;let t=e.charCodeAt(a);if(n(t)){do{a++,l+=String.fromCharCode(t),t=e.charCodeAt(a)}while(n(t));return d=15}if(r(t))return a++,l+=String.fromCharCode(t),13===t&&10===e.charCodeAt(a)&&(a++,l+="\n"),d=14;switch(t){case 123:return a++,d=1;case 125:return a++,d=2;case 91:return a++,d=3;case 93:return a++,d=4;case 58:return a++,d=6;case 44:return a++,d=5;case 34:return a++,l=function(){let t="",n=a;for(;;){if(a>=c){t+=e.substring(n,a),h=2;break}let s=e.charCodeAt(a);if(34===s){t+=e.substring(n,a),a++;break}
if(92!==s){if(s>=0&&s<=31){if(r(s)){t+=e.substring(n,a),h=2;break}h=6}a++}else{if(t+=e.substring(n,a),++a>=c){h=2;break}switch(n=e.charCodeAt(a++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:const n=i(4);n>=0?t+=String.fromCharCode(n):h=4;break;default:h=5}n=a}}return t}(),d=10;case 47:const o=a-1;if(47===e.charCodeAt(a+1)){for(a+=2;a<c&&!r(e.charCodeAt(a));)a++;return l=e.substring(o,a),d=12}if(42===e.charCodeAt(a+1)){a+=2;const t=c-1;let i=!1;for(;a<t;){if(42===e.charCodeAt(a)&&47===e.charCodeAt(a+1)){a+=2,i=!0;break}a++}return i||(a++,h=1),l=e.substring(o,a),d=13}return l+=String.fromCharCode(t),a++,d=16;case 45:if(l+=String.fromCharCode(t),++a===c||!s(e.charCodeAt(a)))return d=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l+=function(){const t=a;if(48===e.charCodeAt(a))a++;else for(a++;a<e.length&&s(e.charCodeAt(a));)a++
;if(a<e.length&&46===e.charCodeAt(a)){if(!(++a<e.length&&s(e.charCodeAt(a))))return h=3,e.substring(t,a);for(a++;a<e.length&&s(e.charCodeAt(a));)a++}let i=a;if(a<e.length&&(69===e.charCodeAt(a)||101===e.charCodeAt(a)))if((++a<e.length&&43===e.charCodeAt(a)||45===e.charCodeAt(a))&&a++,a<e.length&&s(e.charCodeAt(a))){for(a++;a<e.length&&s(e.charCodeAt(a));)a++;i=a}else h=3;return e.substring(t,i)}(),d=11;default:for(;a<c&&function(e){if(n(e)||r(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}(t);)a++,t=e.charCodeAt(a);if(u!==a){switch(l=e.substring(u,a)){case"true":return d=8;case"false":return d=9;case"null":return d=7}return d=16}return l+=String.fromCharCode(t),a++,d=16}}let a=0,c=e.length,l="",u=0,d=16,h=0;return{setPosition:function(e){a=e,l="",u=0,d=16,h=0},getPosition:()=>a,scan:t?function(){let e;do{e=o()}while(e>=12&&e<=15);return e}:o,getToken:()=>d,getTokenValue:()=>l,getTokenOffset:()=>u,getTokenLength:()=>a-u,getTokenError:()=>h}}
function n(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function r(e){return 10===e||13===e||8232===e||8233===e}function s(e){return e>=48&&e<=57}function o(e){if(!e.parent||!e.parent.children)return[];const t=o(e.parent);if("property"===e.parent.type){const i=e.parent.children[0].value;t.push(i)}else if("array"===e.parent.type){const i=e.parent.children.indexOf(e);-1!==i&&t.push(i)}return t}function a(e){switch(e.type){case"array":return e.children.map(a);case"object":const t=Object.create(null);for(let i of e.children){const e=i.children[1];e&&(t[i.children[0].value]=a(e))}return t;case"null":case"string":case"number":case"boolean":return e.value;default:return}}function c(e,t,i=!1){return t>=e.offset&&t<e.offset+e.length||i&&t===e.offset+e.length}function l(e,t,i=!1){if(c(e,t,i)){const n=e.children;if(Array.isArray(n))for(let e=0;e<n.length&&n[e].offset<=t;e++){const r=l(n[e],t,i);if(r)return r}return e}}function u(e,t,n=h.DEFAULT){
function r(e){return e?()=>e(d.getTokenOffset(),d.getTokenLength()):()=>!0}function s(e){return e?t=>e(t,d.getTokenOffset(),d.getTokenLength()):()=>!0}function o(){for(;;){const e=d.scan();switch(d.getTokenError()){case 4:a(14);break;case 5:a(15);break;case 3:a(13);break;case 1:_||a(11);break;case 2:a(12);break;case 6:a(16)}switch(e){case 12:case 13:_?a(10):S();break;case 16:a(1);break;case 15:case 14:break;default:return e}}}function a(e,t=[],i=[]){if(b(e),t.length+i.length>0){let e=d.getToken();for(;17!==e;){if(-1!==t.indexOf(e)){o();break}if(-1!==i.indexOf(e))break;e=o()}}}function c(e){const t=d.getTokenValue();return e?w(t):p(t),o(),!0}function l(){return 10!==d.getToken()?(a(3,[],[2,5]),!1):(c(!1),6===d.getToken()?(y(":"),o(),u()||a(4,[],[2,5])):a(5,[],[2,5]),!0)}function u(){switch(d.getToken()){case 3:return function(){m(),o();let e=!1;for(;4!==d.getToken()&&17!==d.getToken();){if(5===d.getToken()){if(e||a(4,[],[]),y(","),o(),4===d.getToken()&&E)break}else e&&a(6,[],[]);u()||a(4,[],[4,5]),e=!0}
return v(),4!==d.getToken()?a(8,[4],[]):o(),!0}();case 1:return function(){f(),o();let e=!1;for(;2!==d.getToken()&&17!==d.getToken();){if(5===d.getToken()){if(e||a(4,[],[]),y(","),o(),2===d.getToken()&&E)break}else e&&a(6,[],[]);l()||a(4,[],[2,5]),e=!0}return g(),2!==d.getToken()?a(7,[2],[]):o(),!0}();case 10:return c(!0);default:return function(){switch(d.getToken()){case 11:let e=0;try{"number"!=typeof(e=JSON.parse(d.getTokenValue()))&&(a(2),e=0)}catch(e){a(2)}w(e);break;case 7:w(null);break;case 8:w(!0);break;case 9:w(!1);break;default:return!1}return o(),!0}()}}const d=i(e,!1),f=r(t.onObjectBegin),p=s(t.onObjectProperty),g=r(t.onObjectEnd),m=r(t.onArrayBegin),v=r(t.onArrayEnd),w=s(t.onLiteralValue),y=s(t.onSeparator),S=r(t.onComment),b=s(t.onError),_=n&&n.disallowComments,E=n&&n.allowTrailingComma;return o(),17===d.getToken()||(u()?(17!==d.getToken()&&a(9,[],[]),!0):(a(4,[],[]),!1))}function d(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"
;default:return"null"}}Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"}(t.ScanError||(t.ScanError={}));!function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",
e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"}(t.SyntaxKind||(t.SyntaxKind={}));!function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"}(t.ParseErrorCode||(t.ParseErrorCode={}));var h;!function(e){e.DEFAULT={allowTrailingComma:!0}}(h=t.ParseOptions||(t.ParseOptions={})),t.createScanner=i;var f;!function(e){
e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",
e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",
e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"}(f||(f={})),t.getLocation=function(e,t){function i(e,t,i,n){o.value=e,o.offset=t,o.length=i,o.type=n,o.colonOffset=void 0,s=o}const n=[],r=new Object;let s=void 0;const o={value:{},offset:0,length:0,type:"object",parent:void 0};let a=!1;try{u(e,{
onObjectBegin:(e,i)=>{if(t<=e)throw r;s=void 0,a=t>e,n.push("")},onObjectProperty:(e,s,o)=>{if(t<s)throw r;if(i(e,s,o,"property"),n[n.length-1]=e,t<=s+o)throw r},onObjectEnd:(e,i)=>{if(t<=e)throw r;s=void 0,n.pop()},onArrayBegin:(e,i)=>{if(t<=e)throw r;s=void 0,n.push(0)},onArrayEnd:(e,i)=>{if(t<=e)throw r;s=void 0,n.pop()},onLiteralValue:(e,n,s)=>{if(t<n)throw r;if(i(e,n,s,d(e)),t<=n+s)throw r},onSeparator:(e,i,o)=>{if(t<=i)throw r;if(":"===e&&s&&"property"===s.type)s.colonOffset=i,a=!1,s=void 0;else if(","===e){const e=n[n.length-1];"number"==typeof e?n[n.length-1]=e+1:(a=!0,n[n.length-1]=""),s=void 0}}})}catch(e){if(e!==r)throw e}return{path:n,previousNode:s,isAtPropertyKey:a,matches:e=>{let t=0;for(let i=0;t<e.length&&i<n.length;i++)if(e[t]===n[i]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},t.parse=function(e,t=[],i=h.DEFAULT){function n(e){Array.isArray(s)?s.push(e):r&&(s[r]=e)}let r=null,s=[];const o=[];return u(e,{onObjectBegin:()=>{const e={};n(e),o.push(s),s=e,r=null},
onObjectProperty:e=>{r=e},onObjectEnd:()=>{s=o.pop()},onArrayBegin:()=>{const e=[];n(e),o.push(s),s=e,r=null},onArrayEnd:()=>{s=o.pop()},onLiteralValue:n,onError:(e,i,n)=>{t.push({error:e,offset:i,length:n})}},i),s[0]},t.parseTree=function(e,t=[],i=h.DEFAULT){function n(e){"property"===s.type&&(s.length=e-s.offset,s=s.parent)}function r(e){return s.children.push(e),e}let s={type:"array",offset:-1,length:-1,children:[],parent:void 0};u(e,{onObjectBegin:e=>{s=r({type:"object",offset:e,length:-1,parent:s,children:[]})},onObjectProperty:(e,t,i)=>{(s=r({type:"property",offset:t,length:-1,parent:s,children:[]})).children.push({type:"string",value:e,offset:t,length:i,parent:s})},onObjectEnd:(e,t)=>{s.length=e+t-s.offset,s=s.parent,n(e+t)},onArrayBegin:(e,t)=>{s=r({type:"array",offset:e,length:-1,parent:s,children:[]})},onArrayEnd:(e,t)=>{s.length=e+t-s.offset,s=s.parent,n(e+t)},onLiteralValue:(e,t,i)=>{r({type:d(e),offset:t,length:i,parent:s,value:e}),n(t+i)},onSeparator:(e,t,i)=>{
"property"===s.type&&(":"===e?s.colonOffset=t:","===e&&n(t))},onError:(e,i,n)=>{t.push({error:e,offset:i,length:n})}},i);const o=s.children[0];return o&&delete o.parent,o},t.findNodeAtLocation=function(e,t){if(!e)return;let i=e;for(let e of t)if("string"==typeof e){if("object"!==i.type||!Array.isArray(i.children))return;let t=!1;for(const n of i.children)if(Array.isArray(n.children)&&n.children[0].value===e){i=n.children[1],t=!0;break}if(!t)return}else{const t=e;if("array"!==i.type||t<0||!Array.isArray(i.children)||t>=i.children.length)return;i=i.children[t]}return i},t.getNodePath=o,t.getNodeValue=a,t.contains=c,t.findNodeAtOffset=l,t.visit=u,t.stripComments=function(e,t){let n,r,s=i(e),o=[],a=0;do{switch(r=s.getPosition(),n=s.scan()){case 12:case 13:case 17:a!==r&&o.push(e.substring(a,r)),void 0!==t&&o.push(s.getTokenValue().replace(/[^\r\n]/g,t)),a=s.getPosition()}}while(17!==n);return o.join("")}}),define(t[101],i([1,0,42]),function(e,t,i){"use strict";function n(e,t,n){function o(){return p+r(g,l+v)}
function a(){let e=w.scan();for(m=!1;15===e||14===e;)m=m||14===e,e=w.scan();return y=16===e||0!==w.getTokenError(),e}function c(t,i,n){!y&&i<f&&n>h&&e.substring(i,n)!==t&&S.push({offset:i,length:n-i,content:t})}let l,u,d,h,f;if(t){for(h=t.offset,f=h+t.length,d=h;d>0&&!s(e,d-1);)d--;let i=f;for(;i<e.length&&!s(e,i);)i++;u=e.substring(d,i),l=function(e,t){let i=0,n=0;const r=t.tabSize||4;for(;i<e.length;){const t=e.charAt(i);if(" "===t)n++;else{if("\t"!==t)break;n+=r}i++}return Math.floor(n/r)}(u,n)}else u=e,l=0,d=0,h=0,f=e.length;const p=function(e,t){for(let e=0;e<t.length;e++){const i=t.charAt(e);if("\r"===i)return e+1<t.length&&"\n"===t.charAt(e+1)?"\r\n":"\r";if("\n"===i)return"\n"}return e&&e.eol||"\n"}(n,e);let g,m=!1,v=0;g=n.insertSpaces?r(" ",n.tabSize||4):"\t";const w=i.createScanner(u,!1);let y=!1;const S=[];let b=a();if(17!==b){const e=w.getTokenOffset()+d;c(r(g,l),d,e)}for(;17!==b;){let e=w.getTokenOffset()+w.getTokenLength()+d,t=a(),i="";for(;!m&&(12===t||13===t);){c(" ",e,w.getTokenOffset()+d),
e=w.getTokenOffset()+w.getTokenLength()+d,i=12===t?o():"",t=a()}if(2===t)1!==b&&(v--,i=o());else if(4===t)3!==b&&(v--,i=o());else{switch(b){case 3:case 1:v++,i=o();break;case 5:case 12:i=o();break;case 13:i=m?o():" ";break;case 6:i=" ";break;case 10:if(6===t){i="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===t||13===t?i=" ":5!==t&&17!==t&&(y=!0);break;case 16:y=!0}!m||12!==t&&13!==t||(i=o())}c(i,e,w.getTokenOffset()+d),b=t}return S}function r(e,t){let i="";for(let n=0;n<t;n++)i+=e;return i}function s(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.format=n,t.isEOL=s}),define(t[112],i([1,0,42,101,25]),function(e,t,i,n,r){"use strict";function s(e,t,n,r,s){const a=t.slice(),c=i.parseTree(e,[]);let l=void 0,u=void 0;for(;a.length>0&&(u=a.pop(),void 0===(l=i.findNodeAtLocation(c,a))&&void 0!==n);)n="string"==typeof u?{[u]:n}:[n];if(l){if("object"===l.type&&"string"==typeof u&&Array.isArray(l.children)){const t=i.findNodeAtLocation(l,[u]);if(void 0!==t){
if(void 0===n){if(!t.parent)throw new Error("Malformed AST");const i=l.children.indexOf(t.parent);let n,s=t.parent.offset+t.parent.length;if(i>0){const e=l.children[i-1];n=e.offset+e.length}else if(n=l.offset+1,l.children.length>1){s=l.children[1].offset}return o(e,{offset:n,length:s-n,content:""},r)}return o(e,{offset:t.offset,length:t.length,content:JSON.stringify(n)},r)}{if(void 0===n)return[];const t=`${JSON.stringify(u)}: ${JSON.stringify(n)}`,i=s?s(l.children.map(e=>e.children[0].value)):l.children.length;let a;if(i>0){const e=l.children[i-1];a={offset:e.offset+e.length,length:0,content:","+t}}else a=0===l.children.length?{offset:l.offset+1,length:0,content:t}:{offset:l.offset+1,length:0,content:t+","};return o(e,a,r)}}if("array"===l.type&&"number"==typeof u&&Array.isArray(l.children)){if(-1===u){const t=`${JSON.stringify(n)}`;let i;if(0===l.children.length)i={offset:l.offset+1,length:0,content:t};else{const e=l.children[l.children.length-1];i={offset:e.offset+e.length,length:0,content:","+t}}
return o(e,i,r)}if(void 0===n&&l.children.length>=0){const t=u,i=l.children[t];let n;if(1===l.children.length)n={offset:l.offset+1,length:l.length-2,content:""};else if(l.children.length-1===t){const e=l.children[t-1],i=e.offset+e.length;n={offset:i,length:l.offset+l.length-2-i,content:""}}else n={offset:i.offset,length:l.children[t+1].offset-i.offset,content:""};return o(e,n,r)}throw new Error("Array modification not supported yet")}throw new Error(`Can not add ${"number"!=typeof u?"index":"property"} to parent of type ${l.type}`)}if(void 0===n)throw new Error("Can not delete in empty document");return o(e,{offset:c?c.offset:0,length:c?c.length:0,content:JSON.stringify(n)},r)}function o(e,t,i){let r=a(e,t),s=t.offset,o=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;s>0&&!n.isEOL(r,s-1);)s--;for(;o<r.length&&!n.isEOL(r,o);)o++}const c=n.format(r,{offset:s,length:o-s},i);for(let e=c.length-1;e>=0;e--){const t=c[e];r=a(r,t),s=Math.min(s,t.offset),o=Math.max(o,t.offset+t.length),
o+=t.content.length-t.length}return[{offset:s,length:e.length-(r.length-o)-s,content:r.substring(s,o)}]}function a(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.removeProperty=function(e,t,i){return s(e,t,void 0,i)},t.setProperty=s,t.applyEdit=a,t.applyEdits=function(e,t){let i=r.mergeSort(t,(e,t)=>{const i=e.offset-t.offset;return 0===i?e.length-t.length:i}),n=e.length;for(let t=i.length-1;t>=0;t--){let r=i[t];if(!(r.offset+r.length<=n))throw new Error("Overlapping edit");e=a(e,r),n=r.offset}return e},t.isWS=function(e,t){return-1!=="\r\n \t".indexOf(e.charAt(t))}}),define(t[52],i([1,0,18]),function(e,t,i){"use strict";function n(e,t){const i=!!(2048&e),n=!!(256&e);return new l(2===t?n:i,!!(1024&e),!!(512&e),2===t?i:n,255&e)}Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",
e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.KEY_0=21]="KEY_0",e[e.KEY_1=22]="KEY_1",e[e.KEY_2=23]="KEY_2",e[e.KEY_3=24]="KEY_3",e[e.KEY_4=25]="KEY_4",e[e.KEY_5=26]="KEY_5",e[e.KEY_6=27]="KEY_6",e[e.KEY_7=28]="KEY_7",e[e.KEY_8=29]="KEY_8",e[e.KEY_9=30]="KEY_9",e[e.KEY_A=31]="KEY_A",e[e.KEY_B=32]="KEY_B",e[e.KEY_C=33]="KEY_C",e[e.KEY_D=34]="KEY_D",e[e.KEY_E=35]="KEY_E",e[e.KEY_F=36]="KEY_F",e[e.KEY_G=37]="KEY_G",e[e.KEY_H=38]="KEY_H",e[e.KEY_I=39]="KEY_I",e[e.KEY_J=40]="KEY_J",e[e.KEY_K=41]="KEY_K",e[e.KEY_L=42]="KEY_L",e[e.KEY_M=43]="KEY_M",e[e.KEY_N=44]="KEY_N",e[e.KEY_O=45]="KEY_O",e[e.KEY_P=46]="KEY_P",e[e.KEY_Q=47]="KEY_Q",e[e.KEY_R=48]="KEY_R",e[e.KEY_S=49]="KEY_S",
e[e.KEY_T=50]="KEY_T",e[e.KEY_U=51]="KEY_U",e[e.KEY_V=52]="KEY_V",e[e.KEY_W=53]="KEY_W",e[e.KEY_X=54]="KEY_X",e[e.KEY_Y=55]="KEY_Y",e[e.KEY_Z=56]="KEY_Z",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.NumLock=78]="NumLock",e[e.ScrollLock=79]="ScrollLock",e[e.US_SEMICOLON=80]="US_SEMICOLON",e[e.US_EQUAL=81]="US_EQUAL",e[e.US_COMMA=82]="US_COMMA",e[e.US_MINUS=83]="US_MINUS",e[e.US_DOT=84]="US_DOT",e[e.US_SLASH=85]="US_SLASH",e[e.US_BACKTICK=86]="US_BACKTICK",e[e.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",e[e.US_BACKSLASH=88]="US_BACKSLASH",e[e.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",e[e.US_QUOTE=90]="US_QUOTE",e[e.OEM_8=91]="OEM_8",e[e.OEM_102=92]="OEM_102",
e[e.NUMPAD_0=93]="NUMPAD_0",e[e.NUMPAD_1=94]="NUMPAD_1",e[e.NUMPAD_2=95]="NUMPAD_2",e[e.NUMPAD_3=96]="NUMPAD_3",e[e.NUMPAD_4=97]="NUMPAD_4",e[e.NUMPAD_5=98]="NUMPAD_5",e[e.NUMPAD_6=99]="NUMPAD_6",e[e.NUMPAD_7=100]="NUMPAD_7",e[e.NUMPAD_8=101]="NUMPAD_8",e[e.NUMPAD_9=102]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=104]="NUMPAD_ADD",e[e.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",e[e.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",e[e.ABNT_C1=110]="ABNT_C1",e[e.ABNT_C2=111]="ABNT_C2",e[e.MAX_VALUE=112]="MAX_VALUE"}(t.KeyCode||(t.KeyCode={}));class r{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const s=new r,o=new r,a=new r;!function(){function e(e,t,i=t,n=i){
s.define(e,t),o.define(e,i),a.define(e,n)}e(0,"unknown"),e(1,"Backspace"),e(2,"Tab"),e(3,"Enter"),e(4,"Shift"),e(5,"Ctrl"),e(6,"Alt"),e(7,"PauseBreak"),e(8,"CapsLock"),e(9,"Escape"),e(10,"Space"),e(11,"PageUp"),e(12,"PageDown"),e(13,"End"),e(14,"Home"),e(15,"LeftArrow","Left"),e(16,"UpArrow","Up"),e(17,"RightArrow","Right"),e(18,"DownArrow","Down"),e(19,"Insert"),e(20,"Delete"),e(21,"0"),e(22,"1"),e(23,"2"),e(24,"3"),e(25,"4"),e(26,"5"),e(27,"6"),e(28,"7"),e(29,"8"),e(30,"9"),e(31,"A"),e(32,"B"),e(33,"C"),e(34,"D"),e(35,"E"),e(36,"F"),e(37,"G"),e(38,"H"),e(39,"I"),e(40,"J"),e(41,"K"),e(42,"L"),e(43,"M"),e(44,"N"),e(45,"O"),e(46,"P"),e(47,"Q"),e(48,"R"),e(49,"S"),e(50,"T"),e(51,"U"),e(52,"V"),e(53,"W"),e(54,"X"),e(55,"Y"),e(56,"Z"),e(57,"Meta"),e(58,"ContextMenu"),e(59,"F1"),e(60,"F2"),e(61,"F3"),e(62,"F4"),e(63,"F5"),e(64,"F6"),e(65,"F7"),e(66,"F8"),e(67,"F9"),e(68,"F10"),e(69,"F11"),e(70,"F12"),e(71,"F13"),e(72,"F14"),e(73,"F15"),e(74,"F16"),e(75,"F17"),e(76,"F18"),e(77,"F19"),e(78,"NumLock"),
e(79,"ScrollLock"),e(80,";",";","OEM_1"),e(81,"=","=","OEM_PLUS"),e(82,",",",","OEM_COMMA"),e(83,"-","-","OEM_MINUS"),e(84,".",".","OEM_PERIOD"),e(85,"/","/","OEM_2"),e(86,"`","`","OEM_3"),e(110,"ABNT_C1"),e(111,"ABNT_C2"),e(87,"[","[","OEM_4"),e(88,"\\","\\","OEM_5"),e(89,"]","]","OEM_6"),e(90,"'","'","OEM_7"),e(91,"OEM_8"),e(92,"OEM_102"),e(93,"NumPad0"),e(94,"NumPad1"),e(95,"NumPad2"),e(96,"NumPad3"),e(97,"NumPad4"),e(98,"NumPad5"),e(99,"NumPad6"),e(100,"NumPad7"),e(101,"NumPad8"),e(102,"NumPad9"),e(103,"NumPad_Multiply"),e(104,"NumPad_Add"),e(105,"NumPad_Separator"),e(106,"NumPad_Subtract"),e(107,"NumPad_Decimal"),e(108,"NumPad_Divide")}();!function(e){e.toString=function(e){return s.keyCodeToStr(e)},e.fromString=function(e){return s.strToKeyCode(e)},e.toUserSettingsUS=function(e){return o.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return a.keyCodeToStr(e)},e.fromUserSettings=function(e){return o.strToKeyCode(e)||a.strToKeyCode(e)}}(t.KeyCodeUtils||(t.KeyCodeUtils={}));var c;!function(e){
e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"}(c||(c={}));!function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl"}(t.KeyMod||(t.KeyMod={})),t.KeyChord=function(e,t){return(e|(65535&t)<<16>>>0)>>>0},t.createKeybinding=function(e,t){if(0===e)return null;const i=(65535&e)>>>0,r=(4294901760&e)>>>16;return new u(0!==r?[n(i,t),n(r,t)]:[n(i,t)])},t.createSimpleKeybinding=n;class l{constructor(e,t,i,n,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){return`${this.ctrlKey?"1":"0"}${this.shiftKey?"1":"0"}${this.altKey?"1":"0"}${this.metaKey?"1":"0"}${this.keyCode}`}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}toChord(){
return new u([this])}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}t.SimpleKeybinding=l;class u{constructor(e){if(0===e.length)throw i.illegalArgument("parts");this.parts=e}getHashCode(){let e="";for(let t=0,i=this.parts.length;t<i;t++)0!==t&&(e+=";"),e+=this.parts[t].getHashCode();return e}equals(e){if(null===e)return!1;if(this.parts.length!==e.parts.length)return!1;for(let t=0;t<this.parts.length;t++)if(!this.parts[t].equals(e.parts[t]))return!1;return!0}}t.ChordKeybinding=u;class d{constructor(e,t,i,n,r,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.keyLabel=r,this.keyAriaLabel=s}}t.ResolvedKeybindingPart=d;class h{}t.ResolvedKeybinding=h}),define(t[3],i([1,0,50]),function(e,t,i){"use strict";function n(e){if(o&&e&&e!==l.None)try{e[a]=!0}catch(e){}}function r(e){if(!o)return e;const t=new Error("Potentially leaked disposable").stack;return setTimeout(()=>{
e[a]||console.log(t)},3e3),e}function s(e){return Array.isArray(e)?(e.forEach(e=>{e&&(n(e),e.dispose())}),[]):e?(n(e),e.dispose(),e):void 0}Object.defineProperty(t,"__esModule",{value:!0});const o=!1,a="__is_disposable_tracked__";t.isDisposable=function(e){return"function"==typeof e.dispose&&0===e.dispose.length},t.dispose=s,t.combinedDisposable=function(...e){return e.forEach(n),r({dispose:()=>s(e)})},t.toDisposable=function(e){const t=r({dispose:()=>{n(t),e()}});return t};class c{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(n(this),this._isDisposed=!0,this.clear())}clear(){this._toDispose.forEach(e=>e.dispose()),this._toDispose.clear()}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return n(e),this._isDisposed?console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}t.DisposableStore=c;class l{
constructor(){this._store=new c,r(this)}dispose(){n(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}l.None=Object.freeze({dispose(){}}),t.Disposable=l;class u{constructor(){this._isDisposed=!1,r(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value&&this._value.dispose(),e&&n(e),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,n(this),this._value&&this._value.dispose(),this._value=void 0}}t.MutableDisposable=u;class d extends l{constructor(e){super(),this._hasBeenAcquired=!1,this._value=e}acquire(){if(this._hasBeenAcquired)throw new Error("This disposable has already been acquired");this._hasBeenAcquired=!0;const e=this._value;return this._value=void 0,e}dispose(){super.dispose(),this._hasBeenAcquired||(this._hasBeenAcquired=!0,this._value.dispose(),this._value=void 0)}}t.UnownedDisposable=d;class h{constructor(){
this.references=new Map}acquire(e){let t=this.references.get(e);t||(t={counter:0,object:this.createReferencedObject(e)},this.references.set(e,t));const{object:n}=t,r=i.once(()=>{0==--t.counter&&(this.destroyReferencedObject(e,t.object),this.references.delete(e))});return t.counter++,{object:n,dispose:r}}}t.ReferenceCollection=h;class f{constructor(e){this.object=e}dispose(){}}t.ImmortalReference=f}),define(t[100],i([1,0,77]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.element=e,this.next=n.Undefined,this.prev=n.Undefined}}n.Undefined=new n(void 0);class r{constructor(){this._first=n.Undefined,this._last=n.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===n.Undefined}clear(){this._first=n.Undefined,this._last=n.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new n(e);if(this._first===n.Undefined)this._first=i,this._last=i;else if(t){const e=this._last
;this._last=i,i.prev=e,e.next=i}else{const e=this._first;this._first=i,i.next=e,e.prev=i}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(i))}}shift(){if(this._first!==n.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==n.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==n.Undefined&&e.next!==n.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===n.Undefined&&e.next===n.Undefined?(this._first=n.Undefined,this._last=n.Undefined):e.next===n.Undefined?(this._last=this._last.prev,this._last.next=n.Undefined):e.prev===n.Undefined&&(this._first=this._first.next,this._first.prev=n.Undefined);this._size-=1}iterator(){let e,t=this._first;return{next:()=>t===n.Undefined?i.FIN:(e?e.value=t.element:e={done:!1,value:t.element},t=t.next,e)}}toArray(){const e=[];for(let t=this._first;t!==n.Undefined;t=t.next)e.push(t.element);return e}}t.LinkedList=r}),define(t[4],i([1,0,18,50,3,100]),function(e,t,i,r,s,o){
"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a;!function(e){function t(e){return(t,i=null,n)=>{let r,s=!1;return r=e(e=>{if(!s)return r?r.dispose():s=!0,t.call(i,e)},null,n),s&&r.dispose(),r}}function i(e,t){return a((i,n=null,r)=>e(e=>i.call(n,t(e)),null,r))}function n(e,t){return a((i,n=null,r)=>e(e=>{t(e),i.call(n,e)},null,r))}function r(e,t){return a((i,n=null,r)=>e(e=>t(e)&&i.call(n,e),null,r))}function o(e,t,n){let r=n;return i(e,e=>r=t(r,e))}function a(e){let t;const i=new u({onFirstListenerAdd(){t=e(i.fire,i)},onLastListenerRemove(){t.dispose()}});return i.event}function c(e){let t,i=!0;return r(e,e=>{const n=i||e!==t;return i=!1,t=e,n})}e.None=(()=>s.Disposable.None),e.once=t,e.map=i,e.forEach=n,e.filter=r,e.signal=function(e){return e},e.any=function(...e){return(t,i=null,n)=>s.combinedDisposable(...e.map(e=>e(e=>t.call(i,e),null,n)))},e.reduce=o,e.snapshot=a,e.debounce=function(e,t,i=100,n=!1,r){let s,o=void 0,a=void 0,c=0;const l=new u({leakWarningThreshold:r,
onFirstListenerAdd(){s=e(e=>{c++,o=t(o,e),n&&!a&&l.fire(o),clearTimeout(a),a=setTimeout(()=>{const e=o;o=void 0,a=void 0,(!n||c>1)&&l.fire(e),c=0},i)})},onLastListenerRemove(){s.dispose()}});return l.event},e.stopwatch=function(e){const n=(new Date).getTime();return i(t(e),e=>(new Date).getTime()-n)},e.latch=c,e.buffer=function(e,t=!1,i=[]){let n=i.slice(),r=e(e=>{n?n.push(e):o.fire(e)});const s=()=>{n&&n.forEach(e=>o.fire(e)),n=null},o=new u({onFirstListenerAdd(){r||(r=e(e=>o.fire(e)))},onFirstListenerDidAdd(){n&&(t?setTimeout(s):s())},onLastListenerRemove(){r&&r.dispose(),r=null}});return o.event};class l{constructor(e){this.event=e}map(e){return new l(i(this.event,e))}forEach(e){return new l(n(this.event,e))}filter(e){return new l(r(this.event,e))}reduce(e,t){return new l(o(this.event,e,t))}latch(){return new l(c(this.event))}on(e,t,i){return this.event(e,t,i)}once(e,i,n){return t(this.event)(e,i,n)}}e.chain=function(e){return new l(e)},e.fromNodeEventEmitter=function(e,t,i=(e=>e)){
const n=(...e)=>r.fire(i(...e)),r=new u({onFirstListenerAdd:()=>e.on(t,n),onLastListenerRemove:()=>e.removeListener(t,n)});return r.event},e.fromDOMEventEmitter=function(e,t,i=(e=>e)){const n=(...e)=>r.fire(i(...e)),r=new u({onFirstListenerAdd:()=>e.addEventListener(t,n),onLastListenerRemove:()=>e.removeEventListener(t,n)});return r.event},e.fromPromise=function(e){const t=new u;let i=!1;return e.then(void 0,()=>null).then(()=>{i?t.fire(void 0):setTimeout(()=>t.fire(void 0),0)}),i=!0,t.event},e.toPromise=function(e){return new Promise(i=>t(e)(i))}}(a=t.Event||(t.Event={}));let c=-1;t.setGlobalLeakWarningThreshold=function(e){const t=c;return c=e,{dispose(){c=t}}};class l{constructor(e,t=Math.random().toString(18).slice(2,5)){this.customThreshold=e,this.name=t,this._warnCountdown=0}dispose(){this._stacks&&this._stacks.clear()}check(e){let t=c;if("number"==typeof this.customThreshold&&(t=this.customThreshold),t<=0||e<t)return;this._stacks||(this._stacks=new Map)
;const i=(new Error).stack.split("\n").slice(3).join("\n"),n=this._stacks.get(i)||0;if(this._stacks.set(i,n+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=.5*t;let i,n=0;this._stacks.forEach((e,t)=>{(!i||n<e)&&(i=t,n=e)}),console.warn(`[${this.name}] potential listener LEAK detected, having ${e} listeners already. MOST frequent listener (${n}):`),console.warn(i)}return()=>{const e=this._stacks.get(i)||0;this._stacks.set(i,e-1)}}}class u{constructor(e){this._disposed=!1,this._options=e,this._leakageMon=c>0?new l(this._options&&this._options.leakWarningThreshold):void 0}get event(){return this._event||(this._event=((e,t,i)=>{this._listeners||(this._listeners=new o.LinkedList);const n=this._listeners.isEmpty();n&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const r=this._listeners.push(t?[e,t]:e);n&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),
this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);let a;this._leakageMon&&(a=this._leakageMon.check(this._listeners.size));let c;return c={dispose:()=>{if(a&&a(),c.dispose=u._noop,!this._disposed&&(r(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}}},i instanceof s.DisposableStore?i.add(c):Array.isArray(i)&&i.push(c),c})),this._event}fire(e){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new o.LinkedList);for(let t=this._listeners.iterator(),i=t.next();!i.done;i=t.next())this._deliveryQueue.push([i.value,e]);for(;this._deliveryQueue.size>0;){const[e,t]=this._deliveryQueue.shift();try{"function"==typeof e?e.call(void 0,t):e[0].call(e[1],t)}catch(e){i.onUnexpectedError(e)}}}}dispose(){this._listeners&&this._listeners.clear(),this._deliveryQueue&&this._deliveryQueue.clear(),this._leakageMon&&this._leakageMon.dispose(),this._disposed=!0}}u._noop=function(){},t.Emitter=u
;class d extends u{constructor(e){super(e),this._isPaused=0,this._eventQueue=new o.LinkedList,this._mergeFn=e&&e.merge}pause(){this._isPaused++}resume(){if(0!==this._isPaused&&0==--this._isPaused)if(this._mergeFn){const e=this._eventQueue.toArray();this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&0!==this._eventQueue.size;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(0!==this._isPaused?this._eventQueue.push(e):super.fire(e))}}t.PauseableEmitter=d;class h extends u{fireAsync(e){return n(this,void 0,void 0,function*(){if(this._listeners){this._asyncDeliveryQueue||(this._asyncDeliveryQueue=[]);for(let t=this._listeners.iterator(),i=t.next();!i.done;i=t.next()){const t=[];this._asyncDeliveryQueue.push([i.value,e(t,"function"==typeof i.value?i.value:i.value[0]),t])}for(;this._asyncDeliveryQueue.length>0;){const[e,t,n]=this._asyncDeliveryQueue.shift();try{"function"==typeof e?e.call(void 0,t):e[0].call(e[1],t)}catch(e){i.onUnexpectedError(e);continue}
Object.freeze(n),yield Promise.all(n)}}})}}t.AsyncEmitter=h;class f{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new u({onFirstListenerAdd:()=>this.onFirstListenerAdd(),onLastListenerRemove:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};this.events.push(t),this.hasListeners&&this.hook(t);return s.toDisposable(r.once(()=>{this.hasListeners&&this.unhook(t);const e=this.events.indexOf(t);this.events.splice(e,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(e=>this.emitter.fire(e))}unhook(e){e.listener&&e.listener.dispose(),e.listener=null}dispose(){this.emitter.dispose()}}t.EventMultiplexer=f;class p{constructor(){this.buffers=[]}wrapEvent(e){return(t,i,n)=>e(e=>{const n=this.buffers[this.buffers.length-1];n?n.push(()=>t.call(i,e)):t.call(i,e)},void 0,n)}bufferEvents(e){const t=[]
;this.buffers.push(t);const i=e();return this.buffers.pop(),t.forEach(e=>e()),i}}t.EventBufferer=p;class g{constructor(){this.listening=!1,this.inputEvent=a.None,this.inputEventListener=s.Disposable.None,this.emitter=new u({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}t.Relay=g}),define(t[34],i([1,0,4]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=Object.freeze(function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}});var r;!function(e){e.isCancellationToken=function(t){
return t===e.None||t===e.Cancelled||t instanceof s||!(!t||"object"!=typeof t)&&"boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n})}(r=t.CancellationToken||(t.CancellationToken={}));class s{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?n:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class o{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new s),this._token}cancel(){
this._token?this._token instanceof s&&this._token.cancel():this._token=r.Cancelled}dispose(){this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof s&&this._token.dispose():this._token=r.None}}t.CancellationTokenSource=o}),define(t[9],i([1,0,34,18,4,3]),function(e,t,i,r,s,o){"use strict";function a(e){return e&&"function"==typeof e.then}function c(e){const t=new i.CancellationTokenSource,n=e(t.token),s=new Promise((e,i)=>{t.token.onCancellationRequested(()=>{i(r.canceled())}),Promise.resolve(n).then(i=>{t.dispose(),e(i)},e=>{t.dispose(),i(e)})});return new class{cancel(){t.cancel()}then(e,t){return s.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return s.finally(e)}}}function l(e,t){return t?new Promise((i,n)=>{const s=setTimeout(i,e);t.onCancellationRequested(()=>{clearTimeout(s),n(r.canceled())})}):c(t=>l(e,t))}function u(e){function t(s){void 0!==s&&null!==s&&i.push(s);const o=n<r?e[n++]():null;return o?o.then(t):Promise.resolve(i)}const i=[];let n=0
;const r=e.length;return Promise.resolve(null).then(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.isThenable=a,t.createCancelablePromise=c,t.raceCancellation=function(e,t,i){return Promise.race([e,new Promise(e=>t.onCancellationRequested(()=>e(i)))])},t.asPromise=function(e){return new Promise((t,i)=>{const n=e();a(n)?n.then(t,i):t(n)})};class d{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const e=()=>{this.queuedPromise=null;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise(t=>{this.activePromise.then(e,e).then(t)})}return new Promise((e,t)=>{this.queuedPromise.then(e,t)})}return this.activePromise=e(),new Promise((e,t)=>{this.activePromise.then(t=>{this.activePromise=null,e(t)},e=>{this.activePromise=null,t(e)})})}}t.Throttler=d;class h{constructor(){this.current=Promise.resolve(null)}queue(e){
return this.current=this.current.then(()=>e())}}t.Sequencer=h;class f{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e,t)=>{this.doResolve=e,this.doReject=t}).then(()=>{this.completionPromise=null,this.doResolve=null;const e=this.task;return this.task=null,e()})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve(null)},t),this.completionPromise}isTriggered(){return null!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject(r.canceled()),this.completionPromise=null)}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancelTimeout()}}t.Delayer=f;class p{constructor(e){this.delayer=new f(e),this.throttler=new d}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){
return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}t.ThrottledDelayer=p;class g{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}t.Barrier=g,t.timeout=l,t.disposableTimeout=function(e,t=0){const i=setTimeout(e,t);return o.toDisposable(()=>clearTimeout(i))},t.ignoreErrors=function(e){return e.then(void 0,e=>void 0)},t.sequence=u,t.first=function(e,t=(e=>!!e),i=null){let n=0;const r=e.length,s=()=>{if(n>=r)return Promise.resolve(i);const o=e[n++];return Promise.resolve(o()).then(e=>t(e)?Promise.resolve(e):s())};return s()};class m{constructor(e){this._size=0,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new s.Emitter}get onFinished(){return this._onFinished.event}get size(){return this._size}queue(e){return this._size++,new Promise((t,i)=>{
this.outstandingPromises.push({factory:e,c:t,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()}dispose(){this._onFinished.dispose()}}t.Limiter=m;class v extends m{constructor(){super(1)}}t.Queue=v;class w{constructor(){this.queues=new Map}queueFor(e){const t=e.toString();if(!this.queues.has(t)){const e=new v;e.onFinished(()=>{e.dispose(),this.queues.delete(t)}),this.queues.set(t,e)}return this.queues.get(t)}}t.ResourceQueue=w;class y{constructor(e,t){this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),
this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}t.TimeoutTimer=y;class S{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}t.IntervalTimer=S;class b{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}isScheduled(){return-1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}t.RunOnceScheduler=b;class _ extends b{constructor(e,t){super(e,t),this.units=[]}work(e){this.units.push(e),this.isScheduled()||this.schedule()}doRun(){const e=this.units
;this.units=[],this.runner&&this.runner(e)}dispose(){this.units=[],super.dispose()}}t.RunOnceWorker=_,function(){if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){const e=Object.freeze({didTimeout:!0,timeRemaining:()=>15});t.runWhenIdle=(t=>{const i=setTimeout(()=>t(e));let n=!1;return{dispose(){n||(n=!0,clearTimeout(i))}}})}else t.runWhenIdle=((e,t)=>{const i=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(i))}}})}();class E{constructor(e){this._didRun=!1,this._executor=(()=>{try{this._value=e()}catch(e){this._error=e}finally{this._didRun=!0}}),this._handle=t.runWhenIdle(()=>this._executor())}dispose(){this._handle.dispose()}getValue(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}t.IdleValue=E,t.retry=function(e,t,i){return n(this,void 0,void 0,function*(){let n;for(let r=0;r<i;r++)try{return yield e()}catch(e){n=e,yield l(t)}
return Promise.reject(n)})}});let r;r="object"==typeof global?global:"object"==typeof self?self:{},"function"==typeof define?define("vs/base/common/performance",[],function(){return e(r)}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=e(r)),define(t[2],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=!1,n=!1,r=!1,s=!1,o=!1,a=void 0,c="en",l=void 0,u=void 0;const d="undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.electron&&"renderer"===process.type;if("object"!=typeof navigator||d){if("object"==typeof process){i="win32"===process.platform,n="darwin"===process.platform,r="linux"===process.platform,a="en",c="en";const e=process.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),i=t.availableLanguages["*"];a=t.locale,c=i||"en",l=t._translationsConfigFile}catch(e){}s=!0}}else u=navigator.userAgent,i=u.indexOf("Windows")>=0,n=u.indexOf("Macintosh")>=0,r=u.indexOf("Linux")>=0,o=!0,c=a=navigator.language
;!function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(t.Platform||(t.Platform={})),t.PlatformToString=function(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}};let h=0;n?h=1:i?h=3:r&&(h=2),t.isWindows=i,t.isMacintosh=n,t.isLinux=r,t.isNative=s,t.isWeb=o,t.platform=h,t.userAgent=u,t.isRootUser=function(){return s&&!i&&0===process.getuid()},t.language=c;!function(e){e.value=function(){return t.language},e.isDefaultVariant=function(){return 2===t.language.length?"en"===t.language:t.language.length>=3&&"e"===t.language[0]&&"n"===t.language[1]&&"-"===t.language[2]},e.isDefault=function(){return"en"===t.language}}(t.Language||(t.Language={})),t.locale=a,t.translationsConfigFile=l;const f="object"==typeof self?self:"object"==typeof global?global:{};t.globals=f;let p=null;t.setImmediate=function(e){
return null===p&&(p=t.globals.setImmediate?t.globals.setImmediate.bind(t.globals):"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick.bind(process):t.globals.setTimeout.bind(t.globals)),p(e)};!function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"}(t.OperatingSystem||(t.OperatingSystem={})),t.OS=n?2:i?1:3}),define(t[73],i([1,0,2]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof process?{cwd:()=>"/",env:Object.create(null),get platform(){return i.isWindows?"win32":i.isMacintosh?"darwin":"linux"},nextTick:e=>i.setImmediate(e)}:process;t.cwd=n.cwd,t.env=n.env,t.platform=n.platform,t.nextTick=n.nextTick}),define(t[6],i([1,0,73]),function(e,t,i){"use strict";function n(e,t){if("string"!=typeof e)throw new m(t,"string",e)}function r(e){return e===p||e===g}function s(e){return e===p}function o(e){return e>=l&&e<=d||e>=u&&e<=h}function a(e,t,i,n){let r,s="",o=0,a=-1,c=0;for(let l=0;l<=e.length;++l){
if(l<e.length)r=e.charCodeAt(l);else{if(n(r))break;r=p}if(n(r)){if(a===l-1||1===c);else if(a!==l-1&&2===c){if(s.length<2||2!==o||s.charCodeAt(s.length-1)!==f||s.charCodeAt(s.length-2)!==f){if(s.length>2){const e=s.lastIndexOf(i);-1===e?(s="",o=0):o=(s=s.slice(0,e)).length-1-s.lastIndexOf(i),a=l,c=0;continue}if(2===s.length||1===s.length){s="",o=0,a=l,c=0;continue}}t&&(s.length>0?s+=`${i}..`:s="..",o=2)}else s.length>0?s+=i+e.slice(a+1,l):s=e.slice(a+1,l),o=l-a-1;a=l,c=0}else r===f&&-1!==c?++c:c=-1}return s}function c(e,t){const i=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return i?i===t.root?i+n:i+e+n:n}Object.defineProperty(t,"__esModule",{value:!0});const l=65,u=97,d=90,h=122,f=46,p=47,g=92;class m extends Error{constructor(e,t,i){let n;"string"==typeof t&&0===t.indexOf("not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";let r=`The "${e}" ${-1!==e.indexOf(".")?"property":"argument"} ${n} of type ${t}`;super(r+=`. Received type ${typeof i}`),this.code="ERR_INVALID_ARG_TYPE"}}t.win32={
resolve(...e){let t="",s="",c=!1;for(let a=e.length-1;a>=-1;a--){let l;if(a>=0?l=e[a]:t?void 0!==(l=i.env["="+t]||i.cwd())&&l.slice(0,3).toLowerCase()===t.toLowerCase()+"\\"||(l=t+"\\"):l=i.cwd(),n(l,"path"),0===l.length)continue;const u=l.length;let d=0,h="",f=!1;const p=l.charCodeAt(0);if(u>1)if(r(p))if(f=!0,r(l.charCodeAt(1))){let e=2,t=e;for(;e<u&&!r(l.charCodeAt(e));++e);if(e<u&&e!==t){const i=l.slice(t,e);for(t=e;e<u&&r(l.charCodeAt(e));++e);if(e<u&&e!==t){for(t=e;e<u&&!r(l.charCodeAt(e));++e);e===u?(h="\\\\"+i+"\\"+l.slice(t),d=e):e!==t&&(h="\\\\"+i+"\\"+l.slice(t,e),d=e)}}}else d=1;else o(p)&&58===l.charCodeAt(1)&&(h=l.slice(0,2),d=2,u>2&&r(l.charCodeAt(2))&&(f=!0,d=3));else r(p)&&(d=1,f=!0);if(!(h.length>0&&t.length>0&&h.toLowerCase()!==t.toLowerCase())&&(0===t.length&&h.length>0&&(t=h),c||(s=l.slice(d)+"\\"+s,c=f),t.length>0&&c))break}return s=a(s,!c,"\\",r),t+(c?"\\":"")+s||"."},normalize(e){n(e,"path");const t=e.length;if(0===t)return".";let i,s=0,c=!1;const l=e.charCodeAt(0)
;if(t>1)if(r(l))if(c=!0,r(e.charCodeAt(1))){let n=2,o=n;for(;n<t&&!r(e.charCodeAt(n));++n);if(n<t&&n!==o){const a=e.slice(o,n);for(o=n;n<t&&r(e.charCodeAt(n));++n);if(n<t&&n!==o){for(o=n;n<t&&!r(e.charCodeAt(n));++n);if(n===t)return"\\\\"+a+"\\"+e.slice(o)+"\\";n!==o&&(i="\\\\"+a+"\\"+e.slice(o,n),s=n)}}}else s=1;else o(l)&&58===e.charCodeAt(1)&&(i=e.slice(0,2),s=2,t>2&&r(e.charCodeAt(2))&&(c=!0,s=3));else if(r(l))return"\\";let u;return 0!==(u=s<t?a(e.slice(s),!c,"\\",r):"").length||c||(u="."),u.length>0&&r(e.charCodeAt(t-1))&&(u+="\\"),void 0===i?c?u.length>0?"\\"+u:"\\":u.length>0?u:"":c?u.length>0?i+"\\"+u:i+"\\":u.length>0?i+u:i},isAbsolute(e){n(e,"path");const t=e.length;if(0===t)return!1;const i=e.charCodeAt(0);return!!r(i)||!!(o(i)&&t>2&&58===e.charCodeAt(1)&&r(e.charCodeAt(2)))},join(...e){if(0===e.length)return".";let i,s;for(let t=0;t<e.length;++t){const r=e[t];n(r,"path"),r.length>0&&(void 0===i?i=s=r:i+="\\"+r)}if(void 0===i)return".";let o=!0,a=0;if("string"==typeof s&&r(s.charCodeAt(0))){++a
;const e=s.length;e>1&&r(s.charCodeAt(1))&&(++a,e>2&&(r(s.charCodeAt(2))?++a:o=!1))}if(o){for(;a<i.length&&r(i.charCodeAt(a));++a);a>=2&&(i="\\"+i.slice(a))}return t.win32.normalize(i)},relative(e,i){if(n(e,"from"),n(i,"to"),e===i)return"";const r=t.win32.resolve(e),s=t.win32.resolve(i);if(r===s)return"";if(e=r.toLowerCase(),i=s.toLowerCase(),e===i)return"";let o=0;for(;o<e.length&&e.charCodeAt(o)===g;++o);let a=e.length;for(;a-1>o&&e.charCodeAt(a-1)===g;--a);const c=a-o;let l=0;for(;l<i.length&&i.charCodeAt(l)===g;++l);let u=i.length;for(;u-1>l&&i.charCodeAt(u-1)===g;--u);const d=u-l,h=c<d?c:d;let f=-1,p=0;for(;p<=h;++p){if(p===h){if(d>h){if(i.charCodeAt(l+p)===g)return s.slice(l+p+1);if(2===p)return s.slice(l+p)}c>h&&(e.charCodeAt(o+p)===g?f=p:2===p&&(f=3));break}const t=e.charCodeAt(o+p);if(t!==i.charCodeAt(l+p))break;t===g&&(f=p)}if(p!==h&&-1===f)return s;let m="";for(-1===f&&(f=0),p=o+f+1;p<=a;++p)p!==a&&e.charCodeAt(p)!==g||(0===m.length?m+="..":m+="\\..");return m.length>0?m+s.slice(l+f,u):(l+=f,
s.charCodeAt(l)===g&&++l,s.slice(l,u))},toNamespacedPath(e){if("string"!=typeof e)return e;if(0===e.length)return"";const i=t.win32.resolve(e);if(i.length>=3)if(i.charCodeAt(0)===g){if(i.charCodeAt(1)===g){const e=i.charCodeAt(2);if(63!==e&&e!==f)return"\\\\?\\UNC\\"+i.slice(2)}}else if(o(i.charCodeAt(0))&&58===i.charCodeAt(1)&&i.charCodeAt(2)===g)return"\\\\?\\"+i;return e},dirname(e){n(e,"path");const t=e.length;if(0===t)return".";let i=-1,s=-1,a=!0,c=0;const l=e.charCodeAt(0);if(t>1)if(r(l)){if(i=c=1,r(e.charCodeAt(1))){let n=2,s=n;for(;n<t&&!r(e.charCodeAt(n));++n);if(n<t&&n!==s){for(s=n;n<t&&r(e.charCodeAt(n));++n);if(n<t&&n!==s){for(s=n;n<t&&!r(e.charCodeAt(n));++n);if(n===t)return e;n!==s&&(i=c=n+1)}}}}else o(l)&&58===e.charCodeAt(1)&&(i=c=2,t>2&&r(e.charCodeAt(2))&&(i=c=3));else if(r(l))return e;for(let i=t-1;i>=c;--i)if(r(e.charCodeAt(i))){if(!a){s=i;break}}else a=!1;if(-1===s){if(-1===i)return".";s=i}return e.slice(0,s)},basename(e,t){void 0!==t&&n(t,"ext"),n(e,"path");let i,s=0,a=-1,c=!0
;if(e.length>=2){o(e.charCodeAt(0))&&58===e.charCodeAt(1)&&(s=2)}if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let n=t.length-1,o=-1;for(i=e.length-1;i>=s;--i){const l=e.charCodeAt(i);if(r(l)){if(!c){s=i+1;break}}else-1===o&&(c=!1,o=i+1),n>=0&&(l===t.charCodeAt(n)?-1==--n&&(a=i):(n=-1,a=o))}return s===a?a=o:-1===a&&(a=e.length),e.slice(s,a)}for(i=e.length-1;i>=s;--i)if(r(e.charCodeAt(i))){if(!c){s=i+1;break}}else-1===a&&(c=!1,a=i+1);return-1===a?"":e.slice(s,a)},extname(e){n(e,"path");let t=0,i=-1,s=0,a=-1,c=!0,l=0;e.length>=2&&58===e.charCodeAt(1)&&o(e.charCodeAt(0))&&(t=s=2);for(let n=e.length-1;n>=t;--n){const t=e.charCodeAt(n);if(r(t)){if(!c){s=n+1;break}}else-1===a&&(c=!1,a=n+1),t===f?-1===i?i=n:1!==l&&(l=1):-1!==i&&(l=-1)}return-1===i||-1===a||0===l||1===l&&i===a-1&&i===s+1?"":e.slice(i,a)},format(e){if(null===e||"object"!=typeof e)throw new m("pathObject","Object",e);return c("\\",e)},parse(e){n(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""}
;if(0===e.length)return t;const i=e.length;let s=0,a=e.charCodeAt(0);if(i>1){if(r(a)){if(s=1,r(e.charCodeAt(1))){let t=2,n=t;for(;t<i&&!r(e.charCodeAt(t));++t);if(t<i&&t!==n){for(n=t;t<i&&r(e.charCodeAt(t));++t);if(t<i&&t!==n){for(n=t;t<i&&!r(e.charCodeAt(t));++t);t===i?s=t:t!==n&&(s=t+1)}}}}else if(o(a)&&58===e.charCodeAt(1)){if(s=2,!(i>2))return t.root=t.dir=e,t;if(r(e.charCodeAt(2))){if(3===i)return t.root=t.dir=e,t;s=3}}}else if(r(a))return t.root=t.dir=e,t;s>0&&(t.root=e.slice(0,s));let c=-1,l=s,u=-1,d=!0,h=e.length-1,p=0;for(;h>=s;--h)if(a=e.charCodeAt(h),r(a)){if(!d){l=h+1;break}}else-1===u&&(d=!1,u=h+1),a===f?-1===c?c=h:1!==p&&(p=1):-1!==c&&(p=-1);return-1===c||-1===u||0===p||1===p&&c===u-1&&c===l+1?-1!==u&&(t.base=t.name=e.slice(l,u)):(t.name=e.slice(l,c),t.base=e.slice(l,u),t.ext=e.slice(c,u)),t.dir=l>0&&l!==s?e.slice(0,l-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},t.posix={resolve(...e){let t="",r=!1;for(let s=e.length-1;s>=-1&&!r;s--){let o;n(o=s>=0?e[s]:i.cwd(),"path"),
0!==o.length&&(t=o+"/"+t,r=o.charCodeAt(0)===p)}return t=a(t,!r,"/",s),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize(e){if(n(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===p,i=e.charCodeAt(e.length-1)===p;return 0!==(e=a(e,!t,"/",s)).length||t||(e="."),e.length>0&&i&&(e+="/"),t?"/"+e:e},isAbsolute:e=>(n(e,"path"),e.length>0&&e.charCodeAt(0)===p),join(...e){if(0===e.length)return".";let i;for(let t=0;t<e.length;++t){const e=arguments[t];n(e,"path"),e.length>0&&(void 0===i?i=e:i+="/"+e)}return void 0===i?".":t.posix.normalize(i)},relative(e,i){if(n(e,"from"),n(i,"to"),e===i)return"";if(e=t.posix.resolve(e),i=t.posix.resolve(i),e===i)return"";let r=1;for(;r<e.length&&e.charCodeAt(r)===p;++r);const s=e.length,o=s-r;let a=1;for(;a<i.length&&i.charCodeAt(a)===p;++a);const c=i.length-a,l=o<c?o:c;let u=-1,d=0;for(;d<=l;++d){if(d===l){if(c>l){if(i.charCodeAt(a+d)===p)return i.slice(a+d+1);if(0===d)return i.slice(a+d)}else o>l&&(e.charCodeAt(r+d)===p?u=d:0===d&&(u=0));break}const t=e.charCodeAt(r+d)
;if(t!==i.charCodeAt(a+d))break;t===p&&(u=d)}let h="";for(d=r+u+1;d<=s;++d)d!==s&&e.charCodeAt(d)!==p||(0===h.length?h+="..":h+="/..");return h.length>0?h+i.slice(a+u):(a+=u,i.charCodeAt(a)===p&&++a,i.slice(a))},toNamespacedPath:e=>e,dirname(e){if(n(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===p;let i=-1,r=!0;for(let t=e.length-1;t>=1;--t)if(e.charCodeAt(t)===p){if(!r){i=t;break}}else r=!1;return-1===i?t?"/":".":t&&1===i?"//":e.slice(0,i)},basename(e,t){void 0!==t&&n(t,"ext"),n(e,"path");let i,r=0,s=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let n=t.length-1,a=-1;for(i=e.length-1;i>=0;--i){const c=e.charCodeAt(i);if(c===p){if(!o){r=i+1;break}}else-1===a&&(o=!1,a=i+1),n>=0&&(c===t.charCodeAt(n)?-1==--n&&(s=i):(n=-1,s=a))}return r===s?s=a:-1===s&&(s=e.length),e.slice(r,s)}for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===p){if(!o){r=i+1;break}}else-1===s&&(o=!1,s=i+1);return-1===s?"":e.slice(r,s)},extname(e){n(e,"path");let t=-1,i=0,r=-1,s=!0,o=0
;for(let n=e.length-1;n>=0;--n){const a=e.charCodeAt(n);if(a!==p)-1===r&&(s=!1,r=n+1),a===f?-1===t?t=n:1!==o&&(o=1):-1!==t&&(o=-1);else if(!s){i=n+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===i+1?"":e.slice(t,r)},format(e){if(null===e||"object"!=typeof e)throw new m("pathObject","Object",e);return c("/",e)},parse(e){n(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const i=e.charCodeAt(0)===p;let r;i?(t.root="/",r=1):r=0;let s=-1,o=0,a=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){const t=e.charCodeAt(l);if(t!==p)-1===a&&(c=!1,a=l+1),t===f?-1===s?s=l:1!==u&&(u=1):-1!==s&&(u=-1);else if(!c){o=l+1;break}}return-1===s||-1===a||0===u||1===u&&s===a-1&&s===o+1?-1!==a&&(t.base=t.name=0===o&&i?e.slice(1,a):e.slice(o,a)):(0===o&&i?(t.name=e.slice(1,s),t.base=e.slice(1,a)):(t.name=e.slice(o,s),t.base=e.slice(o,a)),t.ext=e.slice(s,a)),o>0?t.dir=e.slice(0,o-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null},t.posix.win32=t.win32.win32=t.win32,
t.posix.posix=t.win32.posix=t.posix,t.normalize="win32"===i.platform?t.win32.normalize:t.posix.normalize,t.isAbsolute="win32"===i.platform?t.win32.isAbsolute:t.posix.isAbsolute,t.join="win32"===i.platform?t.win32.join:t.posix.join,t.resolve="win32"===i.platform?t.win32.resolve:t.posix.resolve,t.relative="win32"===i.platform?t.win32.relative:t.posix.relative,t.dirname="win32"===i.platform?t.win32.dirname:t.posix.dirname,t.basename="win32"===i.platform?t.win32.basename:t.posix.basename,t.extname="win32"===i.platform?t.win32.extname:t.posix.extname,t.format="win32"===i.platform?t.win32.format:t.posix.format,t.parse="win32"===i.platform?t.win32.parse:t.posix.parse,t.toNamespacedPath="win32"===i.platform?t.win32.toNamespacedPath:t.posix.toNamespacedPath,t.sep="win32"===i.platform?t.win32.sep:t.posix.sep,t.delimiter="win32"===i.platform?t.win32.delimiter:t.posix.delimiter}),define(t[66],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.None=0]="None",
e[e.Hyper=1]="Hyper",e[e.Super=2]="Super",e[e.Fn=3]="Fn",e[e.FnLock=4]="FnLock",e[e.Suspend=5]="Suspend",e[e.Resume=6]="Resume",e[e.Turbo=7]="Turbo",e[e.Sleep=8]="Sleep",e[e.WakeUp=9]="WakeUp",e[e.KeyA=10]="KeyA",e[e.KeyB=11]="KeyB",e[e.KeyC=12]="KeyC",e[e.KeyD=13]="KeyD",e[e.KeyE=14]="KeyE",e[e.KeyF=15]="KeyF",e[e.KeyG=16]="KeyG",e[e.KeyH=17]="KeyH",e[e.KeyI=18]="KeyI",e[e.KeyJ=19]="KeyJ",e[e.KeyK=20]="KeyK",e[e.KeyL=21]="KeyL",e[e.KeyM=22]="KeyM",e[e.KeyN=23]="KeyN",e[e.KeyO=24]="KeyO",e[e.KeyP=25]="KeyP",e[e.KeyQ=26]="KeyQ",e[e.KeyR=27]="KeyR",e[e.KeyS=28]="KeyS",e[e.KeyT=29]="KeyT",e[e.KeyU=30]="KeyU",e[e.KeyV=31]="KeyV",e[e.KeyW=32]="KeyW",e[e.KeyX=33]="KeyX",e[e.KeyY=34]="KeyY",e[e.KeyZ=35]="KeyZ",e[e.Digit1=36]="Digit1",e[e.Digit2=37]="Digit2",e[e.Digit3=38]="Digit3",e[e.Digit4=39]="Digit4",e[e.Digit5=40]="Digit5",e[e.Digit6=41]="Digit6",e[e.Digit7=42]="Digit7",e[e.Digit8=43]="Digit8",e[e.Digit9=44]="Digit9",e[e.Digit0=45]="Digit0",e[e.Enter=46]="Enter",e[e.Escape=47]="Escape",
e[e.Backspace=48]="Backspace",e[e.Tab=49]="Tab",e[e.Space=50]="Space",e[e.Minus=51]="Minus",e[e.Equal=52]="Equal",e[e.BracketLeft=53]="BracketLeft",e[e.BracketRight=54]="BracketRight",e[e.Backslash=55]="Backslash",e[e.IntlHash=56]="IntlHash",e[e.Semicolon=57]="Semicolon",e[e.Quote=58]="Quote",e[e.Backquote=59]="Backquote",e[e.Comma=60]="Comma",e[e.Period=61]="Period",e[e.Slash=62]="Slash",e[e.CapsLock=63]="CapsLock",e[e.F1=64]="F1",e[e.F2=65]="F2",e[e.F3=66]="F3",e[e.F4=67]="F4",e[e.F5=68]="F5",e[e.F6=69]="F6",e[e.F7=70]="F7",e[e.F8=71]="F8",e[e.F9=72]="F9",e[e.F10=73]="F10",e[e.F11=74]="F11",e[e.F12=75]="F12",e[e.PrintScreen=76]="PrintScreen",e[e.ScrollLock=77]="ScrollLock",e[e.Pause=78]="Pause",e[e.Insert=79]="Insert",e[e.Home=80]="Home",e[e.PageUp=81]="PageUp",e[e.Delete=82]="Delete",e[e.End=83]="End",e[e.PageDown=84]="PageDown",e[e.ArrowRight=85]="ArrowRight",e[e.ArrowLeft=86]="ArrowLeft",e[e.ArrowDown=87]="ArrowDown",e[e.ArrowUp=88]="ArrowUp",e[e.NumLock=89]="NumLock",e[e.NumpadDivide=90]="NumpadDivide",
e[e.NumpadMultiply=91]="NumpadMultiply",e[e.NumpadSubtract=92]="NumpadSubtract",e[e.NumpadAdd=93]="NumpadAdd",e[e.NumpadEnter=94]="NumpadEnter",e[e.Numpad1=95]="Numpad1",e[e.Numpad2=96]="Numpad2",e[e.Numpad3=97]="Numpad3",e[e.Numpad4=98]="Numpad4",e[e.Numpad5=99]="Numpad5",e[e.Numpad6=100]="Numpad6",e[e.Numpad7=101]="Numpad7",e[e.Numpad8=102]="Numpad8",e[e.Numpad9=103]="Numpad9",e[e.Numpad0=104]="Numpad0",e[e.NumpadDecimal=105]="NumpadDecimal",e[e.IntlBackslash=106]="IntlBackslash",e[e.ContextMenu=107]="ContextMenu",e[e.Power=108]="Power",e[e.NumpadEqual=109]="NumpadEqual",e[e.F13=110]="F13",e[e.F14=111]="F14",e[e.F15=112]="F15",e[e.F16=113]="F16",e[e.F17=114]="F17",e[e.F18=115]="F18",e[e.F19=116]="F19",e[e.F20=117]="F20",e[e.F21=118]="F21",e[e.F22=119]="F22",e[e.F23=120]="F23",e[e.F24=121]="F24",e[e.Open=122]="Open",e[e.Help=123]="Help",e[e.Select=124]="Select",e[e.Again=125]="Again",e[e.Undo=126]="Undo",e[e.Cut=127]="Cut",e[e.Copy=128]="Copy",e[e.Paste=129]="Paste",e[e.Find=130]="Find",
e[e.AudioVolumeMute=131]="AudioVolumeMute",e[e.AudioVolumeUp=132]="AudioVolumeUp",e[e.AudioVolumeDown=133]="AudioVolumeDown",e[e.NumpadComma=134]="NumpadComma",e[e.IntlRo=135]="IntlRo",e[e.KanaMode=136]="KanaMode",e[e.IntlYen=137]="IntlYen",e[e.Convert=138]="Convert",e[e.NonConvert=139]="NonConvert",e[e.Lang1=140]="Lang1",e[e.Lang2=141]="Lang2",e[e.Lang3=142]="Lang3",e[e.Lang4=143]="Lang4",e[e.Lang5=144]="Lang5",e[e.Abort=145]="Abort",e[e.Props=146]="Props",e[e.NumpadParenLeft=147]="NumpadParenLeft",e[e.NumpadParenRight=148]="NumpadParenRight",e[e.NumpadBackspace=149]="NumpadBackspace",e[e.NumpadMemoryStore=150]="NumpadMemoryStore",e[e.NumpadMemoryRecall=151]="NumpadMemoryRecall",e[e.NumpadMemoryClear=152]="NumpadMemoryClear",e[e.NumpadMemoryAdd=153]="NumpadMemoryAdd",e[e.NumpadMemorySubtract=154]="NumpadMemorySubtract",e[e.NumpadClear=155]="NumpadClear",e[e.NumpadClearEntry=156]="NumpadClearEntry",e[e.ControlLeft=157]="ControlLeft",e[e.ShiftLeft=158]="ShiftLeft",e[e.AltLeft=159]="AltLeft",
e[e.MetaLeft=160]="MetaLeft",e[e.ControlRight=161]="ControlRight",e[e.ShiftRight=162]="ShiftRight",e[e.AltRight=163]="AltRight",e[e.MetaRight=164]="MetaRight",e[e.BrightnessUp=165]="BrightnessUp",e[e.BrightnessDown=166]="BrightnessDown",e[e.MediaPlay=167]="MediaPlay",e[e.MediaRecord=168]="MediaRecord",e[e.MediaFastForward=169]="MediaFastForward",e[e.MediaRewind=170]="MediaRewind",e[e.MediaTrackNext=171]="MediaTrackNext",e[e.MediaTrackPrevious=172]="MediaTrackPrevious",e[e.MediaStop=173]="MediaStop",e[e.Eject=174]="Eject",e[e.MediaPlayPause=175]="MediaPlayPause",e[e.MediaSelect=176]="MediaSelect",e[e.LaunchMail=177]="LaunchMail",e[e.LaunchApp2=178]="LaunchApp2",e[e.LaunchApp1=179]="LaunchApp1",e[e.SelectTask=180]="SelectTask",e[e.LaunchScreenSaver=181]="LaunchScreenSaver",e[e.BrowserSearch=182]="BrowserSearch",e[e.BrowserHome=183]="BrowserHome",e[e.BrowserBack=184]="BrowserBack",e[e.BrowserForward=185]="BrowserForward",e[e.BrowserStop=186]="BrowserStop",e[e.BrowserRefresh=187]="BrowserRefresh",
e[e.BrowserFavorites=188]="BrowserFavorites",e[e.ZoomToggle=189]="ZoomToggle",e[e.MailReply=190]="MailReply",e[e.MailForward=191]="MailForward",e[e.MailSend=192]="MailSend",e[e.MAX_VALUE=193]="MAX_VALUE"}(t.ScanCode||(t.ScanCode={}));const i=[],n=Object.create(null),r=Object.create(null);t.ScanCodeUtils={lowerCaseToEnum:e=>r[e]||0,toEnum:e=>n[e]||0,toString:e=>i[e]||"None"},t.IMMUTABLE_CODE_TO_KEY_CODE=[],t.IMMUTABLE_KEY_CODE_TO_CODE=[];class s{constructor(e,t,i,n,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=i,this.metaKey=n,this.scanCode=r}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.scanCode===e.scanCode}isDuplicateModifierCase(){return this.ctrlKey&&(157===this.scanCode||161===this.scanCode)||this.shiftKey&&(158===this.scanCode||162===this.scanCode)||this.altKey&&(159===this.scanCode||163===this.scanCode)||this.metaKey&&(160===this.scanCode||164===this.scanCode)}}t.ScanCodeBinding=s,function(){function e(e,t){i[e]=t,n[t]=e,
r[t.toLowerCase()]=e}e(0,"None"),e(1,"Hyper"),e(2,"Super"),e(3,"Fn"),e(4,"FnLock"),e(5,"Suspend"),e(6,"Resume"),e(7,"Turbo"),e(8,"Sleep"),e(9,"WakeUp"),e(10,"KeyA"),e(11,"KeyB"),e(12,"KeyC"),e(13,"KeyD"),e(14,"KeyE"),e(15,"KeyF"),e(16,"KeyG"),e(17,"KeyH"),e(18,"KeyI"),e(19,"KeyJ"),e(20,"KeyK"),e(21,"KeyL"),e(22,"KeyM"),e(23,"KeyN"),e(24,"KeyO"),e(25,"KeyP"),e(26,"KeyQ"),e(27,"KeyR"),e(28,"KeyS"),e(29,"KeyT"),e(30,"KeyU"),e(31,"KeyV"),e(32,"KeyW"),e(33,"KeyX"),e(34,"KeyY"),e(35,"KeyZ"),e(36,"Digit1"),e(37,"Digit2"),e(38,"Digit3"),e(39,"Digit4"),e(40,"Digit5"),e(41,"Digit6"),e(42,"Digit7"),e(43,"Digit8"),e(44,"Digit9"),e(45,"Digit0"),e(46,"Enter"),e(47,"Escape"),e(48,"Backspace"),e(49,"Tab"),e(50,"Space"),e(51,"Minus"),e(52,"Equal"),e(53,"BracketLeft"),e(54,"BracketRight"),e(55,"Backslash"),e(56,"IntlHash"),e(57,"Semicolon"),e(58,"Quote"),e(59,"Backquote"),e(60,"Comma"),e(61,"Period"),e(62,"Slash"),e(63,"CapsLock"),e(64,"F1"),e(65,"F2"),e(66,"F3"),e(67,"F4"),e(68,"F5"),e(69,"F6"),e(70,"F7"),e(71,"F8"),
e(72,"F9"),e(73,"F10"),e(74,"F11"),e(75,"F12"),e(76,"PrintScreen"),e(77,"ScrollLock"),e(78,"Pause"),e(79,"Insert"),e(80,"Home"),e(81,"PageUp"),e(82,"Delete"),e(83,"End"),e(84,"PageDown"),e(85,"ArrowRight"),e(86,"ArrowLeft"),e(87,"ArrowDown"),e(88,"ArrowUp"),e(89,"NumLock"),e(90,"NumpadDivide"),e(91,"NumpadMultiply"),e(92,"NumpadSubtract"),e(93,"NumpadAdd"),e(94,"NumpadEnter"),e(95,"Numpad1"),e(96,"Numpad2"),e(97,"Numpad3"),e(98,"Numpad4"),e(99,"Numpad5"),e(100,"Numpad6"),e(101,"Numpad7"),e(102,"Numpad8"),e(103,"Numpad9"),e(104,"Numpad0"),e(105,"NumpadDecimal"),e(106,"IntlBackslash"),e(107,"ContextMenu"),e(108,"Power"),e(109,"NumpadEqual"),e(110,"F13"),e(111,"F14"),e(112,"F15"),e(113,"F16"),e(114,"F17"),e(115,"F18"),e(116,"F19"),e(117,"F20"),e(118,"F21"),e(119,"F22"),e(120,"F23"),e(121,"F24"),e(122,"Open"),e(123,"Help"),e(124,"Select"),e(125,"Again"),e(126,"Undo"),e(127,"Cut"),e(128,"Copy"),e(129,"Paste"),e(130,"Find"),e(131,"AudioVolumeMute"),e(132,"AudioVolumeUp"),e(133,"AudioVolumeDown"),
e(134,"NumpadComma"),e(135,"IntlRo"),e(136,"KanaMode"),e(137,"IntlYen"),e(138,"Convert"),e(139,"NonConvert"),e(140,"Lang1"),e(141,"Lang2"),e(142,"Lang3"),e(143,"Lang4"),e(144,"Lang5"),e(145,"Abort"),e(146,"Props"),e(147,"NumpadParenLeft"),e(148,"NumpadParenRight"),e(149,"NumpadBackspace"),e(150,"NumpadMemoryStore"),e(151,"NumpadMemoryRecall"),e(152,"NumpadMemoryClear"),e(153,"NumpadMemoryAdd"),e(154,"NumpadMemorySubtract"),e(155,"NumpadClear"),e(156,"NumpadClearEntry"),e(157,"ControlLeft"),e(158,"ShiftLeft"),e(159,"AltLeft"),e(160,"MetaLeft"),e(161,"ControlRight"),e(162,"ShiftRight"),e(163,"AltRight"),e(164,"MetaRight"),e(165,"BrightnessUp"),e(166,"BrightnessDown"),e(167,"MediaPlay"),e(168,"MediaRecord"),e(169,"MediaFastForward"),e(170,"MediaRewind"),e(171,"MediaTrackNext"),e(172,"MediaTrackPrevious"),e(173,"MediaStop"),e(174,"Eject"),e(175,"MediaPlayPause"),e(176,"MediaSelect"),e(177,"LaunchMail"),e(178,"LaunchApp2"),e(179,"LaunchApp1"),e(180,"SelectTask"),e(181,"LaunchScreenSaver"),e(182,"BrowserSearch"),
e(183,"BrowserHome"),e(184,"BrowserBack"),e(185,"BrowserForward"),e(186,"BrowserStop"),e(187,"BrowserRefresh"),e(188,"BrowserFavorites"),e(189,"ZoomToggle"),e(190,"MailReply"),e(191,"MailForward"),e(192,"MailSend")}(),function(){function e(e,i){t.IMMUTABLE_CODE_TO_KEY_CODE[e]=i,0!==i&&3!==i&&5!==i&&4!==i&&6!==i&&57!==i&&(t.IMMUTABLE_KEY_CODE_TO_CODE[i]=e)}for(let e=0;e<=193;e++)t.IMMUTABLE_CODE_TO_KEY_CODE[e]=-1;for(let e=0;e<=112;e++)t.IMMUTABLE_KEY_CODE_TO_CODE[e]=-1;t.IMMUTABLE_KEY_CODE_TO_CODE[3]=46,e(0,0),e(1,0),e(2,0),e(3,0),e(4,0),e(5,0),e(6,0),e(7,0),e(8,0),e(9,0),e(46,3),e(47,9),e(48,1),e(49,2),e(50,10),e(63,8),e(64,59),e(65,60),e(66,61),e(67,62),e(68,63),e(69,64),e(70,65),e(71,66),e(72,67),e(73,68),e(74,69),e(75,70),e(76,0),e(77,79),e(78,7),e(79,19),e(80,14),e(81,11),e(82,20),e(83,13),e(84,12),e(85,17),e(86,15),e(87,18),e(88,16),e(89,78),e(90,108),e(91,103),e(92,106),e(93,104),e(94,3),e(95,94),e(96,95),e(97,96),e(98,97),e(99,98),e(100,99),e(101,100),e(102,101),e(103,102),e(104,93),e(105,107),
e(107,58),e(108,0),e(109,0),e(110,71),e(111,72),e(112,73),e(113,74),e(114,75),e(115,76),e(116,77),e(117,0),e(118,0),e(119,0),e(120,0),e(121,0),e(122,0),e(123,0),e(124,0),e(125,0),e(126,0),e(127,0),e(128,0),e(129,0),e(130,0),e(131,0),e(132,0),e(133,0),e(134,105),e(136,0),e(138,0),e(139,0),e(140,0),e(141,0),e(142,0),e(143,0),e(144,0),e(145,0),e(146,0),e(147,0),e(148,0),e(149,0),e(150,0),e(151,0),e(152,0),e(153,0),e(154,0),e(155,0),e(156,0),e(157,5),e(158,4),e(159,6),e(160,57),e(161,5),e(162,4),e(163,6),e(164,57),e(165,0),e(166,0),e(167,0),e(168,0),e(169,0),e(170,0),e(171,0),e(172,0),e(173,0),e(174,0),e(175,0),e(176,0),e(177,0),e(178,0),e(179,0),e(180,0),e(181,0),e(182,0),e(183,0),e(184,0),e(185,0),e(186,0),e(187,0),e(188,0),e(189,0),e(190,0),e(191,0),e(192,0)}()}),define(t[114],i([1,0,52,66]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static _readModifiers(e){e=e.toLowerCase().trim();let t,i=!1,n=!1,r=!1,s=!1;do{t=!1,/^ctrl(\+|\-)/.test(e)&&(i=!0,
e=e.substr("ctrl-".length),t=!0),/^shift(\+|\-)/.test(e)&&(n=!0,e=e.substr("shift-".length),t=!0),/^alt(\+|\-)/.test(e)&&(r=!0,e=e.substr("alt-".length),t=!0),/^meta(\+|\-)/.test(e)&&(s=!0,e=e.substr("meta-".length),t=!0),/^win(\+|\-)/.test(e)&&(s=!0,e=e.substr("win-".length),t=!0),/^cmd(\+|\-)/.test(e)&&(s=!0,e=e.substr("cmd-".length),t=!0)}while(t);let o;const a=e.indexOf(" ");return a>0?(o=e.substring(0,a),e=e.substring(a)):(o=e,e=""),{remains:e,ctrl:i,shift:n,alt:r,meta:s,key:o}}static parseSimpleKeybinding(e){const t=this._readModifiers(e),n=i.KeyCodeUtils.fromUserSettings(t.key);return[new i.SimpleKeybinding(t.ctrl,t.shift,t.alt,t.meta,n),t.remains]}static parseKeybinding(e,t){if(!e)return null;const n=[];let r;do{[r,e]=this.parseSimpleKeybinding(e),n.push(r)}while(e.length>0);return new i.ChordKeybinding(n)}static parseSimpleUserBinding(e){const t=this._readModifiers(e),r=t.key.match(/^\[([^\]]+)\]$/);if(r){const e=r[1],i=n.ScanCodeUtils.lowerCaseToEnum(e)
;return[new n.ScanCodeBinding(t.ctrl,t.shift,t.alt,t.meta,i),t.remains]}const s=i.KeyCodeUtils.fromUserSettings(t.key);return[new i.SimpleKeybinding(t.ctrl,t.shift,t.alt,t.meta,s),t.remains]}static parseUserBinding(e){if(!e)return[];const t=[];let i;for(;e.length>0;)[i,e]=this.parseSimpleUserBinding(e),t.push(i);return t}}t.KeybindingParser=r}),define(t[14],i([1,0]),function(e,t){"use strict";function i(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\[\]\(\)\#]/g,"\\$&")}function n(e,t){if(!e||!t)return e;const i=t.length;if(0===i||0===e.length)return e;let n=0;for(;e.indexOf(t,n)===n;)n+=i;return e.substring(n)}function r(e,t){if(!e||!t)return e;const i=t.length,n=e.length;if(0===i||0===n)return e;let r=n,s=-1;for(;;){if(-1===(s=e.lastIndexOf(t,r-1))||s+i!==r)break;if(0===s)return"";r=s}return e.substring(0,r)}function s(e,t){return e<t?-1:e>t?1:0}function o(e){return e>=97&&e<=122}function a(e){return e>=65&&e<=90}function c(e){return o(e)||a(e)}function l(e,t,i=e.length){
if("string"!=typeof e||"string"!=typeof t)return!1;for(let n=0;n<i;n++){const i=e.charCodeAt(n),r=t.charCodeAt(n);if(i!==r)if(c(i)&&c(r)){const e=Math.abs(i-r);if(0!==e&&32!==e)return!1}else if(String.fromCharCode(i).toLowerCase()!==String.fromCharCode(r).toLowerCase())return!1}return!0}function u(e,t,i,n,r,s){for(;t<i&&r<s;){if(e[t]!==n[r])return!1;t+=1,r+=1}return!0}function d(e){return(e=+e)>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function h(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}Object.defineProperty(t,"__esModule",{value:!0}),t.empty="",t.isFalsyOrWhitespace=function(e){return!e||"string"!=typeof e||0===e.trim().length},t.pad=function(e,t,i="0"){const n=""+e,r=[n];for(let e=n.length;e<t;e++)r.push(i);return r.reverse().join("")};const f=/{(\d+)}/g;t.format=function(e,...t){return 0===t.length?e:e.replace(f,function(e,i){const n=parseInt(i,10);return isNaN(n)||n<0||n>=t.length?e:t[n]})},t.escape=function(e){return e.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;"
;case">":return"&gt;";case"&":return"&amp;";default:return e}})},t.escapeRegExpCharacters=i,t.trim=function(e,t=" "){return r(n(e,t),t)},t.ltrim=n,t.rtrim=r,t.convertSimple2RegExpPattern=function(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")},t.stripWildcards=function(e){return e.replace(/\*/g,"")},t.startsWith=function(e,t){if(e.length<t.length)return!1;if(e===t)return!0;for(let i=0;i<t.length;i++)if(e[i]!==t[i])return!1;return!0},t.endsWith=function(e,t){const i=e.length-t.length;return i>0?e.indexOf(t,i)===i:0===i&&e===t},t.createRegExp=function(e,t,n={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=i(e)),n.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let r="";return n.global&&(r+="g"),n.matchCase||(r+="i"),n.multiline&&(r+="m"),n.unicode&&(r+="u"),new RegExp(e,r)},t.regExpLeadsToEndlessLoop=function(e){
return"^"!==e.source&&"^$"!==e.source&&"$"!==e.source&&"^\\s*$"!==e.source&&!(!e.exec("")||0!==e.lastIndex)},t.regExpContainsBackreference=function(e){return!!e.match(/([^\\]|^)(\\\\)*\\\d+/)},t.regExpFlags=function(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")},t.firstNonWhitespaceIndex=function(e){for(let t=0,i=e.length;t<i;t++){const i=e.charCodeAt(t);if(32!==i&&9!==i)return t}return-1},t.getLeadingWhitespace=function(e,t=0,i=e.length){for(let n=t;n<i;n++){const i=e.charCodeAt(n);if(32!==i&&9!==i)return e.substring(t,n)}return e.substring(t,i)},t.lastNonWhitespaceIndex=function(e,t=e.length-1){for(let i=t;i>=0;i--){const t=e.charCodeAt(i);if(32!==t&&9!==t)return i}return-1},t.compare=s,t.compareIgnoreCase=function(e,t){const i=Math.min(e.length,t.length);for(let n=0;n<i;n++){let i=e.charCodeAt(n),r=t.charCodeAt(n);if(i===r)continue;a(i)&&(i+=32),a(r)&&(r+=32);const c=i-r;if(0!==c)return o(i)&&o(r)?c:s(e.toLowerCase(),t.toLowerCase())}
return e.length<t.length?-1:e.length>t.length?1:0},t.isLowerAsciiLetter=o,t.isUpperAsciiLetter=a,t.equalsIgnoreCase=function(e,t){return(e?e.length:0)===(t?t.length:0)&&l(e,t)},t.startsWithIgnoreCase=function(e,t){const i=t.length;return!(t.length>e.length)&&l(e,t,i)},t.commonPrefixLength=function(e,t){let i,n=Math.min(e.length,t.length);for(i=0;i<n;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return n},t.commonSuffixLength=function(e,t){let i,n=Math.min(e.length,t.length);const r=e.length-1,s=t.length-1;for(i=0;i<n;i++)if(e.charCodeAt(r-i)!==t.charCodeAt(s-i))return i;return n},t.overlap=function(e,t){const i=e.length;let n=t.length,r=i-n;if(0===r)return e===t?i:0;for(r<0&&(n+=r,r=0);r<i&&n>0;){if(u(e,r,i,t,0,n))return n;n-=1,r+=1}return 0},t.isHighSurrogate=function(e){return 55296<=e&&e<=56319},t.isLowSurrogate=function(e){return 56320<=e&&e<=57343}
;const p=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;t.containsRTL=function(e){return p.test(e)};const g=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEF8]|\uD83E[\uDD00-\uDDE6])/;t.containsEmoji=function(e){return g.test(e)};const m=/^[\t\n\r\x20-\x7E]*$/;t.isBasicASCII=function(e){return m.test(e)},t.containsFullWidthCharacter=function(e){for(let t=0,i=e.length;t<i;t++)if(d(e.charCodeAt(t)))return!0;return!1},t.isFullWidthCharacter=d,t.lcut=function(e,i){if(e.length<i)return e;const n=/\b/g
;let r=0;for(;n.test(e)&&!(e.length-n.lastIndex<i);)r=n.lastIndex,n.lastIndex+=1;return e.substring(r).replace(/^\s/,t.empty)};const v=/\x1B\x5B[12]?K/g,w=/\x1b\[\d+m/g,y=/\x1b\[0?m/g;t.removeAnsiEscapeCodes=function(e){return e&&(e=(e=(e=e.replace(v,"")).replace(w,"")).replace(y,"")),e},t.removeAccents=function(){if("function"!=typeof String.prototype.normalize)return function(e){return e};{const e=/[\u0300-\u036f]/g;return function(i){return i.normalize("NFD").replace(e,t.empty)}}}(),t.UTF8_BOM_CHARACTER=String.fromCharCode(65279),t.startsWithUTF8BOM=h,t.stripUTF8BOM=function(e){return h(e)?e.substr(1):e},t.safeBtoa=function(e){return btoa(encodeURIComponent(e))},t.repeat=function(e,t){let i="";for(let n=0;n<t;n++)i+=e;return i},t.fuzzyContains=function(e,t){if(!e||!t)return!1;if(e.length<t.length)return!1;const i=t.length,n=e.toLowerCase();let r=0,s=-1;for(;r<i;){const e=n.indexOf(t[r],s+1);if(e<0)return!1;s=e,r++}return!0},t.containsUppercaseCharacter=function(e,t=!1){
return!!e&&(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e)},t.uppercaseFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.getNLines=function(e,t=1){if(0===t)return"";let i=-1;do{i=e.indexOf("\n",i+1),t--}while(t>0&&i>=0);return i>=0?e.substr(0,i):e},t.singleLetterHash=function(e){return(e%=52)<26?String.fromCharCode(97+e):String.fromCharCode(65+e-26)}}),define(t[130],i([1,0,14]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalISOString=function(e){return e.getFullYear()+"-"+i.pad(e.getMonth()+1,2)+"-"+i.pad(e.getDate(),2)+"T"+i.pad(e.getHours(),2)+":"+i.pad(e.getMinutes(),2)+":"+i.pad(e.getSeconds(),2)+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}),define(t[32],i([1,0,2,14,6]),function(e,t,i,n,r){"use strict";function s(e){return 47===e||92===e}function o(e){return e>=65&&e<=90||e>=97&&e<=122}Object.defineProperty(t,"__esModule",{value:!0}),t.toSlashes=function(e){return e.replace(/[\\/]/g,r.posix.sep)},
t.getRoot=function(e,t=r.posix.sep){if(!e)return"";const i=e.length,n=e.charCodeAt(0);if(s(n)){if(s(e.charCodeAt(1))&&!s(e.charCodeAt(2))){let n=3;const r=n;for(;n<i&&!s(e.charCodeAt(n));n++);if(r!==n&&!s(e.charCodeAt(n+1)))for(n+=1;n<i;n++)if(s(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}return t}if(o(n)&&58===e.charCodeAt(1))return s(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let a=e.indexOf("://");if(-1!==a)for(a+=3;a<i;a++)if(s(e.charCodeAt(a)))return e.slice(0,a+1);return""},t.isUNC=function(e){if(!i.isWindows)return!1;if(!e||e.length<5)return!1;let t=e.charCodeAt(0);if(92!==t)return!1;if(92!==(t=e.charCodeAt(1)))return!1;let n=2;const r=n;for(;n<e.length&&92!==(t=e.charCodeAt(n));n++);return r!==n&&(t=e.charCodeAt(n+1),!isNaN(t)&&92!==t)};const a=/[\\/:\*\?"<>\|]/g,c=/[\\/]/g,l=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])$/i;t.isValidBasename=function(e,t=i.isWindows){const n=t?a:c;return!(!e||0===e.length||/^\s+$/.test(e)||(n.lastIndex=0,
n.test(e)||t&&l.test(e)||"."===e||".."===e||t&&"."===e[e.length-1]||t&&e.length!==e.trim().length||e.length>255))},t.isEqual=function(e,t,i){const r=e===t;return!i||r?r:!(!e||!t)&&n.equalsIgnoreCase(e,t)},t.isEqualOrParent=function(e,t,i,s=r.sep){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(i){if(!n.startsWithIgnoreCase(e,t))return!1;if(t.length===e.length)return!0;let i=t.length;return t.charAt(t.length-1)===s&&i--,e.charAt(i)===s}return t.charAt(t.length-1)!==s&&(t+=s),0===e.indexOf(t)},t.isWindowsDriveLetter=o,t.sanitizeFilePath=function(e,t){return i.isWindows&&n.endsWith(e,":")&&(e+=r.sep),r.isAbsolute(e)||(e=r.join(t,e)),e=r.normalize(e),i.isWindows?(e=n.rtrim(e,r.sep),n.endsWith(e,":")&&(e+=r.sep)):(e=n.rtrim(e,r.sep))||(e=r.sep),e},t.isRootOrDriveLetter=function(e){const t=r.normalize(e);return i.isWindows?!(e.length>3)&&o(t.charCodeAt(0))&&58===t.charCodeAt(1)&&(2===e.length||92===t.charCodeAt(2)):t===r.posix.sep}}),define(t[19],i([1,0]),function(e,t){"use strict"
;function i(e){return Array.isArray?Array.isArray(e):!(!e||typeof e.length!==u.number||e.constructor!==Array)}function n(e){return typeof e===u.string||e instanceof String}function r(e){return!(typeof e!==u.object||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function s(e){return typeof e===u.undefined}function o(e){return s(e)||null===e}function a(e){return typeof e===u.function}function c(e,t){if(n(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(a(t)){try{if(e instanceof t)return}catch(e){}if(!o(e)&&e.constructor===t)return;if(1===t.length&&!0===t.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function l(e){let t=[],i=Object.getPrototypeOf(e);for(;Object.prototype!==i;)t=t.concat(Object.getOwnPropertyNames(i)),i=Object.getPrototypeOf(i);return t}Object.defineProperty(t,"__esModule",{value:!0});const u={
number:"number",string:"string",undefined:"undefined",object:"object",function:"function"};t.isArray=i,t.isString=n,t.isStringArray=function(e){return i(e)&&e.every(e=>n(e))},t.isObject=r,t.isNumber=function(e){return(typeof e===u.number||e instanceof Number)&&!isNaN(e)},t.isBoolean=function(e){return!0===e||!1===e},t.isUndefined=s,t.isUndefinedOrNull=o;const d=Object.prototype.hasOwnProperty;t.isEmptyObject=function(e){if(!r(e))return!1;for(let t in e)if(d.call(e,t))return!1;return!0},t.isFunction=a,t.areFunctions=function(...e){return e.length>0&&e.every(a)},t.validateConstraints=function(e,t){const i=Math.min(e.length,t.length);for(let n=0;n<i;n++)c(e[n],t[n])},t.validateConstraint=c,t.getAllPropertyNames=l,t.getAllMethodNames=function(e){const t=[];for(const i of l(e))"function"==typeof e[i]&&t.push(i);return t},t.createProxyObject=function(e,t){const i=e=>(function(){const i=Array.prototype.slice.call(arguments,0);return t(e,i)});let n={};for(const t of e)n[t]=i(t);return n},
t.withNullAsUndefined=function(e){return null===e?void 0:e},t.withUndefinedAsNull=function(e){return void 0===e?null:e}}),define(t[15],i([1,0,19]),function(e,t,i){"use strict";function n(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach(i=>{e[i]&&"object"==typeof e[i]?t[i]=n(e[i]):t[i]=e[i]}),t}function r(e,t,n){if(i.isUndefinedOrNull(e))return e;const s=t(e);if(void 0!==s)return s;if(i.isArray(e)){const i=[];for(const s of e)i.push(r(s,t,n));return i}if(i.isObject(e)){if(n.has(e))throw new Error("Cannot clone recursive data-structure");n.add(e);const i={};for(let s in e)a.call(e,s)&&(i[s]=r(e[s],t,n));return n.delete(e),i}return e}function s(e,t,n=!0){return i.isObject(e)?(i.isObject(t)&&Object.keys(t).forEach(r=>{r in e?n&&(i.isObject(e[r])&&i.isObject(t[r])?s(e[r],t[r],n):e[r]=t[r]):e[r]=t[r]}),e):t}function o(e,t){if(e===t)return!0;if(null===e||void 0===e||null===t||void 0===t)return!1;if(typeof e!=typeof t)return!1
;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let i,n;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!o(e[i],t[i]))return!1}else{const r=[];for(n in e)r.push(n);r.sort();const s=[];for(n in t)s.push(n);if(s.sort(),!o(r,s))return!1;for(i=0;i<r.length;i++)if(!o(e[r[i]],t[r[i]]))return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=n,t.deepFreeze=function(e){if(!e||"object"!=typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const i in e)if(a.call(e,i)){const n=e[i];"object"!=typeof n||Object.isFrozen(n)||t.push(n)}}return e};const a=Object.prototype.hasOwnProperty;t.cloneAndChange=function(e,t){return r(e,t,new Set)},t.mixin=s,t.assign=function(e,...t){return t.forEach(t=>Object.keys(t).forEach(i=>e[i]=t[i])),e},t.equals=o,t.safeStringify=function(e){const t=[];return JSON.stringify(e,(e,n)=>{if(i.isObject(n)||Array.isArray(n)){if(-1!==t.indexOf(n))return"[Circular]";t.push(n)}return n
})},t.getOrDefault=function(e,t,i){const n=t(e);return void 0===n?i:n},t.distinct=function(e,t){const i=Object.create(null);return e&&t?(Object.keys(t).forEach(n=>{const r=e[n],s=t[n];o(r,s)||(i[n]=s)}),i):i}}),define(t[8],i([1,0,2]),function(e,t,i){"use strict";function n(e,t){let i=void 0,n=-1;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||45===s||46===s||95===s||126===s||t&&47===s)-1!==n&&(i+=encodeURIComponent(e.substring(n,r)),n=-1),void 0!==i&&(i+=e.charAt(r));else{void 0===i&&(i=e.substr(0,r));const t=m[s];void 0!==t?(-1!==n&&(i+=encodeURIComponent(e.substring(n,r)),n=-1),i+=t):-1===n&&(n=r)}}return-1!==n&&(i+=encodeURIComponent(e.substring(n))),void 0!==i?i:e}function r(e){let t
;return t=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?e.path[1].toLowerCase()+e.path.substr(2):e.path,i.isWindows&&(t=t.replace(/\//g,"\\")),t}function s(e,t){const i=t?function(e){let t=void 0;for(let i=0;i<e.length;i++){const n=e.charCodeAt(i);35===n||63===n?(void 0===t&&(t=e.substr(0,i)),t+=m[n]):void 0!==t&&(t+=e[i])}return void 0!==t?t:e}:n;let r="",{scheme:s,authority:o,path:a,query:c,fragment:l}=e;if(s&&(r+=s,r+=":"),(o||"file"===s)&&(r+=d,r+=d),o){let e=o.indexOf("@");if(-1!==e){const t=o.substr(0,e);o=o.substr(e+1),-1===(e=t.indexOf(":"))?r+=i(t,!1):(r+=i(t.substr(0,e),!1),r+=":",r+=i(t.substr(e+1),!1)),r+="@"}-1===(e=(o=o.toLowerCase()).indexOf(":"))?r+=i(o,!1):(r+=i(o.substr(0,e),!1),r+=o.substr(e))}if(a){if(a.length>=3&&47===a.charCodeAt(0)&&58===a.charCodeAt(2)){const e=a.charCodeAt(1)
;e>=65&&e<=90&&(a=`/${String.fromCharCode(e+32)}:${a.substr(3)}`)}else if(a.length>=2&&58===a.charCodeAt(1)){const e=a.charCodeAt(0);e>=65&&e<=90&&(a=`${String.fromCharCode(e+32)}:${a.substr(2)}`)}r+=i(a,!0)}return c&&(r+="?",r+=i(c,!1)),l&&(r+="#",r+=t?l:n(l,!1)),r}Object.defineProperty(t,"__esModule",{value:!0});const o=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;let l=!0;t.setUriThrowOnMissingScheme=function(e){const t=l;return l=e,t};const u="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class f{static isUri(e){return e instanceof f||!!e&&("string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"function"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString)}constructor(e,t,i,n,r,s=!1){"object"==typeof e?(this.scheme=e.scheme||u,this.authority=e.authority||u,this.path=e.path||u,this.query=e.query||u,this.fragment=e.fragment||u):(this.scheme=function(e,t){
return t||l?e||u:(e||(console.trace("BAD uri lacks scheme, falling back to file-scheme."),e="file"),e)}(e,s),this.authority=t||u,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==d&&(t=d+t):t=d}return t}(this.scheme,i||u),this.query=n||u,this.fragment=r||u,function(e,t){if(!e.scheme){if(t||l)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);console.warn(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`)}if(e.scheme&&!o.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!a.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')
}else if(c.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,s))}get fsPath(){return r(this)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:r,fragment:s}=e;return void 0===t?t=this.scheme:null===t&&(t=u),void 0===i?i=this.authority:null===i&&(i=u),void 0===n?n=this.path:null===n&&(n=u),void 0===r?r=this.query:null===r&&(r=u),void 0===s?s=this.fragment:null===s&&(s=u),t===this.scheme&&i===this.authority&&n===this.path&&r===this.query&&s===this.fragment?this:new g(t,i,n,r,s)}static parse(e,t=!1){const i=h.exec(e);return i?new g(i[2]||u,decodeURIComponent(i[4]||u),decodeURIComponent(i[5]||u),decodeURIComponent(i[7]||u),decodeURIComponent(i[9]||u),t):new g(u,u,u,u,u)}static file(e){let t=u;if(i.isWindows&&(e=e.replace(/\\/g,d)),e[0]===d&&e[1]===d){const i=e.indexOf(d,2);-1===i?(t=e.substring(2),e=d):(t=e.substring(2,i),e=e.substring(i)||d)}return new g("file",t,e,u,u)}static from(e){
return new g(e.scheme,e.authority,e.path,e.query,e.fragment)}toString(e=!1){return s(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof f)return e;{const t=new g(e);return t._formatted=e.external,t._fsPath=e._sep===p?e.fsPath:null,t}}return e}}t.URI=f;const p=i.isWindows?1:void 0;class g extends f{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=r(this)),this._fsPath}toString(e=!1){return e?s(this,!0):(this._formatted||(this._formatted=s(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=p),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const m={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",
44:"%2C",59:"%3B",61:"%3D",32:"%20"}}),define(t[29],i([1,0,8]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathFromAmdModule=function(e,t){return i.URI.parse(e.toUrl(t)).fsPath}}),define(t[116],i([1,0,8]),function(e,t,i){"use strict";function n(e){const t=[];let i;try{const n=JSON.parse(e.arguments),r=n[n.length-1];r&&r.__$stack&&(n.pop(),i=r.__$stack),t.push(...n)}catch(i){t.push("Unable to log remote console arguments",e.arguments)}return{args:t,stack:i}}function r(e){if("string"!=typeof e)return r(n(e).stack);const t=e;if(t){const e=s(t),n=/at [^\/]*((?:(?:[a-zA-Z]+:)|(?:[\/])|(?:\\\\))(?:.+)):(\d+):(\d+)/.exec(e||"");if(n&&4===n.length)return{uri:i.URI.file(n[1]),line:Number(n[2]),column:Number(n[3])}}}function s(e){if(!e)return e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function o(e){return`color: ${e}`}Object.defineProperty(t,"__esModule",{value:!0}),t.isRemoteConsoleLog=function(e){const t=e
;return t&&"string"==typeof t.type&&"string"==typeof t.severity},t.parse=n,t.getFirstFrame=r,t.log=function(e,t){const{args:i,stack:r}=n(e),a="string"==typeof i[0]&&1===i.length;let c=s(r);c&&(c=`(${c.trim()})`);let l=[];if(l="string"==typeof i[0]?c&&a?[`%c[${t}] %c${i[0]} %c${c}`,o("blue"),o("black"),o("grey")]:[`%c[${t}] %c${i[0]}`,o("blue"),o("black"),...i.slice(1)]:[`%c[${t}]%`,o("blue"),...i],c&&!a&&l.push(c),"function"!=typeof console[e.severity])throw new Error("Unknown console method");console[e.severity].apply(console,l)}}),define(t[27],i([1,0,8,77]),function(e,t,i,n){"use strict";function r(e){const t=[];return e.forEach(e=>t.push(e)),t}function s(e){const t=[];return e.forEach((e,i)=>t.push(i)),t}Object.defineProperty(t,"__esModule",{value:!0}),t.values=r,t.keys=s,t.getOrSet=function(e,t,i){let n=e.get(t);return void 0===n&&(n=i,e.set(t,n)),n},t.mapToString=function(e){const t=[];return e.forEach((e,i)=>{t.push(`${i} => ${e}`)}),`Map(${e.size}) {${t.join(", ")}}`},t.setToString=function(e){
const t=[];return e.forEach(e=>{t.push(e)}),`Set(${e.size}) {${t.join(", ")}}`},t.mapToSerializable=function(e){const t=[];return e.forEach((e,i)=>{t.push([i,e])}),t},t.serializableToMap=function(e){const t=new Map;for(const[i,n]of e)t.set(i,n);return t};class o{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}t.StringIterator=o;class a{reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){let t=0;const i=e.length;let n=this._from;for(;t<i&&n<this._to;){const i=e.charCodeAt(t)-this._value.charCodeAt(n);if(0!==i)return i
;t+=1,n+=1}return i===this._to-this._from?0:t<i?-1:1}value(){return this._value.substring(this._from,this._to)}}t.PathIterator=a;class c{isEmpty(){return!(this.left||this.mid||this.right||this.value)}}class l{constructor(e){this._iter=e}static forPaths(){return new l(new a)}static forStrings(){return new l(new o)}clear(){this._root=void 0}set(e,t){const i=this._iter.reset(e);let n;for(this._root||(this._root=new c,this._root.segment=i.value()),n=this._root;;){const e=i.cmp(n.segment);if(e>0)n.left||(n.left=new c,n.left.segment=i.value()),n=n.left;else if(e<0)n.right||(n.right=new c,n.right.segment=i.value()),n=n.right;else{if(!i.hasNext())break;i.next(),n.mid||(n.mid=new c,n.mid.segment=i.value()),n=n.mid}}const r=n.value;return n.value=t,n.key=e,r}get(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),i=i.mid}}return i?i.value:void 0}delete(e){const t=this._iter.reset(e),i=[];let n=this._root;for(;n;){
const e=t.cmp(n.segment);if(e>0)i.push([1,n]),n=n.left;else if(e<0)i.push([-1,n]),n=n.right;else{if(!t.hasNext()){for(n.value=void 0;i.length>0&&n.isEmpty();){let[e,t]=i.pop();switch(e){case 1:t.left=void 0;break;case 0:t.mid=void 0;break;case-1:t.right=void 0}n=t}break}t.next(),i.push([0,n]),n=n.mid}}}findSubstr(e){const t=this._iter.reset(e);let i=this._root,n=void 0;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),n=i.value||n,i=i.mid}}return i&&i.value||n}findSuperstr(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())return i.mid?this._nodeIterator(i.mid):void 0;t.next(),i=i.mid}}}_nodeIterator(e){let t,i,r;return{next:()=>(r||(r=[],i=0,this._forEach(e,e=>r.push(e))),i>=r.length?n.FIN:(t?t.value=r[i++]:t={done:!1,value:r[i++]},t))}}forEach(e){this._forEach(this._root,e)}_forEach(e,t){e&&(this._forEach(e.left,t),e.value&&t(e.value,e.key),
this._forEach(e.mid,t),this._forEach(e.right,t))}}t.TernarySearchTree=l;class u{constructor(){this.map=new Map,this.ignoreCase=!1}set(e,t){this.map.set(this.toKey(e),t)}get(e){return this.map.get(this.toKey(e))}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e){this.map.forEach(e)}values(){return r(this.map)}toKey(e){let t=e.toString();return this.ignoreCase&&(t=t.toLowerCase()),t}keys(){return s(this.map).map(e=>i.URI.parse(e))}clone(){const e=new u;return this.map.forEach((t,i)=>e.map.set(i,t)),e}}t.ResourceMap=u;!function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"}(t.Touch||(t.Touch={}));class d{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e,t=0){
const i=this._map.get(e);if(i)return 0!==t&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,0!==i&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:default:this.addItemLast(n)}this._map.set(e,n),this._size++}}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let i=this._head;for(;i;)t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),i=i.next}values(){const e=[];let t=this._head;for(;t;)e.push(t.value),t=t.next;return e}keys(){const e=[];let t=this._head;for(;t;)e.push(t.key),t=t.next;return e}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,i=this.size
;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0)}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;const t=e.next,i=e.previous
;e===this._tail?(i.next=void 0,this._tail=i):(t.previous=i,i.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(2===t){if(e===this._tail)return;const t=e.next,i=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=i,i.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}t.LinkedMap=d;class h extends d{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e){return super.get(e,2)}peek(e){return super.get(e,0)}set(e,t){super.set(e,t,2),this.checkTrim()}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}t.LRUCache=h}),
define(t[79],i([1,0,25,14,32,6,27,9]),function(e,t,i,n,r,s,o,a){"use strict";function c(e){switch(e){case 0:return"";case 1:return`${_}*?`;default:return`(?:${b}|${_}+${b}|${b}${_}+)*?`}}function l(e,t){if(!e)return[];const i=[];let n=!1,r=!1,s="";for(const o of e){switch(o){case t:if(!n&&!r){i.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":r=!0;break;case"]":r=!1}s+=o}return s&&i.push(s),i}function u(e){if(!e)return"";let t="";const i=l(e,S);if(i.every(e=>e===y))t=".*";else{let e=!1;i.forEach((r,s)=>{if(r===y)return void(e||(t+=c(2),e=!0));let o=!1,a="",d=!1,h="";for(const e of r)if("}"!==e&&o)a+=e;else if(!d||"]"===e&&h)switch(e){case"{":o=!0;continue;case"[":d=!0;continue;case"}":const i=`(?:${l(a,",").map(e=>u(e)).join("|")})`;t+=i,o=!1,a="";break;case"]":t+="["+h+"]",d=!1,h="";break;case"?":t+=_;continue;case"*":t+=c(1);continue;default:t+=n.escapeRegExpCharacters(e)}else{let t;h+=t="-"===e?e:"^"!==e&&"!"!==e||h?e===S?"":n.escapeRegExpCharacters(e):"^"}
s<i.length-1&&(i[s+1]!==y||s+2<i.length)&&(t+=b),e=!1})}return t}function d(e,t){if(!e)return W;let r;r="string"!=typeof e?e.pattern:e;const s=`${r=r.trim()}_${!!t.trimForExclusions}`;let o=D.get(s);if(o)return h(o,e);let a;if(C.test(r)){const e=r.substr(4);o=function(t,i){return"string"==typeof t&&n.endsWith(t,e)?r:null}}else o=(a=k.exec(f(r,t)))?function(e,t){const i=`/${e}`,r=`\\${e}`,s=function(s,o){return"string"!=typeof s?null:o?o===e?t:null:s===e||n.endsWith(s,i)||n.endsWith(s,r)?t:null},o=[e];return s.basenames=o,s.patterns=[t],s.allBasenames=o,s}(a[1],r):(t.trimForExclusions?P:I).test(r)?function(e,t){const n=w(e.slice(1,-1).split(",").map(e=>d(e,t)).filter(e=>e!==W),e),r=n.length;if(!r)return W;if(1===r)return n[0];const s=function(t,i){for(let r=0,s=n.length;r<s;r++)if(n[r](t,i))return e;return null},o=i.first(n,e=>!!e.allBasenames);o&&(s.allBasenames=o.allBasenames);const a=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);a.length&&(s.allPaths=a);return s
}(r,t):(a=M.exec(f(r,t)))?p(a[1].substr(1),r,!0):(a=A.exec(f(r,t)))?p(a[1],r,!1):function(e){try{const t=new RegExp(`^${u(e)}$`);return function(i,n){return t.lastIndex=0,"string"==typeof i&&t.test(i)?e:null}}catch(e){return W}}(r);return D.set(s,o),h(o,e)}function h(e,t){return"string"==typeof t?e:function(i,n){return r.isEqualOrParent(i,t.base)?e(s.relative(t.base,i),n):null}}function f(e,t){return t.trimForExclusions&&n.endsWith(e,"/**")?e.substr(0,e.length-2):e}function p(e,t,i){const r=s.sep!==s.posix.sep?e.replace(E,s.sep):e,o=s.sep+r,a=i?function(e,i){return"string"!=typeof e||e!==r&&!n.endsWith(e,o)?null:t}:function(e,i){return"string"==typeof e&&e===r?t:null};return a.allPaths=[(i?"*/":"./")+e],a}function g(e,t={}){if(!e)return O;if("string"==typeof e||v(e)){const i=d(e,t);if(i===W)return O;const n=function(e,t){return!!i(e,t)};return i.allBasenames&&(n.allBasenames=i.allBasenames),i.allPaths&&(n.allPaths=i.allPaths),n}return function(e,t){
const n=w(Object.getOwnPropertyNames(e).map(i=>(function(e,t,i){if(!1===t)return W;const n=d(e,i);if(n===W)return W;if("boolean"==typeof t)return n;if(t){const i=t.when;if("string"==typeof i){const t=(t,r,s,o)=>{if(!o||!n(t,r))return null;const c=i.replace("$(basename)",s),l=o(c);return a.isThenable(l)?l.then(t=>t?e:null):l?e:null};return t.requiresSiblings=!0,t}}return n})(i,e[i],t)).filter(e=>e!==W)),r=n.length;if(!r)return W;if(!n.some(e=>!!e.requiresSiblings)){if(1===r)return n[0];const e=function(e,t){for(let i=0,r=n.length;i<r;i++){const r=n[i](e,t);if(r)return r}return null},t=i.first(n,e=>!!e.allBasenames);t&&(e.allBasenames=t.allBasenames);const s=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return s.length&&(e.allPaths=s),e}const o=function(e,t,i){let r=void 0;for(let o=0,a=n.length;o<a;o++){const a=n[o];a.requiresSiblings&&i&&(t||(t=s.basename(e)),r||(r=t.substr(0,t.length-s.extname(e).length)));const c=a(e,t,r,i);if(c)return c}return null},c=i.first(n,e=>!!e.allBasenames)
;c&&(o.allBasenames=c.allBasenames);const l=n.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);l.length&&(o.allPaths=l);return o}(e,t)}function m(e){const t={};for(const i of e)t[i]=!0;return t}function v(e){const t=e;return t&&"string"==typeof t.base&&"string"==typeof t.pattern}function w(e,t){const i=e.filter(e=>!!e.basenames);if(i.length<2)return e;const n=i.reduce((e,t)=>{const i=t.basenames;return i?e.concat(i):e},[]);let r;if(t){r=[];for(let e=0,i=n.length;e<i;e++)r.push(t)}else r=i.reduce((e,t)=>{const i=t.patterns;return i?e.concat(i):e},[]);const s=function(e,t){if("string"!=typeof e)return null;if(!t){let i;for(i=e.length;i>0;i--){const t=e.charCodeAt(i-1);if(47===t||92===t)break}t=e.substr(i)}const i=n.indexOf(t);return-1!==i?r[i]:null};s.basenames=n,s.patterns=r,s.allBasenames=n;const o=e.filter(e=>!e.basenames);return o.push(s),o}Object.defineProperty(t,"__esModule",{value:!0}),t.getEmptyExpression=function(){return Object.create(null)};const y="**",S="/",b="[/\\\\]",_="[^/\\\\]",E=/\//g
;t.splitGlobAware=l;const C=/^\*\*\/\*\.[\w\.-]+$/,k=/^\*\*\/([\w\.-]+)\/?$/,I=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,P=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,M=/^\*\*((\/[\w\.-]+)+)\/?$/,A=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,D=new o.LRUCache(1e4),O=function(){return!1},W=function(){return null};t.match=function(e,t,i){return!(!e||"string"!=typeof t)&&g(e)(t,void 0,i)},t.parse=g,t.hasSiblingPromiseFn=function(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(e=>e?m(e):{})),t.then(e=>!!e[i]))},t.hasSiblingFn=function(e){if(!e)return;let t;return i=>{if(!t){const i=e();t=i?m(i):{}}return!!t[i]}},t.isRelativePattern=v,t.getBasenameTerms=function(e){return e.allBasenames||[]},t.getPathTerms=function(e){return e.allPaths||[]}}),define(t[23],i([1,0,8,2]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",
e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.userData="vscode-userdata"}(r=t.Schemas||(t.Schemas={}));class s{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http"}setPreferredWebSchema(e){this._preferredWebSchema=e}set(e,t,i){this._hosts[e]=t,this._ports[e]=i}setConnectionToken(e,t){this._connectionTokens[e]=t}rewrite(e,t){const s=this._hosts[e],o=this._ports[e],a=this._connectionTokens[e];return i.URI.from({scheme:n.isWeb?this._preferredWebSchema:r.vscodeRemoteResource,authority:`${s}:${o}`,path:"/vscode-remote-resource",query:`path=${encodeURIComponent(t)}&tkn=${encodeURIComponent(a)}`})}}t.RemoteAuthorities=new s}),define(t[55],i([1,0,27]),function(e,t,i){"use strict";function n(e,i,n){
if(!t.canNormalize||!e)return e;const r=n.get(e);if(r)return r;let s;return s=o.test(e)?e.normalize(i):e,n.set(e,s),s}Object.defineProperty(t,"__esModule",{value:!0}),t.canNormalize="function"==typeof"".normalize;const r=new i.LRUCache(1e4);t.normalizeNFC=function(e){return n(e,"NFC",r)};const s=new i.LRUCache(1e4);t.normalizeNFD=function(e){return n(e,"NFD",s)};const o=/[^\u0000-\u0080]/}),define(t[21],i([1,0,32,6,8,14,23,2,79,27]),function(e,t,i,n,r,s,o,a,c,l){"use strict";function u(e){return!e||e.scheme!==o.Schemas.file||!a.isLinux}function d(e,t,n=u(e)){if(e.scheme===t.scheme){if(e.scheme===o.Schemas.file)return i.isEqualOrParent(p(e),p(t),n);if(h(e.authority,t.authority))return i.isEqualOrParent(e.path,t.path,n,"/")}return!1}function h(e,t){return e===t||s.equalsIgnoreCase(e,t)}function f(e){return n.posix.basename(e.path)}function p(e){let t;const n=e.path
;return t=e.authority&&n.length>1&&e.scheme===o.Schemas.file?`//${e.authority}${n}`:a.isWindows&&47===n.charCodeAt(0)&&i.isWindowsDriveLetter(n.charCodeAt(1))&&58===n.charCodeAt(2)?n.substr(1):n,a.isWindows&&(t=t.replace(/\//g,"\\")),t}function g(e,t=n.sep){if(e.scheme===o.Schemas.file){const n=p(e);return n.length>i.getRoot(n).length&&n[n.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)}}function m(e,t,r=u(e)){if(e.scheme!==t.scheme||!h(e.authority,t.authority))return;if(e.scheme===o.Schemas.file){const r=n.relative(e.path,t.path);return a.isWindows?i.toSlashes(r):r}let s=e.path||"/",c=t.path||"/";if(r){let e=0;for(const t=Math.min(s.length,c.length);e<t&&(s.charCodeAt(e)===c.charCodeAt(e)||s.charAt(e).toLowerCase()===c.charAt(e).toLowerCase());e++);s=c.substr(0,e)+s.substr(e)}return n.posix.relative(s,c)}Object.defineProperty(t,"__esModule",{value:!0}),t.getComparisonKey=function(e){return u(e)?e.toString().toLowerCase():e.toString()},t.hasToIgnoreCase=u,
t.basenameOrAuthority=function(e){return f(e)||e.authority},t.isEqualOrParent=d,t.isEqualAuthority=h,t.isEqual=function(e,t,i=u(e)){if(e===t)return!0;if(!e||!t)return!1;if(e.scheme!==t.scheme||!h(e.authority,t.authority))return!1;const n=e.path||"/",r=t.path||"/";return n===r||i&&s.equalsIgnoreCase(n||"/",r||"/")},t.basename=f,t.extname=function(e){return n.posix.extname(e.path)},t.dirname=function(e){if(0===e.path.length)return e;if(e.scheme===o.Schemas.file)return r.URI.file(n.dirname(p(e)));let t=n.posix.dirname(e.path);return e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/"),e.with({path:t})},t.joinPath=function(e,...t){let i;return i=e.scheme===o.Schemas.file?r.URI.file(n.join(p(e),...t)).path:n.posix.join(e.path||"/",...t),e.with({path:i})},t.normalizePath=function(e){if(!e.path.length)return e;let t;return t=e.scheme===o.Schemas.file?r.URI.file(n.normalize(p(e))).path:n.posix.normalize(e.path),e.with({path:t})},t.originalFSPath=p,
t.isAbsolutePath=function(e){return!!e.path&&"/"===e.path[0]},t.hasTrailingPathSeparator=g,t.removeTrailingPathSeparator=function(e,t=n.sep){return g(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e},t.addTrailingPathSeparator=function(e,t=n.sep){let r=!1;if(e.scheme===o.Schemas.file){const n=p(e);r=void 0!==n&&n.length===i.getRoot(n).length&&n[n.length-1]===t}else{t="/";const i=e.path;r=1===i.length&&47===i.charCodeAt(i.length-1)}return r||g(e,t)?e:e.with({path:e.path+"/"})},t.relativePath=m,t.resolvePath=function(e,t){if(e.scheme===o.Schemas.file){const i=r.URI.file(n.resolve(p(e),t));return e.with({authority:i.authority,path:i.path})}return e.with({path:n.posix.resolve(e.path,t)})},t.distinctParents=function(e,t){const i=[];for(let n=0;n<e.length;n++){const r=t(e[n]);e.some((e,i)=>i!==n&&d(r,t(e)))||i.push(e[n])}return i};!function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const i=new Map
;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(e=>{const[t,n]=e.split(":");t&&n&&i.set(t,n)});const n=t.path.substring(0,t.path.indexOf(";"));return n&&i.set(e.META_DATA_MIME,n),i}}(t.DataUri||(t.DataUri={}));class v{constructor(e,t){this.expressionsByRoot=l.TernarySearchTree.forPaths(),this.globalExpression=c.parse(e);for(const e of t)this.expressionsByRoot.set(e.root.toString(),{root:e.root,expression:c.parse(e.expression)})}matches(e){const t=this.expressionsByRoot.findSubstr(e.toString());if(t){const i=m(t.root,e);if(i&&t.expression(i))return!0}return!!this.globalExpression(e.path)}}t.ResourceGlobMatcher=v,t.toLocalResource=function(e,t){if(t){let i=e.path;return i&&i[0]!==n.posix.sep&&(i=n.posix.sep+i),e.with({scheme:o.Schemas.vscodeRemote,authority:t,path:i})}return e.with({scheme:o.Schemas.file})}}),define(t[45],i([1,0,8,6,14,23,2,21]),function(e,t,i,n,r,s,o,a){"use strict";function c(e){return!(!o.isWindows||!e||":"!==e[1])}function l(e){
return c(e)?e.charAt(0).toUpperCase()+e.slice(1):e}function u(e,t){if(o.isWindows||!e||!t)return e;let i=d.original===t?d.normalized:void 0;return i||(i=`${r.rtrim(t,n.posix.sep)}${n.posix.sep}`,d={original:t,normalized:i}),(o.isLinux?r.startsWith(e,i):r.startsWithIgnoreCase(e,i))&&(e=`~/${e.substr(i.length)}`),e}Object.defineProperty(t,"__esModule",{value:!0}),t.getPathLabel=function(e,t,r){if("string"==typeof e&&(e=i.URI.file(e)),r){const t=r.getWorkspaceFolder(e);if(t){const i=r.getWorkspace().folders.length>1;let n;if(n=a.isEqual(t.uri,e)?"":a.relativePath(t.uri,e),i){const e=t&&t.name?t.name:a.basename(t.uri);n=n?e+" • "+n:e}return n}}if(e.scheme!==s.Schemas.file&&e.scheme!==s.Schemas.untitled)return e.with({query:null,fragment:null}).toString(!0);if(c(e.fsPath))return n.normalize(l(e.fsPath));let d=n.normalize(e.fsPath);return!o.isWindows&&t&&(d=u(d,t.userHome)),d},t.getBaseLabel=function(e){if(!e)return;"string"==typeof e&&(e=i.URI.file(e))
;const t=a.basename(e)||(e.scheme===s.Schemas.file?e.fsPath:e.path);return c(t)?l(t):t},t.normalizeDriveLetter=l;let d=Object.create(null);t.tildify=u,t.untildify=function(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)};const h="…",f="\\\\",p="~";t.shorten=function(e){const t=new Array(e.length);let i=!1;for(let s=0;s<e.length;s++){let o=e[s];if(""===o){t[s]=`.${n.sep}`;continue}if(!o){t[s]=o;continue}i=!0;let a="";0===o.indexOf(f)?(a=o.substr(0,o.indexOf(f)+f.length),o=o.substr(o.indexOf(f)+f.length)):0===o.indexOf(n.sep)?(a=o.substr(0,o.indexOf(n.sep)+n.sep.length),o=o.substr(o.indexOf(n.sep)+n.sep.length)):0===o.indexOf(p)&&(a=o.substr(0,o.indexOf(p)+p.length),o=o.substr(o.indexOf(p)+p.length));const c=o.split(n.sep);for(let o=1;i&&o<=c.length;o++)for(let l=c.length-o;i&&l>=0;l--){i=!1;let u=c.slice(l,l+o).join(n.sep);for(let t=0;!i&&t<e.length;t++)if(t!==s&&e[t]&&e[t].indexOf(u)>-1){const s=l+o===c.length,a=l>0&&e[t].indexOf(n.sep)>-1?n.sep+u:u,d=r.endsWith(e[t],a);i=!s||d}if(!i){let e=""
;(r.endsWith(c[0],":")||""!==a)&&(1===l&&(l=0,o++,u=c[0]+n.sep+u),l>0&&(e=c[0]+n.sep),e=a+e),l>0&&(e=e+h+n.sep),e+=u,l+o<c.length&&(e=e+n.sep+h),t[s]=e}}i&&(t[s]=o)}return t};var g;!function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"}(g||(g={})),t.template=function(e,t=Object.create(null)){const i=[];let n=!1,r="";for(const s of e)if("$"===s||n&&"{"===s)r&&i.push({value:r,type:g.TEXT}),r="",n=!0;else if("}"===s&&n){const e=t[r];if("string"==typeof e)e.length&&i.push({value:e,type:g.VARIABLE});else if(e){const t=i[i.length-1];t&&t.type===g.SEPARATOR||i.push({value:e.label,type:g.SEPARATOR})}r="",n=!1}else r+=s;return r&&!n&&i.push({value:r,type:g.TEXT}),i.filter((e,t)=>e.type!==g.SEPARATOR||[i[t-1],i[t+1]].every(e=>e&&(e.type===g.VARIABLE||e.type===g.TEXT)&&e.value.length>0)).map(e=>e.value).join("")},t.mnemonicMenuLabel=function(e,t){return o.isMacintosh||t?e.replace(/\(&&\w\)|&&/g,"").replace(/&/g,o.isMacintosh?"&":"&&"):e.replace(/&&|&/g,e=>"&"===e?"&&":"&")},
t.mnemonicButtonLabel=function(e,t){return o.isMacintosh||t?e.replace(/\(&&\w\)|&&/g,""):o.isWindows?e.replace(/&&|&/g,e=>"&"===e?"&&":"&"):e.replace(/&&/g,"_")},t.unmnemonicLabel=function(e){return e.replace(/&/g,"&&")},t.splitName=function(e){for(let t=e.length-1;t>=1;t--){const i=e.charCodeAt(t);if(47===i||92===i)return{parentPath:e.substr(0,t),name:e.substr(t+1)}}return{parentPath:"",name:e}}}),define(t[39],i([1,0]),function(e,t){"use strict";function i(){return new s}function n(e){return o.test(e)}Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}}class s extends r{constructor(){
super([s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),"-",s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),"-","4",s._randomHex(),s._randomHex(),s._randomHex(),"-",s._oneOf(s._timeHighBits),s._randomHex(),s._randomHex(),s._randomHex(),"-",s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex(),s._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return s._oneOf(s._chars)}}s._chars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],s._timeHighBits=["8","9","a","b"],t.v4=i;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;t.isUUID=n,t.parse=function(e){if(!n(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return i().asHex()}}),define(t[115],i([1,0,20,61,50]),function(e,t,i,n,r){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),t.checksum=function(e,t){return new Promise((t,s)=>{const o=i.createReadStream(e),a=n.createHash("sha1");o.pipe(a);const c=r.once((e,i)=>{o.removeAllListeners(),a.removeAllListeners(),e?s(e):t(i)});o.once("error",c),o.once("end",c),a.once("error",c),a.once("data",e=>c(void 0,e.toString("hex")))}).then(e=>e!==t?Promise.reject(new Error("Hash mismatch")):Promise.resolve())}}),define(t[71],i([1,0,210]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e="utf8"){this.stringDecoder=new i.StringDecoder(e),this.remaining=null}write(e){const t=[],i=this.remaining?this.remaining+this.stringDecoder.write(e):this.stringDecoder.write(e);if(i.length<1)return t;let n,r=0,s=r;for(;s<i.length;)if(13===(n=i.charCodeAt(s))||10===n){if(t.push(i.substring(r,s)),++s<i.length){const e=n;n=i.charCodeAt(s),(13===e&&10===n||10===e&&13===n)&&s++}r=s}else s++;return this.remaining=r<i.length?i.substr(r):null,t}end(){return this.remaining}}
t.LineDecoder=n}),define(t[144],i([1,0,208,2,37,207]),function(e,t,i,r,s,o){"use strict";function a(e,t){return t.minBytesRequiredForDetection||(t.minBytesRequiredForDetection=t.guessEncoding?p:f),new Promise((n,r)=>{const s=new class extends o.Writable{constructor(){super(...arguments),this.bufferedChunks=[],this.bytesBuffered=0}_write(e,i,n){if(!Buffer.isBuffer(e))return n(new Error("toDecodeStream(): data must be a buffer"));this.decodeStream?this.decodeStream.write(e,n):(this.bufferedChunks.push(e),this.bytesBuffered+=e.byteLength,this.decodeStreamPromise?this.decodeStreamPromise.then(()=>n(null),e=>n(e)):"number"==typeof t.minBytesRequiredForDetection&&this.bytesBuffered>=t.minBytesRequiredForDetection?this._startDecodeStream(n):n(null))}_startDecodeStream(e){this.decodeStreamPromise=Promise.resolve(d({buffer:Buffer.concat(this.bufferedChunks),bytesRead:this.bytesBuffered},t.guessEncoding)).then(r=>{r.encoding=t.overwriteEncoding(r.encoding),this.decodeStream=function(e){return i.decodeStream(c(e))
}(r.encoding),this.decodeStream.write(Buffer.concat(this.bufferedChunks),e),this.bufferedChunks.length=0,n({detected:r,stream:this.decodeStream})},t=>{this.emit("error",t),e(t)})}_final(e){this.decodeStream?this.decodeStream.end(e):this._startDecodeStream(()=>this.decodeStream.end(e))}};e.on("error",r),e.pipe(s)})}function c(e){return e===t.UTF8_with_bom||null===e?t.UTF8:e}function l(e,i){if(!e||i<t.UTF16be_BOM.length)return null;const n=e.readUInt8(0),r=e.readUInt8(1);if(n===t.UTF16be_BOM[0]&&r===t.UTF16be_BOM[1])return t.UTF16be;if(n===t.UTF16le_BOM[0]&&r===t.UTF16le_BOM[1])return t.UTF16le;if(i<t.UTF8_BOM.length)return null;const s=e.readUInt8(2);return n===t.UTF8_BOM[0]&&r===t.UTF8_BOM[1]&&s===t.UTF8_BOM[2]?t.UTF8:null}function u(e){const t=e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();return v[t]||t}function d({buffer:i,bytesRead:r},s){let o=l(i,r),a=!1;if(o!==t.UTF16be&&o!==t.UTF16le&&i){let e=!0,n=!0,s=!1;for(let t=0;t<r&&t<h;t++){const r=t%2==1,o=0===i.readInt8(t);if(o&&(s=!0),e&&(r&&!o||!r&&o)&&(e=!1),
n&&(r&&o||!r&&!o)&&(n=!1),o&&!e&&!n)break}s&&(e?o=t.UTF16le:n?o=t.UTF16be:a=!0)}return s&&!a&&!o&&i?function(t){return n(this,void 0,void 0,function*(){const i=yield new Promise((t,i)=>{e(["jschardet"],t,i)});i.Constants.MINIMUM_THRESHOLD=g;const n=i.detect(t);if(!n||!n.encoding)return null;const r=n.encoding.toLowerCase();return 0<=m.indexOf(r)?null:u(n.encoding)})}(i.slice(0,r)).then(e=>({seemsBinary:!1,encoding:e})):{seemsBinary:a,encoding:o}}Object.defineProperty(t,"__esModule",{value:!0}),t.UTF8="utf8",t.UTF8_with_bom="utf8bom",t.UTF16be="utf16be",t.UTF16le="utf16le",t.isUTFEncoding=function(e){return[t.UTF8,t.UTF8_with_bom,t.UTF16be,t.UTF16le].some(t=>t===e)},t.UTF16be_BOM=[254,255],t.UTF16le_BOM=[255,254],t.UTF8_BOM=[239,187,191];const h=512,f=512,p=4096;t.toDecodeStream=a,t.decode=function(e,t){return i.decode(e,c(t))},t.encode=function(e,t,n){return i.encode(e,c(t),n)},t.encodingExists=function(e){return i.encodingExists(c(e))},t.encodeStream=function(e,t){return i.encodeStream(c(e),t)},
t.detectEncodingByBOMFromBuffer=l;const g=.2,m=["ascii","utf-8","utf-16","utf-32"],v={ibm866:"cp866",big5:"cp950"};t.toCanonicalName=function(e){switch(e){case"shiftjis":return"shift-jis";case"utf16le":return"utf-16le";case"utf16be":return"utf-16be";case"big5hkscs":return"big5-hkscs";case"eucjp":return"euc-jp";case"euckr":return"euc-kr";case"koi8r":return"koi8-r";case"koi8u":return"koi8-u";case"macroman":return"x-mac-roman";case"utf8bom":return"utf8";default:const t=e.match(/windows(\d+)/);return t?"windows-"+t[1]:e}},t.detectEncodingFromBuffer=d;const w={437:"cp437",850:"cp850",852:"cp852",855:"cp855",857:"cp857",860:"cp860",861:"cp861",863:"cp863",865:"cp865",866:"cp866",869:"cp869",936:"cp936",1252:"cp1252"};t.resolveTerminalEncoding=function(e){return n(this,void 0,void 0,function*(){let n;const o=process.env.VSCODE_CLI_ENCODING;o?(e&&console.log(`Found VSCODE_CLI_ENCODING variable: ${o}`),n=Promise.resolve(o)):n=r.isLinux||r.isMacintosh?new Promise(t=>{
e&&console.log('Running "locale charmap" to detect terminal encoding...'),s.exec("locale charmap",(e,i,n)=>t(i))}):new Promise(t=>{e&&console.log('Running "chcp" to detect terminal encoding...'),s.exec("chcp",(e,i,n)=>{if(i){const e=Object.keys(w);for(const n of e)if(i.indexOf(n)>=0)return t(w[n])}return t(void 0)})});const a=yield n;if(e&&console.log(`Detected raw terminal encoding: ${a}`),!a||"utf-8"===a.toLowerCase()||a.toLowerCase()===t.UTF8)return t.UTF8;const c=u(a);return i.encodingExists(c)?c:(e&&console.log("Unsupported terminal encoding, falling back to UTF-8."),t.UTF8)})}}),define(t[182],i([1,0,37,2]),function(e,t,i,r){"use strict";function s(e){let t=e.replace(/\-/g,":").toLowerCase();for(let e of c)if(e===t)return!1;return!0}function o(){return new Promise((e,t)=>n(this,void 0,void 0,function*(){const n=setTimeout(()=>t("Unable to retrieve mac address (timeout after 10s)"),1e4);try{e(yield new Promise((e,t)=>{try{i.exec(r.isWindows?a.windows:a.unix,{timeout:1e4},(i,n,r)=>{
if(i)return t(`Unable to retrieve mac address (${i.toString()})`);{const i=/(?:[a-f\d]{2}[:\-]){5}[a-f\d]{2}/gi;let r;for(;null!==(r=i.exec(n));){const t=r[0];if(s(t))return e(t)}return t("Unable to retrieve mac address (unexpected format)")}})}catch(e){t(e)}}))}catch(e){t(e)}finally{clearTimeout(n)}}))}Object.defineProperty(t,"__esModule",{value:!0});const a={windows:"getmac.exe",unix:"/sbin/ifconfig -a || /sbin/ip link"},c=["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"];t.getMac=o}),define(t[75],i([1,0,18,39,33,27,182]),function(e,t,i,r,s,o,a){"use strict";function c(){return n(this,void 0,void 0,function*(){return l||(l=(()=>n(this,void 0,void 0,function*(){return(yield function(){return n(this,void 0,void 0,function*(){try{const t=yield new Promise((t,i)=>{e(["crypto"],t,i)}),n=yield a.getMac();return t.createHash("sha256").update(n,"utf8").digest("hex")}catch(e){return void i.onUnexpectedError(e)}})}())||r.generateUuid()}))()),l})}Object.defineProperty(t,"__esModule",{value:!0}),
t.virtualMachineHint=new class{_isVirtualMachineMacAdress(e){return this._virtualMachineOUIs||(this._virtualMachineOUIs=o.TernarySearchTree.forStrings(),this._virtualMachineOUIs.set("00-50-56",!0),this._virtualMachineOUIs.set("00-0C-29",!0),this._virtualMachineOUIs.set("00-05-69",!0),this._virtualMachineOUIs.set("00-03-FF",!0),this._virtualMachineOUIs.set("00-1C-42",!0),this._virtualMachineOUIs.set("00-16-3E",!0),this._virtualMachineOUIs.set("08-00-27",!0),this._virtualMachineOUIs.set("00:50:56",!0),this._virtualMachineOUIs.set("00:0C:29",!0),this._virtualMachineOUIs.set("00:05:69",!0),this._virtualMachineOUIs.set("00:03:FF",!0),this._virtualMachineOUIs.set("00:1C:42",!0),this._virtualMachineOUIs.set("00:16:3E",!0),this._virtualMachineOUIs.set("08:00:27",!0)),!!this._virtualMachineOUIs.findSubstr(e)}value(){if(void 0===this._value){let e=0,t=0;const i=s.networkInterfaces();for(let n in i)if(Object.prototype.hasOwnProperty.call(i,n))for(const{mac:r,internal:s}of i[n])s||(t+=1,
this._isVirtualMachineMacAdress(r.toUpperCase())&&(e+=1));this._value=t>0?e/t:0}return this._value}};let l;t.getMachineId=c}),define(t[106],i([1,0,29]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i.getPathFromAmdModule(e,"paths"),r=e.__$__nodeRequire(n);t.getAppDataPath=r.getAppDataPath,t.getDefaultUserDataPath=r.getDefaultUserDataPath}),define(t[17],i([1,0,6,9,20,33,2,4,14,60,32,39,55,144]),function(e,t,i,r,s,o,a,c,l,u,d,h,f,p){"use strict";function g(e,t=O.UNLINK){return n(this,void 0,void 0,function*(){if(d.isRootOrDriveLetter(e))throw new Error("rimraf - will refuse to recursively delete root");return t===O.UNLINK?m(e):function(e){return n(this,void 0,void 0,function*(){try{const t=i.join(o.tmpdir(),h.generateUuid());try{yield C(e,t)}catch(t){return m(e)}m(t)}catch(e){if("ENOENT"!==e.code)throw e}})}(e)})}function m(e){return n(this,void 0,void 0,function*(){try{const t=yield E(e);if(!t.isDirectory()||t.isSymbolicLink()){const i=t.mode
;return 128&i||(yield b(e,128|i)),k(e)}{const t=yield w(e);yield Promise.all(t.map(t=>m(i.join(e,t)))),yield u.promisify(s.rmdir)(e)}}catch(e){if("ENOENT"!==e.code)throw e}})}function v(e){if(d.isRootOrDriveLetter(e))throw new Error("rimraf - will refuse to recursively delete root");try{const t=s.lstatSync(e);if(!t.isDirectory()||t.isSymbolicLink()){const i=t.mode;return 128&i||s.chmodSync(e,128|i),s.unlinkSync(e)}y(e).map(t=>v(i.join(e,t))),s.rmdirSync(e)}catch(e){if("ENOENT"!==e.code)throw e}}function w(e){return n(this,void 0,void 0,function*(){return S(yield u.promisify(s.readdir)(e))})}function y(e){return S(s.readdirSync(e))}function S(e){return a.isMacintosh?e.map(e=>f.normalizeNFC(e)):e}function b(e,t){return u.promisify(s.chmod)(e,t)}function _(e){return u.promisify(s.stat)(e)}function E(e){return u.promisify(s.lstat)(e)}function C(e,t){return u.promisify(s.rename)(e,t)}function k(e){return u.promisify(s.unlink)(e)}function I(e,t,i){return function(e){const t=W.get(e);if(t)return t
;const i=new r.Queue;W.set(e,i);return c.Event.once(i.onFinished)(()=>{W.delete(e),i.dispose()}),i}(function(e){let t=e;(a.isWindows||a.isMacintosh)&&(t=t.toLowerCase());return t}(e)).queue(()=>(function(e,t,i){const n=P(i);return new Promise((i,r)=>{"string"==typeof t||Buffer.isBuffer(t)||t instanceof Uint8Array?function(e,t,i,n){i.encoding&&(t=p.encode(t instanceof Uint8Array?Buffer.from(t):t,i.encoding.charset,{addBOM:i.encoding.addBOM}));if(!L)return s.writeFile(e,t,{mode:i.mode,flag:i.flag},n);s.open(e,i.flag,i.mode,(e,i)=>{if(e)return n(e);s.writeFile(i,t,e=>{if(e)return s.close(i,()=>n(e));s.fdatasync(i,e=>(e&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",e),L=!1),s.close(i,e=>n(e))))})})}(e,t,n,e=>e?r(e):i()):function(e,t,i,n){let r=!1;const o=e=>{r||(r=!0,e?l?(a.once("close",()=>n(e)),a.destroy()):n(e):n())},a=s.createWriteStream(e,{mode:i.mode,flags:i.flag,autoClose:!1});let c,l;a.once("open",e=>{c=e,l=!0,
i.encoding&&(t=t.pipe(p.encodeStream(i.encoding.charset,{addBOM:i.encoding.addBOM}))),t.pipe(a)}),t.once("error",e=>o(e)),a.once("error",e=>o(e)),a.once("finish",()=>{L&&l?s.fdatasync(c,e=>{e&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",e),L=!1),a.destroy()}):a.destroy()}),a.once("close",()=>o())}(e,t,n,e=>e?r(e):i())})})(e,t,i))}function P(e){return e?{mode:"number"==typeof e.mode?e.mode:438,flag:"string"==typeof e.flag?e.flag:"w",encoding:e.encoding}:{mode:438,flag:"w"}}function M(e){return n(this,void 0,void 0,function*(){try{return(yield _(e)).isDirectory()}catch(e){return!1}})}function A(e,t,r){return n(this,void 0,void 0,function*(){const o=r||Object.create(null),a=yield _(e);if(!a.isDirectory())return function(e,t,i){return n(this,void 0,void 0,function*(){return new Promise((n,r)=>{const o=s.createReadStream(e),a=s.createWriteStream(t,{mode:i});let c=!1;const l=e=>{if(!c){if(c=!0,e)return r(e);s.chmod(t,i,e=>e?r(e):n())}};o.once("error",e=>l(e)),
a.once("error",e=>l(e)),a.once("close",()=>l()),o.pipe(a)})})}(e,t,511&a.mode);if(o[e])return Promise.resolve();o[e]=!0,yield D(t,511&a.mode);const c=yield w(e);for(let n=0;n<c.length;n++){const r=c[n];yield A(i.join(e,r),i.join(t,r),o)}})}function D(e,t,r){return n(this,void 0,void 0,function*(){const o=()=>n(this,void 0,void 0,function*(){try{yield u.promisify(s.mkdir)(e,t)}catch(t){if("ENOENT"===t.code)return Promise.reject(t);try{if(!(yield _(e)).isDirectory())return Promise.reject(new Error(`'${e}' exists and is not a directory.`))}catch(e){throw t}}});if(e===i.dirname(e))return Promise.resolve();try{yield o()}catch(n){return r&&r.isCancellationRequested?Promise.resolve():"ENOENT"===n.code?(yield D(i.dirname(e),t),o()):Promise.reject(n)}})}Object.defineProperty(t,"__esModule",{value:!0});var O;!function(e){e[e.UNLINK=0]="UNLINK",e[e.MOVE=1]="MOVE"}(O=t.RimRafMode||(t.RimRafMode={})),t.rimraf=g,t.rimrafSync=v,t.readdir=w,t.readdirSync=y,t.exists=function(e){return u.promisify(s.exists)(e)},t.chmod=b,
t.stat=_,t.statLink=function(e){return n(this,void 0,void 0,function*(){let t,i;try{t=yield E(e)}catch(e){i=e}const n=!(!t||!t.isSymbolicLink());return i||n?{stat:yield _(e),isSymbolicLink:n}:{stat:t,isSymbolicLink:!1}})},t.lstat=E,t.rename=C,t.renameIgnoreError=function(e,t){return new Promise(i=>{s.rename(e,t,()=>i())})},t.unlink=k,t.symlink=function(e,t,i){return u.promisify(s.symlink)(e,t,i)},t.truncate=function(e,t){return u.promisify(s.truncate)(e,t)},t.readFile=function(e,t){return u.promisify(s.readFile)(e,t)};const W=new Map;t.writeFile=I;let L=!0;t.writeFileSync=function(e,t,i){const n=P(i);if(n.encoding&&(t=p.encode(t,n.encoding.charset,{addBOM:n.encoding.addBOM})),!L)return s.writeFileSync(e,t,{mode:n.mode,flag:n.flag});const r=s.openSync(e,n.flag,n.mode);try{s.writeFileSync(r,t);try{s.fdatasyncSync(r)}catch(e){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",e),L=!1}}finally{s.closeSync(r)}},t.readDirsInDir=function(e){
return n(this,void 0,void 0,function*(){const t=yield w(e),n=[];for(const r of t)(yield M(i.join(e,r)))&&n.push(r);return n})},t.dirExists=M,t.fileExists=function(e){return n(this,void 0,void 0,function*(){try{return(yield _(e)).isFile()}catch(e){return!1}})},t.whenDeleted=function(e){return new Promise(t=>{let i=!1;const n=setInterval(()=>{i||(i=!0,s.exists(e,e=>{i=!1,e||(clearInterval(n),t(void 0))}))},1e3)})},t.move=function(e,t){return n(this,void 0,void 0,function*(){function i(e){return n(this,void 0,void 0,function*(){const t=yield E(e);if(t.isDirectory()||t.isSymbolicLink())return Promise.resolve();const i=yield u.promisify(s.open)(e,"a");try{yield u.promisify(s.futimes)(i,t.atime,new Date)}catch(e){}return u.promisify(s.close)(i)})}if(e===t)return Promise.resolve();try{yield C(e,t),yield i(t)}catch(n){if(!(e.toLowerCase()!==t.toLowerCase()&&"EXDEV"===n.code||l.endsWith(e,".")))throw n;yield A(e,t),yield g(e,O.MOVE),yield i(t)}})},t.copy=A,t.mkdirp=D
;t.MAX_FILE_SIZE="ia32"===process.arch?314572800:17179869184,t.MAX_HEAP_SIZE="ia32"===process.arch?734003200:1468006400}),define(t[68],i([1,0,20,14,6,17,60]),function(e,t,i,r,s,o,a){"use strict";function c(e){const t=s.dirname(e);if(e===t)return e;const i=(s.basename(e)||e).toLowerCase();try{const e=o.readdirSync(t).filter(e=>e.toLowerCase()===i);if(1===e.length){const i=c(t);if(i)return s.join(i,e[0])}else if(e.length>1){const n=e.indexOf(i);if(n>=0){const i=c(t);if(i)return s.join(i,e[n])}}}catch(e){}return null}function l(e){return r.rtrim(s.normalize(e),s.sep)}Object.defineProperty(t,"__esModule",{value:!0}),t.realcaseSync=c,t.realpath=function(e){return n(this,void 0,void 0,function*(){try{return yield a.promisify(i.realpath)(e)}catch(t){const n=l(e);return yield a.promisify(i.access)(n,i.constants.R_OK),n}})},t.realpathSync=function(e){try{return i.realpathSync(e)}catch(t){const n=l(e);return i.accessSync(n,i.constants.R_OK),n}}}),define(t[69],i([1,0,37,29]),function(e,t,i,n){"use strict"
;function r(e,t){const i=/^\s*([0-9]+)\s+([0-9]+)\s+([0-9]+\.[0-9]+)\s+([0-9]+\.[0-9]+)\s+(.+)$/,n=e.toString().split("\n");for(const e of n){const n=i.exec(e.trim());n&&6===n.length&&t(parseInt(n[1]),parseInt(n[2]),n[5],parseFloat(n[3]),parseFloat(n[4]))}}Object.defineProperty(t,"__esModule",{value:!0}),t.listProcesses=function(t){return new Promise((s,o)=>{function a(e,i,n,r,s){const o=u.get(i);if(e===t||o){const a={name:c(n),cmd:n,pid:e,ppid:i,load:r,mem:s};u.set(e,a),e===t&&(l=a),o&&(o.children||(o.children=[]),o.children.push(a),o.children.length>1&&(o.children=o.children.sort((e,t)=>e.pid-t.pid)))}}function c(e){const t=/--disable-blink-features=Auxclick/;if(/\\watcher\\win32\\CodeHelper\.exe/.exec(e))return"watcherService ";if(/--crashes-directory/.exec(e))return"electron-crash-reporter";if(/\\pipe\\winpty-control/.exec(e))return"winpty-process";if(/conhost\.exe/.exec(e))return"console-window-host (Windows internal process)";let i=/--type=([a-zA-Z-]+)/.exec(e)
;if(i&&2===i.length)return"renderer"===i[1]?t.exec(e)?"shared-process":"window":i[1];const n=/[a-zA-Z-]+\.js/g;let r="";do{(i=n.exec(e))&&(r+=i+" ")}while(i);return r&&e.indexOf("node ")<0&&e.indexOf("node.exe")<0?`electron_node ${r}`:e}let l;const u=new Map;if("win32"===process.platform)new Promise((t,i)=>{e(["windows-process-tree"],t,i)}).then(e=>{e.getProcessList(t,i=>{e.getProcessCpuUsage(i,e=>{const i=new Map;e.forEach(e=>{const t=(e=>0===e.indexOf("\\\\?\\")?e.substr(4):0===e.indexOf("\\??\\")?e.substr(4):0===e.indexOf('"\\\\?\\')?'"'+e.substr(5):0===e.indexOf('"\\??\\')?'"'+e.substr(5):e)(e.commandLine||"");i.set(e.pid,{name:c(t),cmd:t,pid:e.pid,ppid:e.ppid,load:e.cpu||0,mem:e.memory||0})}),(l=i.get(t))?(i.forEach(e=>{const t=i.get(e.ppid);t&&(t.children||(t.children=[]),t.children.push(e))}),i.forEach(e=>{e.children&&(e.children=e.children.sort((e,t)=>e.pid-t.pid))}),s(l)):o(new Error(`Root process ${t} not found`))})},e.ProcessDataFlag.CommandLine|e.ProcessDataFlag.Memory)});else{function d(){
let t=[l];const r=[];for(;t.length;){const e=t.shift();e&&(r.push(e.pid),e.children&&(t=t.concat(e.children)))}let a=JSON.stringify(n.getPathFromAmdModule(e,"vs/base/node/cpuUsage.sh"));a+=" "+r.join(" "),i.exec(a,{},(e,t,i)=>{if(e||i)o(e||new Error(i.toString()));else{const e=t.toString().split("\n");for(let t=0;t<r.length;t++)u.get(r[t]).load=parseFloat(e[t]);s(l)}})}i.exec("which ps",{},(t,c,u)=>{if(t||u)if("linux"!==process.platform)o(t||new Error(u.toString()));else{const t=JSON.stringify(n.getPathFromAmdModule(e,"vs/base/node/ps.sh"));i.exec(t,{},(e,t,i)=>{e||i?o(e||new Error(i.toString())):(r(t,a),d())})}else{const e=c.toString().trim();i.exec(`${e} -ax -o pid=,ppid=,pcpu=,pmem=,command=`,{maxBuffer:1024e3,env:{LC_NUMERIC:"en_US.UTF-8"}},(e,t,i)=>{e||i?o(e||new Error(i.toString())):(r(t,a),"linux"===process.platform?d():s(l))})}})}})}}),define(t[70],i([1,0,6,20,2,55,3,17]),function(e,t,i,r,s,o,a,c){"use strict";function l(e,u,d){const h=i.basename(e.path),f=new Map;let p=!1,g=[a.toDisposable(()=>{
f.forEach(e=>a.dispose(e)),f.clear()})];try{const m=r.watch(e.path);g.push(a.toDisposable(()=>{m.removeAllListeners(),m.close()}));const v=new Set;e.isDirectory&&c.readdir(e.path).then(e=>e.forEach(e=>v.add(e))),m.on("error",(t,i)=>{p||d(`Failed to watch ${e.path} for changes using fs.watch() (${t}, ${i})`)}),m.on("change",(r,m)=>{if(p)return;let w="";if(m&&(w=m.toString(),s.isMacintosh&&(w=o.normalizeNFC(w))),!w||"change"!==r&&"rename"!==r)return;const y=e.isDirectory?i.join(e.path,w):e.path;if(e.isDirectory)if("rename"===r){const e=f.get(y);e&&a.dispose(e);const i=setTimeout(()=>n(this,void 0,void 0,function*(){f.delete(y);const e=yield c.exists(y);if(p)return;let t;e?v.has(w)?t="changed":(t="added",v.add(w)):(v.delete(w),t="deleted"),u(t,y)}),t.CHANGE_BUFFER_DELAY);f.set(y,a.toDisposable(()=>clearTimeout(i)))}else{let e;v.has(w)?e="changed":(e="added",v.add(w)),u(e,y)}else if("rename"===r||w!==h){const i=setTimeout(()=>n(this,void 0,void 0,function*(){const t=yield c.exists(y);p||(t?(u("changed",y),
g=[l(e,u,d)]):u("deleted",y))}),t.CHANGE_BUFFER_DELAY);a.dispose(g),g=[a.toDisposable(()=>clearTimeout(i))]}else u("changed",y)})}catch(t){c.exists(e.path).then(i=>{i&&!p&&d(`Failed to watch ${e.path} for changes using fs.watch() (${t.toString()})`)})}return a.toDisposable(()=>{p=!0,g=a.dispose(g)})}Object.defineProperty(t,"__esModule",{value:!0}),t.watchFile=function(e,t,i){return l({path:e,isDirectory:!1},t,i)},t.watchFolder=function(e,t,i){return l({path:e,isDirectory:!0},t,i)},t.CHANGE_BUFFER_DELAY=100}),define(t[119],i([1,0,20,6,15,3,4,42,17,68,70]),function(e,t,i,r,s,o,a,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class h extends o.Disposable{constructor(e,t={defaultConfig:Object.create(null),onError:e=>console.error(e)}){super(),this._path=e,this.options=t,this._onDidUpdateConfiguration=this._register(new a.Emitter),this.registerWatcher(),this.initAsync()}get path(){return this._path}get hasParseErrors(){return this.parseErrors&&this.parseErrors.length>0}
get onDidUpdateConfiguration(){return this._onDidUpdateConfiguration.event}initAsync(){this.loadAsync(e=>{this.loaded||this.updateCache(e),this.options.initCallback&&this.options.initCallback(this.getConfig())})}updateCache(e){this.cache=e,this.loaded=!0}loadSync(){try{return this.parse(i.readFileSync(this._path).toString())}catch(e){return this.options.defaultConfig}}loadAsync(e){i.readFile(this._path,(t,i)=>e(t?this.options.defaultConfig:this.parse(i.toString())))}parse(e){let t;try{return this.parseErrors=[],(t=this.options.parse?this.options.parse(e,this.parseErrors):c.parse(e,this.parseErrors))||this.options.defaultConfig}catch(e){return this.options.defaultConfig}}registerWatcher(){const e=r.dirname(this._path);this.watch(e,!0),this.handleSymbolicLink().then(void 0,()=>{})}handleSymbolicLink(){return n(this,void 0,void 0,function*(){const{stat:e,isSymbolicLink:t}=yield l.statLink(this._path);if(t&&!e.isDirectory()){const e=yield u.realpath(this._path);this.watch(e,!1)}})}watch(e,t){
this.disposed||(t?this._register(d.watchFolder(e,(e,t)=>t===this._path?this.onConfigFileChange():void 0,e=>this.options.onError(e))):this._register(d.watchFile(e,()=>this.onConfigFileChange(),e=>this.options.onError(e))))}onConfigFileChange(){this.timeoutHandle&&(global.clearTimeout(this.timeoutHandle),this.timeoutHandle=null),this.timeoutHandle=global.setTimeout(()=>this.reload(),this.options.changeBufferDelay||0)}reload(e){this.loadAsync(t=>{if(s.equals(t,this.cache)||(this.updateCache(t),this._onDidUpdateConfiguration.fire({config:this.cache})),e)return e(t)})}getConfig(){return this.ensureLoaded(),this.cache}ensureLoaded(){this.loaded||this.updateCache(this.loadSync())}dispose(){this.disposed=!0,super.dispose()}}t.ConfigWatcher=h}),define(t[121],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_MENU_CHANNEL="vscode:contextmenu",t.CONTEXT_MENU_CLOSE_CHANNEL="vscode:onCloseContextMenu"}),define(t[123],i([1,0,13,121]),function(e,t,i,n){"use strict"
;function r(e,t,n){const s=new i.Menu;return n.forEach(n=>{let o;o="separator"===n.type?new i.MenuItem({type:n.type}):Array.isArray(n.submenu)?new i.MenuItem({submenu:r(e,t,n.submenu),label:n.label}):new i.MenuItem({label:n.label,type:n.type,accelerator:n.accelerator,checked:n.checked,enabled:n.enabled,visible:n.visible,click:(i,r,s)=>e.sender.send(t,n.id,s)}),s.append(o)}),s}Object.defineProperty(t,"__esModule",{value:!0}),t.registerContextMenuListener=function(){i.ipcMain.on(n.CONTEXT_MENU_CHANNEL,(e,t,s,o,a)=>{const c=r(e,o,s);c.popup({window:i.BrowserWindow.fromWebContents(e.sender),x:a?a.x:void 0,y:a?a.y:void 0,positioningItem:a?a.positioningItem:void 0,callback:()=>{c&&e.sender.send(n.CONTEXT_MENU_CLOSE_CHANNEL,t)}})})}}),define(t[36],i([1,0,4,3,9,34,18,31]),function(e,t,i,r,s,o,a,c){"use strict";function l(e){const t=c.VSBuffer.alloc(4);return t.writeUInt32BE(e,0),t}function u(e){return e.read(4).readUInt32BE(0)}function d(e){const t=c.VSBuffer.alloc(1);return t.writeUInt8(e,0),t}function h(e,t){
if(void 0===t)e.write(y.Undefined);else if("string"==typeof t){const i=c.VSBuffer.fromString(t);e.write(y.String),e.write(l(i.byteLength)),e.write(i)}else if(S&&Buffer.isBuffer(t)){const i=c.VSBuffer.wrap(t);e.write(y.Buffer),e.write(l(i.byteLength)),e.write(i)}else if(t instanceof c.VSBuffer)e.write(y.VSBuffer),e.write(l(t.byteLength)),e.write(t);else if(Array.isArray(t)){e.write(y.Array),e.write(l(t.length));for(const i of t)h(e,i)}else{const i=c.VSBuffer.fromString(JSON.stringify(t));e.write(y.Object),e.write(l(i.byteLength)),e.write(i)}}function f(e){switch(e.read(1).readUInt8(0)){case w.Undefined:return;case w.String:return e.read(u(e)).toString();case w.Buffer:return e.read(u(e)).buffer;case w.VSBuffer:return e.read(u(e));case w.Array:{const t=u(e),i=[];for(let n=0;n<t;n++)i.push(f(e));return i}case w.Object:return JSON.parse(e.read(u(e)).toString())}}function p(e){return{call:(t,i,n)=>e.then(e=>e.call(t,i,n)),listen(t,n){const r=new i.Relay;return e.then(e=>r.input=e.listen(t,n)),r.event}}}
Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Promise=100]="Promise",e[e.PromiseCancel=101]="PromiseCancel",e[e.EventListen=102]="EventListen",e[e.EventDispose=103]="EventDispose"}(t.RequestType||(t.RequestType={}));!function(e){e[e.Initialize=200]="Initialize",e[e.PromiseSuccess=201]="PromiseSuccess",e[e.PromiseError=202]="PromiseError",e[e.PromiseErrorObj=203]="PromiseErrorObj",e[e.EventFire=204]="EventFire"}(t.ResponseType||(t.ResponseType={}));var g;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"}(g||(g={}));class m{constructor(e){this.buffer=e,this.pos=0}read(e){const t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=t.byteLength,t}}class v{constructor(){this.buffers=[]}get buffer(){return c.VSBuffer.concat(this.buffers)}write(e){this.buffers.push(e)}}var w;!function(e){e[e.Undefined=0]="Undefined",e[e.String=1]="String",e[e.Buffer=2]="Buffer",e[e.VSBuffer=3]="VSBuffer",e[e.Array=4]="Array",e[e.Object=5]="Object"}(w||(w={}));const y={
Undefined:d(w.Undefined),String:d(w.String),Buffer:d(w.Buffer),VSBuffer:d(w.VSBuffer),Array:d(w.Array),Object:d(w.Object)},S="undefined"!=typeof Buffer;class b{constructor(e,t,i=1e3){this.protocol=e,this.ctx=t,this.timeoutDelay=i,this.channels=new Map,this.activeRequests=new Map,this.pendingRequests=new Map,this.protocolListener=this.protocol.onMessage(e=>this.onRawMessage(e)),this.sendResponse({type:200})}registerChannel(e,t){this.channels.set(e,t),setTimeout(()=>this.flushPendingRequests(e),0)}sendResponse(e){switch(e.type){case 200:return this.send([e.type]);case 201:case 202:case 204:case 203:return this.send([e.type,e.id],e.data)}}send(e,t){const i=new v;h(i,e),h(i,t),this.sendBuffer(i.buffer)}sendBuffer(e){try{this.protocol.send(e)}catch(e){}}onRawMessage(e){const t=new m(e),i=f(t),n=f(t),r=i[0];switch(r){case 100:return this.onPromise({type:r,id:i[1],channelName:i[2],name:i[3],arg:n});case 102:return this.onEventListen({type:r,id:i[1],channelName:i[2],name:i[3],arg:n});case 101:case 103:
return this.disposeActiveRequest({type:r,id:i[1]})}}onPromise(e){const t=this.channels.get(e.channelName);if(!t)return void this.collectPendingRequest(e);const i=new o.CancellationTokenSource;let n;try{n=t.call(this.ctx,e.name,e.arg,i.token)}catch(e){n=Promise.reject(e)}const s=e.id;n.then(t=>{this.sendResponse({id:s,data:t,type:201}),this.activeRequests.delete(e.id)},t=>{t instanceof Error?this.sendResponse({id:s,data:{message:t.message,name:t.name,stack:t.stack?t.stack.split?t.stack.split("\n"):t.stack:void 0},type:202}):this.sendResponse({id:s,data:t,type:203}),this.activeRequests.delete(e.id)});const a=r.toDisposable(()=>i.cancel());this.activeRequests.set(e.id,a)}onEventListen(e){const t=this.channels.get(e.channelName);if(!t)return void this.collectPendingRequest(e);const i=e.id,n=t.listen(this.ctx,e.name,e.arg)(e=>this.sendResponse({id:i,data:e,type:204}));this.activeRequests.set(e.id,n)}disposeActiveRequest(e){const t=this.activeRequests.get(e.id);t&&(t.dispose(),this.activeRequests.delete(e.id))}
collectPendingRequest(e){let t=this.pendingRequests.get(e.channelName);t||(t=[],this.pendingRequests.set(e.channelName,t));const i=setTimeout(()=>{console.error(`Unknown channel: ${e.channelName}`),100===e.type&&this.sendResponse({id:e.id,data:{name:"Unknown channel",message:`Channel name '${e.channelName}' timed out after ${this.timeoutDelay}ms`,stack:void 0},type:202})},this.timeoutDelay);t.push({request:e,timeoutTimer:i})}flushPendingRequests(e){const t=this.pendingRequests.get(e);if(t){for(const e of t)switch(clearTimeout(e.timeoutTimer),e.request.type){case 100:this.onPromise(e.request);break;case 102:this.onEventListen(e.request)}this.pendingRequests.delete(e)}}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),this.activeRequests.forEach(e=>e.dispose()),this.activeRequests.clear()}}t.ChannelServer=b;class _{constructor(e){this.protocol=e,this.state=g.Uninitialized,this.activeRequests=new Set,this.handlers=new Map,this.lastRequestId=0,
this._onDidInitialize=new i.Emitter,this.onDidInitialize=this._onDidInitialize.event,this.protocolListener=this.protocol.onMessage(e=>this.onBuffer(e))}getChannel(e){const t=this;return{call:(i,n,r)=>t.requestPromise(e,i,n,r),listen:(i,n)=>t.requestEvent(e,i,n)}}requestPromise(e,t,i,n=o.CancellationToken.None){const c=this.lastRequestId++,l={id:c,type:100,channelName:e,name:t,arg:i};if(n.isCancellationRequested)return Promise.reject(a.canceled());let u;return new Promise((e,t)=>{if(n.isCancellationRequested)return t(a.canceled());let i=s.createCancelablePromise(e=>this.whenInitialized());i.then(()=>{i=null;this.handlers.set(c,i=>{switch(i.type){case 201:this.handlers.delete(c),e(i.data);break;case 202:this.handlers.delete(c);const n=new Error(i.data.message);n.stack=i.data.stack,n.name=i.data.name,t(n);break;case 203:this.handlers.delete(c),t(i.data)}}),this.sendRequest(l)});const o=()=>{i?(i.cancel(),i=null):this.sendRequest({id:c,type:101}),t(a.canceled())},d=n.onCancellationRequested(o)
;u=r.combinedDisposable(r.toDisposable(o),d),this.activeRequests.add(u)}).finally(()=>this.activeRequests.delete(u))}requestEvent(e,t,n){const r=this.lastRequestId++,o={id:r,type:102,channelName:e,name:t,arg:n};let a=null;const c=new i.Emitter({onFirstListenerAdd:()=>{(a=s.createCancelablePromise(e=>this.whenInitialized())).then(()=>{a=null,this.activeRequests.add(c),this.sendRequest(o)})},onLastListenerRemove:()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(c),this.sendRequest({id:r,type:103}))}});return this.handlers.set(r,e=>c.fire(e.data)),c.event}sendRequest(e){switch(e.type){case 100:case 102:return this.send([e.type,e.id,e.channelName,e.name],e.arg);case 101:case 103:return this.send([e.type,e.id])}}send(e,t){const i=new v;h(i,e),h(i,t),this.sendBuffer(i.buffer)}sendBuffer(e){try{this.protocol.send(e)}catch(e){}}onBuffer(e){const t=new m(e),i=f(t),n=f(t);switch(i[0]){case 200:return this.onResponse({type:i[0]});case 201:case 202:case 204:case 203:return this.onResponse({type:i[0],id:i[1],data:n})
}}onResponse(e){if(200===e.type)return this.state=g.Idle,void this._onDidInitialize.fire();const t=this.handlers.get(e.id);t&&t(e)}whenInitialized(){return this.state===g.Idle?Promise.resolve():i.Event.toPromise(this.onDidInitialize)}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),this.activeRequests.forEach(e=>e.dispose()),this.activeRequests.clear()}}t.ChannelClient=_;class E{constructor(e){this.channels=new Map,this._connections=new Set,this._onDidChangeConnections=new i.Emitter,this.onDidChangeConnections=this._onDidChangeConnections.event,e(({protocol:e,onDidClientDisconnect:t})=>{i.Event.once(e.onMessage)(i=>{const n=f(new m(i)),r=new b(e,n),s=new _(e);this.channels.forEach((e,t)=>r.registerChannel(t,e));const o={channelServer:r,channelClient:s,ctx:n};this._connections.add(o),this._onDidChangeConnections.fire(o),t(()=>{r.dispose(),s.dispose(),this._connections.delete(o)})})})}get connections(){const e=[];return this._connections.forEach(t=>e.push(t)),e}
getChannel(e,t){const i=this;return{call:(n,r,s)=>p(t.routeCall(i,n,r).then(t=>t.channelClient.getChannel(e))).call(n,r,s),listen:(n,r)=>p(t.routeEvent(i,n,r).then(t=>t.channelClient.getChannel(e))).listen(n,r)}}registerChannel(e,t){this.channels.set(e,t),this._connections.forEach(i=>{i.channelServer.registerChannel(e,t)})}dispose(){this.channels.clear(),this._connections.clear(),this._onDidChangeConnections.dispose()}}t.IPCServer=E;class C{constructor(e,t){const i=new v;h(i,t),e.send(i.buffer),this.channelClient=new _(e),this.channelServer=new b(e,t)}getChannel(e){return this.channelClient.getChannel(e)}registerChannel(e,t){this.channelServer.registerChannel(e,t)}dispose(){this.channelClient.dispose(),this.channelServer.dispose()}}t.IPCClient=C,t.getDelayedChannel=p,t.getNextTickChannel=function(e){let t=!1;return{call:(i,n,r)=>t?e.call(i,n,r):s.timeout(0).then(()=>t=!0).then(()=>e.call(i,n,r)),listen(n,r){if(t)return e.listen(n,r);const o=new i.Relay
;return s.timeout(0).then(()=>t=!0).then(()=>o.input=e.listen(n,r)),o.event}}};class k{constructor(e){this.fn=e}routeCall(e){return this.route(e)}routeEvent(e){return this.route(e)}route(e){return n(this,void 0,void 0,function*(){for(const t of e.connections)if(yield Promise.resolve(this.fn(t.ctx)))return Promise.resolve(t);return yield i.Event.toPromise(e.onDidChangeConnections),yield this.route(e)})}}t.StaticRouter=k}),define(t[139],i([1,0,4,36,3,31,2,73]),function(e,t,i,n,r,s,o,a){"use strict";function c(){return l||(l=s.VSBuffer.alloc(0)),l}Object.defineProperty(t,"__esModule",{value:!0});let l=null;class u{get byteLength(){return this._totalLength}constructor(){this._chunks=[],this._totalLength=0}acceptChunk(e){this._chunks.push(e),this._totalLength+=e.byteLength}read(e){return this._read(e,!0)}peek(e){return this._read(e,!1)}_read(e,t){if(0===e)return c();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const i=this._chunks[0]
;return t&&(this._chunks.shift(),this._totalLength-=e),i}if(this._chunks[0].byteLength>e){const i=this._chunks[0].slice(0,e);return t&&(this._chunks[0]=this._chunks[0].slice(e),this._totalLength-=e),i}let i=s.VSBuffer.alloc(e),n=0,r=0;for(;e>0;){const s=this._chunks[r];if(s.byteLength>e){const o=s.slice(0,e);i.set(o,n),n+=e,t&&(this._chunks[r]=s.slice(e),this._totalLength-=e),e-=e}else i.set(s,n),n+=s.byteLength,t?(this._chunks.shift(),this._totalLength-=s.byteLength):r++,e-=s.byteLength}return i}}t.ChunkStream=u;var d;!function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Control=2]="Control",e[e.Ack=3]="Ack",e[e.KeepAlive=4]="KeepAlive",e[e.Disconnect=5]="Disconnect"}(d||(d={}));!function(e){e[e.HeaderLength=13]="HeaderLength",e[e.AcknowledgeTime=2e3]="AcknowledgeTime",e[e.AcknowledgeTimeoutTime=1e4]="AcknowledgeTimeoutTime",e[e.KeepAliveTime=5e3]="KeepAliveTime",e[e.KeepAliveTimeoutTime=1e4]="KeepAliveTimeoutTime",e[e.ReconnectionGraceTime=108e5]="ReconnectionGraceTime"
}(t.ProtocolConstants||(t.ProtocolConstants={}));class h{constructor(e,t,i,n){this.type=e,this.id=t,this.ack=i,this.data=n,this.writtenTime=0}get size(){return this.data.byteLength}}class f extends r.Disposable{constructor(e){super(),this._onMessage=this._register(new i.Emitter),this.onMessage=this._onMessage.event,this._state={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this._socket=e,this._isDisposed=!1,this._incomingData=new u,this._register(this._socket.onData(e=>this.acceptChunk(e))),this.lastReadTime=Date.now()}acceptChunk(e){if(e&&0!==e.byteLength)for(this.lastReadTime=Date.now(),this._incomingData.acceptChunk(e);this._incomingData.byteLength>=this._state.readLen;){const e=this._incomingData.read(this._state.readLen);if(this._state.readHead)this._state.readHead=!1,this._state.readLen=e.readUInt32BE(9),this._state.messageType=e.readUInt8(0),this._state.id=e.readUInt32BE(1),this._state.ack=e.readUInt32BE(5);else{const t=this._state.messageType,i=this._state.id,n=this._state.ack
;if(this._state.readHead=!0,this._state.readLen=13,this._state.messageType=0,this._state.id=0,this._state.ack=0,this._onMessage.fire(new h(t,i,n,e)),this._isDisposed)break}}}readEntireBuffer(){return this._incomingData.read(this._incomingData.byteLength)}dispose(){this._isDisposed=!0,super.dispose()}}class p{constructor(e){this._isDisposed=!1,this._socket=e,this._data=[],this._totalLength=0,this.lastWriteTime=0}dispose(){this.flush(),this._isDisposed=!0}flush(){this._writeNow()}write(e){if(this._isDisposed)return console.warn("Cannot write message in a disposed ProtocolWriter"),void console.warn(e);e.writtenTime=Date.now(),this.lastWriteTime=Date.now();const t=s.VSBuffer.alloc(13);t.writeUInt8(e.type,0),t.writeUInt32BE(e.id,1),t.writeUInt32BE(e.ack,5),t.writeUInt32BE(e.data.byteLength,9),this._writeSoon(t,e.data)}_bufferAdd(e,t){const i=0===this._totalLength;return this._data.push(e,t),this._totalLength+=e.byteLength+t.byteLength,i}_bufferTake(){const e=s.VSBuffer.concat(this._data,this._totalLength)
;return this._data.length=0,this._totalLength=0,e}_writeSoon(e,t){this._bufferAdd(e,t)&&o.setImmediate(()=>{this._writeNow()})}_writeNow(){0!==this._totalLength&&this._socket.write(this._bufferTake())}}class g extends r.Disposable{constructor(e){super(),this._onMessage=new i.Emitter,this.onMessage=this._onMessage.event,this._onClose=new i.Emitter,this.onClose=this._onClose.event,this._socket=e,this._socketWriter=this._register(new p(this._socket)),this._socketReader=this._register(new f(this._socket)),this._register(this._socketReader.onMessage(e=>{1===e.type&&this._onMessage.fire(e.data)})),this._register(this._socket.onClose(()=>this._onClose.fire()))}getSocket(){return this._socket}sendDisconnect(){}send(e){this._socketWriter.write(new h(1,0,0,e))}}t.Protocol=g;class m extends n.IPCClient{constructor(e,t){super(e,t),this.protocol=e}static fromSocket(e,t){return new m(new g(e),t)}get onClose(){return this.protocol.onClose}dispose(){super.dispose();const e=this.protocol.getSocket()
;this.protocol.sendDisconnect(),this.protocol.dispose(),e.end()}}t.Client=m;class v{constructor(){this._hasListeners=!1,this._isDeliveringMessages=!1,this._bufferedMessages=[],this._emitter=new i.Emitter({onFirstListenerAdd:()=>{this._hasListeners=!0,a.nextTick(()=>this._deliverMessages())},onLastListenerRemove:()=>{this._hasListeners=!1}}),this.event=this._emitter.event}_deliverMessages(){if(!this._isDeliveringMessages){for(this._isDeliveringMessages=!0;this._hasListeners&&this._bufferedMessages.length>0;)this._emitter.fire(this._bufferedMessages.shift());this._isDeliveringMessages=!1}}fire(e){this._hasListeners?this._bufferedMessages.length>0?this._bufferedMessages.push(e):this._emitter.fire(e):this._bufferedMessages.push(e)}flushBuffer(){this._bufferedMessages=[]}}t.BufferedEmitter=v;class w{constructor(e){this.data=e,this.next=null}}class y{constructor(){this._first=null,this._last=null}peek(){return this._first?this._first.data:null}toArray(){let e=[],t=0,i=this._first;for(;i;)e[t++]=i.data,i=i.next
;return e}pop(){if(this._first)return this._first===this._last?(this._first=null,void(this._last=null)):void(this._first=this._first.next)}push(e){const t=new w(e);if(!this._first)return this._first=t,void(this._last=t);this._last.next=t,this._last=t}}class S{constructor(e,t=null){this._onControlMessage=new v,this.onControlMessage=this._onControlMessage.event,this._onMessage=new v,this.onMessage=this._onMessage.event,this._onClose=new v,this.onClose=this._onClose.event,this._onSocketClose=new v,this.onSocketClose=this._onSocketClose.event,this._onSocketTimeout=new v,this.onSocketTimeout=this._onSocketTimeout.event,this._isReconnecting=!1,this._outgoingUnackMsg=new y,this._outgoingMsgId=0,this._outgoingAckId=0,this._outgoingAckTimeout=null,this._incomingMsgId=0,this._incomingAckId=0,this._incomingMsgLastTime=0,this._incomingAckTimeout=null,this._outgoingKeepAliveTimeout=null,this._incomingKeepAliveTimeout=null,this._socketDisposables=[],this._socket=e,this._socketWriter=new p(this._socket),
this._socketDisposables.push(this._socketWriter),this._socketReader=new f(this._socket),this._socketDisposables.push(this._socketReader),this._socketDisposables.push(this._socketReader.onMessage(e=>this._receiveMessage(e))),this._socketDisposables.push(this._socket.onClose(()=>this._onSocketClose.fire())),t&&this._socketReader.acceptChunk(t),this._sendKeepAliveCheck(),this._recvKeepAliveCheck()}get unacknowledgedCount(){return this._outgoingMsgId-this._outgoingAckId}dispose(){this._outgoingAckTimeout&&(clearTimeout(this._outgoingAckTimeout),this._outgoingAckTimeout=null),this._incomingAckTimeout&&(clearTimeout(this._incomingAckTimeout),this._incomingAckTimeout=null),this._outgoingKeepAliveTimeout&&(clearTimeout(this._outgoingKeepAliveTimeout),this._outgoingKeepAliveTimeout=null),this._incomingKeepAliveTimeout&&(clearTimeout(this._incomingKeepAliveTimeout),this._incomingKeepAliveTimeout=null),this._socketDisposables=r.dispose(this._socketDisposables)}sendDisconnect(){const e=new h(5,0,0,c())
;this._socketWriter.write(e),this._socketWriter.flush()}_sendKeepAliveCheck(){if(this._outgoingKeepAliveTimeout)return;const e=Date.now()-this._socketWriter.lastWriteTime;if(e>=5e3){const e=new h(4,0,0,c());return this._socketWriter.write(e),void this._sendKeepAliveCheck()}this._outgoingKeepAliveTimeout=setTimeout(()=>{this._outgoingKeepAliveTimeout=null,this._sendKeepAliveCheck()},5e3-e+5)}_recvKeepAliveCheck(){if(this._incomingKeepAliveTimeout)return;const e=Date.now()-this._socketReader.lastReadTime;e>=1e4?this._onSocketTimeout.fire(void 0):this._incomingKeepAliveTimeout=setTimeout(()=>{this._incomingKeepAliveTimeout=null,this._recvKeepAliveCheck()},1e4-e+5)}getSocket(){return this._socket}beginAcceptReconnection(e,t){this._isReconnecting=!0,this._socketDisposables=r.dispose(this._socketDisposables),this._onControlMessage.flushBuffer(),this._onSocketClose.flushBuffer(),this._onSocketTimeout.flushBuffer(),this._socket.dispose(),this._socket=e,this._socketWriter=new p(this._socket),
this._socketDisposables.push(this._socketWriter),this._socketReader=new f(this._socket),this._socketDisposables.push(this._socketReader),this._socketDisposables.push(this._socketReader.onMessage(e=>this._receiveMessage(e))),this._socketDisposables.push(this._socket.onClose(()=>this._onSocketClose.fire())),this._socketReader.acceptChunk(t)}endAcceptReconnection(){this._isReconnecting=!1;const e=this._outgoingUnackMsg.toArray();for(let t=0,i=e.length;t<i;t++)this._socketWriter.write(e[t]);this._recvAckCheck(),this._sendKeepAliveCheck(),this._recvKeepAliveCheck()}acceptDisconnect(){this._onClose.fire()}_receiveMessage(e){if(e.ack>this._outgoingAckId)for(this._outgoingAckId=e.ack;;){const t=this._outgoingUnackMsg.peek();if(!(t&&t.id<=e.ack))break;this._outgoingUnackMsg.pop()}1===e.type?e.id>this._incomingMsgId&&(e.id!==this._incomingMsgId+1&&console.error(`PROTOCOL CORRUPTION, LAST SAW MSG ${this._incomingMsgId} AND HAVE NOW RECEIVED MSG ${e.id}`),this._incomingMsgId=e.id,this._incomingMsgLastTime=Date.now(),
this._sendAckCheck(),this._onMessage.fire(e.data)):2===e.type?this._onControlMessage.fire(e.data):5===e.type&&this._onClose.fire()}readEntireBuffer(){return this._socketReader.readEntireBuffer()}flush(){this._socketWriter.flush()}send(e){const t=++this._outgoingMsgId;this._incomingAckId=this._incomingMsgId;const i=new h(1,t,this._incomingAckId,e);this._outgoingUnackMsg.push(i),this._isReconnecting||(this._socketWriter.write(i),this._recvAckCheck())}sendControl(e){const t=new h(2,0,0,e);this._socketWriter.write(t)}_sendAckCheck(){if(this._incomingMsgId<=this._incomingAckId)return;if(this._incomingAckTimeout)return;const e=Date.now()-this._incomingMsgLastTime;e>=2e3?this._sendAck():this._incomingAckTimeout=setTimeout(()=>{this._incomingAckTimeout=null,this._sendAckCheck()},2e3-e+5)}_recvAckCheck(){if(this._outgoingMsgId<=this._outgoingAckId)return;if(this._outgoingAckTimeout)return;const e=this._outgoingUnackMsg.peek(),t=Date.now()-e.writtenTime
;t>=1e4?this._onSocketTimeout.fire(void 0):this._outgoingAckTimeout=setTimeout(()=>{this._outgoingAckTimeout=null,this._recvAckCheck()},1e4-t+5)}_sendAck(){if(this._incomingMsgId<=this._incomingAckId)return;this._incomingAckId=this._incomingMsgId;const e=new h(3,0,this._incomingAckId,c());this._socketWriter.write(e)}}t.PersistentProtocol=S}),define(t[140],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){this.sender=e,this.onMessage=t}send(e){try{this.sender.send("ipc:message",e.buffer)}catch(e){}}dispose(){this.sender.send("ipc:disconnect",null)}}t.Protocol=i}),define(t[142],i([1,0,4,36,140,13,3,31]),function(e,t,i,n,r,s,o,a){"use strict";function c(e,t){const n=i.Event.fromNodeEventEmitter(s.ipcMain,t,(e,t)=>({event:e,message:t})),r=i.Event.filter(n,({event:t})=>t.sender.id===e);return i.Event.map(r,({message:e})=>e?a.VSBuffer.wrap(e):e)}Object.defineProperty(t,"__esModule",{value:!0});class l extends n.IPCServer{constructor(){
super(l.getOnDidClientConnect())}static getOnDidClientConnect(){const e=i.Event.fromNodeEventEmitter(s.ipcMain,"ipc:hello",({sender:e})=>e);return i.Event.map(e,e=>{const t=e.id,n=l.Clients.get(t);n&&n.dispose();const s=new i.Emitter;l.Clients.set(t,o.toDisposable(()=>s.fire()));const a=c(t,"ipc:message"),u=i.Event.any(i.Event.signal(c(t,"ipc:disconnect")),s.event);return{protocol:new r.Protocol(e,a),onDidClientDisconnect:u}})}}l.Clients=new Map,t.Server=l}),define(t[51],i([1,0,206,4,36,6,33,39,3,31,139]),function(e,t,i,n,r,s,o,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class d{constructor(e){this.socket=e}dispose(){this.socket.destroy()}onData(e){const t=t=>e(l.VSBuffer.wrap(t));return this.socket.on("data",t),{dispose:()=>this.socket.off("data",t)}}onClose(e){return this.socket.on("close",e),{dispose:()=>this.socket.off("close",e)}}onEnd(e){return this.socket.on("end",e),{dispose:()=>this.socket.off("end",e)}}write(e){this.socket.destroyed||this.socket.write(e.buffer)}end(){
this.socket.end()}}t.NodeSocket=d;var h;!function(e){e[e.MinHeaderByteSize=2]="MinHeaderByteSize"}(h||(h={}));var f;!function(e){e[e.PeekHeader=1]="PeekHeader",e[e.ReadHeader=2]="ReadHeader",e[e.ReadBody=3]="ReadBody",e[e.Fin=4]="Fin"}(f||(f={}));class p extends c.Disposable{constructor(e){super(),this._onData=this._register(new n.Emitter),this._state={state:1,readLen:2,mask:0},this.socket=e,this._incomingData=new u.ChunkStream,this._register(this.socket.onData(e=>this._acceptChunk(e)))}dispose(){this.socket.dispose()}onData(e){return this._onData.event(e)}onClose(e){return this.socket.onClose(e)}onEnd(e){return this.socket.onEnd(e)}write(e){let t=2;e.byteLength<126?t+=0:e.byteLength<Math.pow(2,16)?t+=2:t+=8;const i=l.VSBuffer.alloc(t);if(i.writeUInt8(130,0),e.byteLength<126)i.writeUInt8(e.byteLength,1);else if(e.byteLength<Math.pow(2,16)){i.writeUInt8(126,1);let t=1;i.writeUInt8(e.byteLength>>>8&255,++t),i.writeUInt8(e.byteLength>>>0&255,++t)}else{i.writeUInt8(127,1);let t=1;i.writeUInt8(0,++t),
i.writeUInt8(0,++t),i.writeUInt8(0,++t),i.writeUInt8(0,++t),i.writeUInt8(e.byteLength>>>24&255,++t),i.writeUInt8(e.byteLength>>>16&255,++t),i.writeUInt8(e.byteLength>>>8&255,++t),i.writeUInt8(e.byteLength>>>0&255,++t)}this.socket.write(l.VSBuffer.concat([i,e]))}end(){this.socket.end()}_acceptChunk(e){if(0!==e.byteLength)for(this._incomingData.acceptChunk(e);this._incomingData.byteLength>=this._state.readLen;)if(1===this._state.state){const e=this._incomingData.peek(this._state.readLen).readUInt8(1),t=(128&e)>>>7,i=127&e;this._state.state=2,this._state.readLen=2+(t?4:0)+(126===i?2:0)+(127===i?8:0),this._state.mask=0}else if(2===this._state.state){const e=this._incomingData.read(this._state.readLen),t=e.readUInt8(1),i=(128&t)>>>7;let n=127&t,r=1;126===n?n=e.readUInt8(++r)*Math.pow(2,8)+e.readUInt8(++r):127===n&&(n=0*e.readUInt8(++r)+0*e.readUInt8(++r)+0*e.readUInt8(++r)+0*e.readUInt8(++r)+e.readUInt8(++r)*Math.pow(2,24)+e.readUInt8(++r)*Math.pow(2,16)+e.readUInt8(++r)*Math.pow(2,8)+e.readUInt8(++r));let s=0
;i&&(s=e.readUInt8(++r)*Math.pow(2,24)+e.readUInt8(++r)*Math.pow(2,16)+e.readUInt8(++r)*Math.pow(2,8)+e.readUInt8(++r)),this._state.state=3,this._state.readLen=n,this._state.mask=s}else if(3===this._state.state){const e=this._incomingData.read(this._state.readLen);!function(e,t){if(0===t)return;let i=e.byteLength>>>2;for(let n=0;n<i;n++){const i=e.readUInt32BE(4*n);e.writeUInt32BE(i^t,4*n)}let n=4*i,r=e.byteLength-n;const s=t>>>24&255,o=t>>>16&255,a=t>>>8&255;r>=1&&e.writeUInt8(e.readUInt8(n)^s,n),r>=2&&e.writeUInt8(e.readUInt8(n+1)^o,n+1),r>=3&&e.writeUInt8(e.readUInt8(n+2)^a,n+2)}(e,this._state.mask),this._state.state=1,this._state.readLen=2,this._state.mask=0,this._onData.fire(e)}}}t.WebSocketNodeSocket=p,t.generateRandomPipeName=function(){const e=a.generateUuid();return"win32"===process.platform?`\\\\.\\pipe\\vscode-ipc-${e}-sock`:s.join(o.tmpdir(),`vscode-ipc-${e}.sock`)};class g extends r.IPCServer{static toClientConnectionEvent(e){const t=n.Event.fromNodeEventEmitter(e,"connection")
;return n.Event.map(t,e=>({protocol:new u.Protocol(new d(e)),onDidClientDisconnect:n.Event.once(n.Event.fromNodeEventEmitter(e,"close"))}))}constructor(e){super(g.toClientConnectionEvent(e)),this.server=e}dispose(){super.dispose(),this.server&&(this.server.close(),this.server=null)}}t.Server=g,t.serve=function(e){return new Promise((t,n)=>{const r=i.createServer();r.on("error",n),r.listen(e,()=>{r.removeListener("error",n),t(new g(r))})})},t.connect=function(e,t){return new Promise((n,r)=>{const s=i.createConnection(e,()=>{s.removeListener("error",r),n(u.Client.fromSocket(new d(s),t))});s.once("error",r)})}}),define(t[148],i([1,0,3,4,9,19]),function(e,t,i,r,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a;!function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST"}(a=t.StorageHint||(t.StorageHint={}));var c;!function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"}(c||(c={}));class l extends i.Disposable{constructor(e,t=Object.create(null)){
super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new r.Emitter),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=c.None,this.cache=new Map,this.pendingDeletes=new Set,this.pendingInserts=new Map,this.flushDelayer=this._register(new s.ThrottledDelayer(l.DEFAULT_FLUSH_DELAY)),this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){e.items.forEach((e,t)=>this.accept(t,e))}accept(e,t){if(this.state===c.Closed)return;let i=!1;if(o.isUndefinedOrNull(t))i=this.cache.delete(e);else{this.cache.get(e)!==t&&(this.cache.set(e,t),i=!0)}i&&this._onDidChangeStorage.fire(e)}get items(){return this.cache}get size(){return this.cache.size}init(){return n(this,void 0,void 0,function*(){return this.state!==c.None?Promise.resolve():(this.state=c.Initialized,this.options.hint===a.STORAGE_DOES_NOT_EXIST?Promise.resolve():void(this.cache=yield this.database.getItems()))})}
get(e,t){const i=this.cache.get(e);return o.isUndefinedOrNull(i)?t:i}getBoolean(e,t){const i=this.get(e);return o.isUndefinedOrNull(i)?t:"true"===i}getNumber(e,t){const i=this.get(e);return o.isUndefinedOrNull(i)?t:parseInt(i,10)}set(e,t){if(this.state===c.Closed)return Promise.resolve();if(o.isUndefinedOrNull(t))return this.delete(e);const i=String(t);return this.cache.get(e)===i?Promise.resolve():(this.cache.set(e,i),this.pendingInserts.set(e,i),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending()))}delete(e){if(this.state===c.Closed)return Promise.resolve();return this.cache.delete(e)?(this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.flushDelayer.trigger(()=>this.flushPending())):Promise.resolve()}close(){return n(this,void 0,void 0,function*(){if(this.state===c.Closed)return Promise.resolve();this.state=c.Closed;try{yield this.flushDelayer.trigger(()=>this.flushPending(),0)
}catch(e){}yield this.database.close(()=>this.cache)})}flushPending(){if(0===this.pendingInserts.size&&0===this.pendingDeletes.size)return Promise.resolve();const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e)}}l.DEFAULT_FLUSH_DELAY=100,t.Storage=l;class u{constructor(){this.onDidChangeItemsExternal=r.Event.None,this.items=new Map}getItems(){return Promise.resolve(this.items)}updateItems(e){return e.insert&&e.insert.forEach((e,t)=>this.items.set(t,e)),e.delete&&e.delete.forEach(e=>this.items.delete(e)),Promise.resolve()}close(){return Promise.resolve()}}t.InMemoryStorageDatabase=u}),define(t[149],i([1,0,4,9,27,6,17,25]),function(e,t,i,r,s,o,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class l{constructor(e,t=Object.create(null)){this.path=e,this.name=o.basename(e),this.logger=new u(t.logging),this.whenConnected=this.connect(e)}get onDidChangeItemsExternal(){return i.Event.None}
getItems(){return n(this,void 0,void 0,function*(){const e=yield this.whenConnected,t=new Map;return(yield this.all(e,"SELECT * FROM ItemTable")).forEach(e=>t.set(e.key,e.value)),this.logger.isTracing&&this.logger.trace(`[storage ${this.name}] getItems(): ${t.size} rows`),t})}updateItems(e){return n(this,void 0,void 0,function*(){const t=yield this.whenConnected;return this.doUpdateItems(t,e)})}doUpdateItems(e,t){return this.logger.isTracing&&this.logger.trace(`[storage ${this.name}] updateItems(): insert(${t.insert?s.mapToString(t.insert):"0"}), delete(${t.delete?s.setToString(t.delete):"0"})`),this.transaction(e,()=>{if(t.insert&&t.insert.size>0){const i=[];i.push([]);let n=0;t.insert.forEach((e,t)=>{let r=i[n];r.length>l.MAX_HOST_PARAMETERS&&(n++,r=[],i.push(r)),r.push(t,e)}),i.forEach(i=>{this.prepare(e,`INSERT INTO ItemTable VALUES ${c.fill(i.length/2,"(?,?)").join(",")}`,e=>e.run(i),()=>{const e=[];let i=0;return t.insert.forEach((t,n)=>{e.push(n),i+=t.length}),`Keys: ${e.join(", ")} Length: ${i}`})})}
if(t.delete&&t.delete.size){const i=[];i.push([]);let n=0;t.delete.forEach(e=>{let t=i[n];t.length>l.MAX_HOST_PARAMETERS&&(n++,t=[],i.push(t)),t.push(e)}),i.forEach(i=>{this.prepare(e,`DELETE FROM ItemTable WHERE key IN (${c.fill(i.length,"?").join(",")})`,e=>e.run(i),()=>{const e=[];return t.delete.forEach(t=>{e.push(t)}),`Keys: ${e.join(", ")}`})})}})}close(e){return n(this,void 0,void 0,function*(){this.logger.trace(`[storage ${this.name}] close()`);const t=yield this.whenConnected;return this.doClose(t,e)})}doClose(e,t){return new Promise((i,n)=>{e.db.close(r=>(r&&this.handleSQLiteError(e,r,`[storage ${this.name}] close(): ${r}`),this.path===l.IN_MEMORY_PATH?i():e.isErroneous||e.isInMemory?"function"==typeof t?a.unlink(this.path).then(()=>this.doConnect(this.path).then(e=>{const i=()=>this.doClose(e,void 0);return this.doUpdateItems(e,{insert:t()}).then(()=>i(),e=>(i(),Promise.reject(e)))
})).then(i,n):n(r||new Error("Database has errors or is in-memory without recovery option")):this.backup().then(i,e=>(this.logger.error(`[storage ${this.name}] backup(): ${e}`),i()))))})}backup(){const e=this.toBackupPath(this.path);return a.copy(this.path,e)}toBackupPath(e){return`${e}.backup`}checkIntegrity(e){return n(this,void 0,void 0,function*(){this.logger.trace(`[storage ${this.name}] checkIntegrity(full: ${e})`);const t=yield this.whenConnected,i=yield this.get(t,e?"PRAGMA integrity_check":"PRAGMA quick_check"),n=e?i.integrity_check:i.quick_check;return t.isErroneous?`${n} (last error: ${t.lastError})`:t.isInMemory?`${n} (in-memory!)`:n})}connect(e,t=!0){return n(this,void 0,void 0,function*(){this.logger.trace(`[storage ${this.name}] open(${e}, retryOnBusy: ${t})`);try{return yield this.doConnect(e)}catch(i){if(this.logger.error(`[storage ${this.name}] open(): Unable to open DB due to ${i}`),"SQLITE_BUSY"===i.code&&t)return yield r.timeout(l.BUSY_OPEN_TIMEOUT),this.connect(e,!1);try{
return yield a.unlink(e),yield a.renameIgnoreError(this.toBackupPath(e),e),yield this.doConnect(e)}catch(e){return this.logger.error(`[storage ${this.name}] open(): Unable to use backup due to ${e}`),this.doConnect(l.IN_MEMORY_PATH)}}})}handleSQLiteError(e,t,i){e.isErroneous=!0,e.lastError=i,this.logger.error(i)}doConnect(t){return new Promise((i,n)=>{new Promise((t,i)=>{e(["vscode-sqlite3"],t,i)}).then(e=>{const r={db:new(this.logger.isTracing?e.verbose().Database:e.Database)(t,e=>e?r.db?r.db.close(()=>n(e)):n(e):this.exec(r,["PRAGMA user_version = 1;","CREATE TABLE IF NOT EXISTS ItemTable (key TEXT UNIQUE ON CONFLICT REPLACE, value BLOB)"].join("")).then(()=>i(r),e=>r.db.close(()=>n(e)))),isInMemory:t===l.IN_MEMORY_PATH};r.db.on("error",e=>this.handleSQLiteError(r,e,`[storage ${this.name}] Error (event): ${e}`)),this.logger.isTracing&&r.db.on("trace",e=>this.logger.trace(`[storage ${this.name}] Trace (event): ${e}`))},n)})}exec(e,t){return new Promise((i,n)=>{
e.db.exec(t,t=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] exec(): ${t}`),n(t)):i())})}get(e,t){return new Promise((i,n)=>{e.db.get(t,(t,r)=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] get(): ${t}`),n(t)):i(r))})}all(e,t){return new Promise((i,n)=>{e.db.all(t,(t,r)=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] all(): ${t}`),n(t)):i(r))})}transaction(e,t){return new Promise((i,n)=>{e.db.serialize(()=>{e.db.run("BEGIN TRANSACTION"),t(),e.db.run("END TRANSACTION",t=>t?(this.handleSQLiteError(e,t,`[storage ${this.name}] transaction(): ${t}`),n(t)):i())})})}prepare(e,t,i,n){const r=e.db.prepare(t),s=i=>{this.handleSQLiteError(e,i,`[storage ${this.name}] prepare(): ${i} (${t}). Details: ${n()}`)};r.on("error",s),i(r),r.finalize(e=>{e&&s(e),r.removeListener("error",s)})}}l.IN_MEMORY_PATH=":memory:",l.BUSY_OPEN_TIMEOUT=2e3,l.MAX_HOST_PARAMETERS=256,t.SQLiteStorageDatabase=l;class u{constructor(e){e&&"function"==typeof e.logTrace&&(this.logTrace=e.logTrace),
e&&"function"==typeof e.logError&&(this.logError=e.logError)}get isTracing(){return!!this.logTrace}trace(e){this.logTrace&&this.logTrace(e)}error(e){this.logError&&this.logError(e)}}}),define(t[154],i([1,0,8]),function(e,t,i){"use strict";function n(e){const t={uiState:e.uiState};return e.backupPath&&(t.backupPath=e.backupPath),e.remoteAuthority&&(t.remoteAuthority=e.remoteAuthority),e.folder?t.folderUri=i.URI.parse(e.folder):e.folderUri?t.folderUri=i.URI.revive(e.folderUri):e.folderPath&&(t.folderUri=i.URI.file(e.folderPath)),e.workspaceIdentifier?t.workspace={id:e.workspaceIdentifier.id,configPath:i.URI.parse(e.workspaceIdentifier.configURIPath)}:e.workspace&&(t.workspace={id:e.workspace.id,configPath:i.URI.file(e.workspace.configPath)}),t}function r(e){return{workspaceIdentifier:e.workspace&&{id:e.workspace.id,configURIPath:e.workspace.configPath.toString()},folder:e.folderUri&&e.folderUri.toString(),backupPath:e.backupPath,remoteAuthority:e.remoteAuthority,uiState:e.uiState}}
Object.defineProperty(t,"__esModule",{value:!0}),t.restoreWindowsState=function(e){const t={openedWindows:[]},i=e||{openedWindows:[]};return i.lastActiveWindow&&(t.lastActiveWindow=n(i.lastActiveWindow)),i.lastPluginDevelopmentHostWindow&&(t.lastPluginDevelopmentHostWindow=n(i.lastPluginDevelopmentHostWindow)),Array.isArray(i.openedWindows)&&(t.openedWindows=i.openedWindows.map(e=>n(e))),t},t.getWindowsStateStoreData=function(e){return{lastActiveWindow:e.lastActiveWindow&&r(e.lastActiveWindow),lastPluginDevelopmentHostWindow:e.lastPluginDevelopmentHostWindow&&r(e.lastPluginDevelopmentHostWindow),openedWindows:e.openedWindows.map(e=>r(e))}}}),define(t[76],i([1,0,6,25,14,32,2,19]),function(e,t,i,n,r,s,o,a){"use strict";function c(e){e["open-url"]&&(e._urls=e._,e._=[]);const t=function(e,t){const c=process.env.VSCODE_CWD||process.cwd(),u=e.map(e=>{let n=String(e),u=void 0;t&&(u=l(n),n=u.path),n&&(n=function(e,t){o.isWindows&&(t=r.rtrim(t,'"'));t=r.trim(r.trim(t," "),"\t"),o.isWindows&&(t=i.resolve(e,t),
t=r.rtrim(t,"."));return t}(c,n));const d=s.sanitizeFilePath(n,c),h=i.basename(d);return h&&!s.isValidBasename(h)?null:t&&u?(u.path=d,function(e){const t=[e.path];a.isNumber(e.line)&&t.push(String(e.line));a.isNumber(e.column)&&t.push(String(e.column));return t.join(":")}(u)):d}),d=o.isWindows||o.isMacintosh,h=n.distinct(u,e=>e&&d?e.toLowerCase():e||"");return n.coalesce(h)}(e._,e.goto);return e._=t,e.diff=e.diff&&2===t.length,e}function l(e){let t=null,i=null,n=null;if(e.split(":").forEach(e=>{const r=Number(e);a.isNumber(r)?null===i?i=r:null===n&&(n=r):t=t?[t,e].join(":"):e}),!t)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:t,line:null!==i?i:void 0,column:null!==n?n:null!==i?1:void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.validatePaths=c,t.parseLineAndColumnAware=l}),define(t[159],i([1,0,37,15,39,2]),function(e,t,i,n,r,s){"use strict";function o(e,t){
return void 0===a&&(t.args["disable-user-env-probe"]?(e.trace("getShellEnvironment: disable-user-env-probe set, skipping"),a=Promise.resolve({})):s.isWindows?(e.trace("getShellEnvironment: running on Windows, skipping"),a=Promise.resolve({})):"1"===process.env.VSCODE_CLI?(e.trace("getShellEnvironment: running on CLI, skipping"),a=Promise.resolve({})):(e.trace("getShellEnvironment: running on Unix"),a=function(e){return new Promise((t,s)=>{const o=process.env.ELECTRON_RUN_AS_NODE;e.trace("getUnixShellEnvironment#runAsNode",o);const a=process.env.ELECTRON_NO_ATTACH_CONSOLE;e.trace("getUnixShellEnvironment#noAttach",a);const c=r.generateUuid().replace(/-/g,"").substr(0,12),l=new RegExp(c+"(.*)"+c),u=n.assign({},process.env,{ELECTRON_RUN_AS_NODE:"1",ELECTRON_NO_ATTACH_CONSOLE:"1"}),d=`'${process.execPath}' -p '"${c}" + JSON.stringify(process.env) + "${c}"'`;e.trace("getUnixShellEnvironment#env",u),e.trace("getUnixShellEnvironment#spawn",d);const h=i.spawn(process.env.SHELL,["-ilc",d],{detached:!0,
stdio:["ignore","pipe",process.stderr],env:u}),f=[];h.on("error",()=>t({})),h.stdout.on("data",e=>f.push(e)),h.on("close",i=>{if(0!==i)return s(new Error("Failed to get environment"));const n=Buffer.concat(f).toString("utf8");e.trace("getUnixShellEnvironment#raw",n);const r=l.exec(n),c=r?r[1]:"{}";try{const i=JSON.parse(c);o?i.ELECTRON_RUN_AS_NODE=o:delete i.ELECTRON_RUN_AS_NODE,a?i.ELECTRON_NO_ATTACH_CONSOLE=a:delete i.ELECTRON_NO_ATTACH_CONSOLE,delete i.XDG_RUNTIME_DIR,e.trace("getUnixShellEnvironment#result",i),t(i)}catch(t){e.error("getUnixShellEnvironment#error",t),s(t)}})}).catch(()=>({}))}(e))),a}Object.defineProperty(t,"__esModule",{value:!0});let a;t.getShellEnvironment=o}),define(t[160],i([12,10]),function(e,t){return e.create("vs/base/common/keybindingLabels",t)}),define(t[170],i([1,0,160]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t,i=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=i}
toLabel(e,t,i){if(0===t.length)return null;const n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r],o=i(s);if(null===o)return null;n[r]=function(e,t,i){if(null===t)return"";const n=[];return e.ctrlKey&&n.push(i.ctrlKey),e.shiftKey&&n.push(i.shiftKey),e.altKey&&n.push(i.altKey),e.metaKey&&n.push(i.metaKey),n.push(t),n.join(i.separator)}(s,o,this.modifierLabels[e])}return n.join(" ")}}t.ModifierLabelProvider=n,t.UILabelProvider=new n({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:i.localize(0,null),shiftKey:i.localize(1,null),altKey:i.localize(2,null),metaKey:i.localize(3,null),separator:"+"},{ctrlKey:i.localize(4,null),shiftKey:i.localize(5,null),altKey:i.localize(6,null),metaKey:i.localize(7,null),separator:"+"}),t.AriaLabelProvider=new n({ctrlKey:i.localize(8,null),shiftKey:i.localize(9,null),altKey:i.localize(10,null),metaKey:i.localize(11,null),separator:"+"},{ctrlKey:i.localize(12,null),shiftKey:i.localize(13,null),altKey:i.localize(14,null),metaKey:i.localize(15,null),
separator:"+"},{ctrlKey:i.localize(16,null),shiftKey:i.localize(17,null),altKey:i.localize(18,null),metaKey:i.localize(19,null),separator:"+"}),t.ElectronAcceleratorLabelProvider=new n({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),t.UserSettingsLabelProvider=new n({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"})}),define(t[177],i([12,10]),function(e,t){return e.create("vs/base/node/processes",t)}),define(t[181],i([1,0,6,20,60,37,177,19,15,32,2,71,29]),function(e,t,i,r,s,o,a,c,l,u,d,h,f){"use strict";function p(t,i){if(d.isWindows)try{const e={stdio:["pipe","pipe","ignore"]};i&&(e.cwd=i),o.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],e)}catch(e){return{success:!1,error:e,code:e.status?function(e){switch(e){case 0:
return 0;case 1:return 2;case 128:return 3;default:return 1}}(e.status):1}}else if(d.isLinux||d.isMacintosh)try{const i=f.getPathFromAmdModule(e,"vs/base/node/terminateProcess.sh"),n=o.spawnSync(i,[t.pid.toString()]);if(n.error)return{success:!1,error:n.error}}catch(e){return{success:!1,error:e}}else t.kill("SIGKILL");return{success:!0}}function g(){return process.env.comspec||"cmd.exe"}Object.defineProperty(t,"__esModule",{value:!0}),t.terminateProcess=p,t.getWindowsShell=g;class m{constructor(e,t,i,n){if(void 0!==t&&void 0!==i&&void 0!==n)this.cmd=e,this.args=t,this.shell=i,this.options=n;else{const t=e;this.cmd=t.command,this.shell=t.isShellCommand,this.args=t.args.slice(0),this.options=t.options||{}}if(this.childProcess=null,this.terminateRequested=!1,this.options.env){const e=Object.create(null);Object.keys(process.env).forEach(t=>{e[t]=process.env[t]}),Object.keys(this.options.env).forEach(t=>{e[t]=this.options.env[t]}),this.options.env=e}}getSanitizedCommand(){let e=this.cmd.toLowerCase()
;const t=e.lastIndexOf(i.sep);return-1!==t&&(e=e.substring(t+1)),m.WellKnowCommands[e]?e:"other"}start(e){return d.isWindows&&(this.options&&this.options.cwd&&u.isUNC(this.options.cwd)||!this.options&&u.isUNC(process.cwd()))?Promise.reject(new Error(a.localize(0,null))):this.useExec().then(t=>{let i,n;const r=new Promise((e,t)=>{i=e,n=t});if(t){let t=this.cmd;this.args&&(t=t+" "+this.args.join(" ")),this.childProcess=o.exec(t,this.options,(t,r,s)=>{this.childProcess=null;const o=t;o&&o.killed?n({killed:this.terminateRequested,stdout:r.toString(),stderr:s.toString()}):this.handleExec(i,e,t,r,s)})}else{let t=null;if(this.shell&&d.isWindows){const e=l.deepClone(this.options);e.windowsVerbatimArguments=!0,e.detached=!1;let i=!1,n=!1;const r=[];let s=this.ensureQuotes(this.cmd);r.push(s.value),i=s.quoted,this.args&&this.args.forEach(e=>{s=this.ensureQuotes(e),r.push(s.value),n=n&&s.quoted});const a=["/s","/c"]
;i?n?a.push('"'+r.join(" ")+'"'):r.length>1?a.push('"'+r[0]+'" '+r.slice(1).join(" ")):a.push('"'+r[0]+'"'):a.push(r.join(" ")),t=o.spawn(g(),a,e)}else this.cmd&&(t=o.spawn(this.cmd,this.args,this.options));t&&(this.childProcess=t,this.childProcessPromise=Promise.resolve(t),this.pidResolve&&(this.pidResolve(c.isNumber(t.pid)?t.pid:-1),this.pidResolve=void 0),t.on("error",e=>{this.childProcess=null,n({terminated:this.terminateRequested,error:e})}),t.pid&&(this.childProcess.on("close",t=>{this.childProcess=null,this.childProcessPromise=null,this.handleClose(t,i,e,n);const r={terminated:this.terminateRequested};c.isNumber(t)&&(r.cmdCode=t),i(r)}),this.handleSpawn(t,i,e,n,!0)))}return r})}handleClose(e,t,i,n){}ensureQuotes(e){return m.regexp.test(e)?{value:'"'+e+'"',quoted:!0}:{value:e,quoted:e.length>0&&'"'===e[0]&&'"'===e[e.length-1]}}get pid(){return this.childProcessPromise?this.childProcessPromise.then(e=>e.pid,e=>-1):new Promise(e=>{this.pidResolve=e})}terminate(){
return this.childProcessPromise?this.childProcessPromise.then(e=>{this.terminateRequested=!0;const t=p(e,this.options.cwd);return t.success&&(this.childProcess=null),t},e=>({success:!0})):Promise.resolve({success:!0})}useExec(){return new Promise((e,t)=>{if(!this.shell||!d.isWindows)return e(!1);const i=o.spawn(g(),["/s","/c"]);i.on("error",t=>e(!0)),i.on("exit",t=>e(!1))})}}m.WellKnowCommands={ant:!0,cmake:!0,eslint:!0,gradle:!0,grunt:!0,gulp:!0,jake:!0,jenkins:!0,jshint:!0,make:!0,maven:!0,msbuild:!0,msc:!0,nmake:!0,npm:!0,rake:!0,tsc:!0,xbuild:!0},m.regexp=/^[^"].* .*[^"]/,t.AbstractProcess=m;class v extends m{constructor(e,t,i,n){super(e,t,i,n)}handleExec(e,t,i,n,r){[n,r].forEach((e,i)=>{const n=new h.LineDecoder;n.write(e).forEach(e=>{t({line:e,source:0===i?0:1})});const r=n.end();r&&t({line:r,source:0===i?0:1})}),e({terminated:this.terminateRequested,error:i})}handleSpawn(e,t,i,n,r){this.stdoutLineDecoder=new h.LineDecoder,this.stderrLineDecoder=new h.LineDecoder,e.stdout.on("data",e=>{
this.stdoutLineDecoder.write(e).forEach(e=>i({line:e,source:0}))}),e.stderr.on("data",e=>{this.stderrLineDecoder.write(e).forEach(e=>i({line:e,source:1}))})}handleClose(e,t,i,n){[this.stdoutLineDecoder.end(),this.stderrLineDecoder.end()].forEach((e,t)=>{e&&i({line:e,source:0===t?0:1})})}}t.LineProcess=v,t.createQueuedSender=function(e){let t=[],i=!1;const n=function(r){i?t.push(r):e.send(r,e=>{if(e&&console.error(e),i=!1,t.length>0){const e=t.slice(0);t=[],e.forEach(e=>n(e))}})&&!d.isWindows||(i=!0)};return{send:n}};!function(e){e.findExecutable=function(e,t,o){return n(this,void 0,void 0,function*(){if(i.isAbsolute(e))return e;if(void 0===t&&(t=process.cwd()),"."!==i.dirname(e))return i.join(t,e);if(void 0===o&&c.isString(process.env.PATH)&&(o=process.env.PATH.split(i.delimiter)),void 0===o||0===o.length)return i.join(t,e);for(let n of o){let o;if(o=i.isAbsolute(n)?i.join(n,e):i.join(t,n,e),yield s.promisify(r.exists)(o))return o;let a=o+".com";if(yield s.promisify(r.exists)(a))return a;if(a=o+".exe",
yield s.promisify(r.exists)(a))return a}return i.join(t,e)})}}(t.win32||(t.win32={}))}),define(t[81],i([1,0,37,3,9,15,4,181,36,116,34,18,31]),function(e,t,i,n,r,s,o,a,c,l,u,d,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class f extends c.ChannelServer{constructor(e){super({send:e=>{try{process.send&&process.send(e.buffer.toString("base64"))}catch(e){}},onMessage:o.Event.fromNodeEventEmitter(process,"message",e=>h.VSBuffer.wrap(Buffer.from(e,"base64")))},e),process.once("disconnect",()=>this.dispose())}}t.Server=f;class p{constructor(e,t){this.modulePath=e,this.options=t,this.activeRequests=new Set,this.channels=new Map,this._onDidProcessExit=new o.Emitter,this.onDidProcessExit=this._onDidProcessExit.event;const i=t&&t.timeout?t.timeout:6e4;this.disposeDelayer=new r.Delayer(i),this.child=null,this._client=null}getChannel(e){const t=this;return{call:(i,n,r)=>t.requestPromise(e,i,n,r),listen:(i,n)=>t.requestEvent(e,i,n)}}requestPromise(e,t,i,s=u.CancellationToken.None){
if(!this.disposeDelayer)return Promise.reject(new Error("disposed"));if(s.isCancellationRequested)return Promise.reject(d.canceled());this.disposeDelayer.cancel();const o=this.getCachedChannel(e),a=r.createCancelablePromise(e=>o.call(t,i,e)),c=s.onCancellationRequested(()=>a.cancel()),l=n.toDisposable(()=>a.cancel());return this.activeRequests.add(l),a.finally(()=>{c.dispose(),this.activeRequests.delete(l),0===this.activeRequests.size&&this.disposeDelayer&&this.disposeDelayer.trigger(()=>this.disposeClient())}),a}requestEvent(e,t,i){if(!this.disposeDelayer)return o.Event.None;this.disposeDelayer.cancel();let n;const r=new o.Emitter({onFirstListenerAdd:()=>{const s=this.getCachedChannel(e).listen(t,i);n=s(r.fire,r),this.activeRequests.add(n)},onLastListenerRemove:()=>{this.activeRequests.delete(n),n.dispose(),0===this.activeRequests.size&&this.disposeDelayer&&this.disposeDelayer.trigger(()=>this.disposeClient())}});return r.event}get client(){if(!this._client){
const e=this.options&&this.options.args?this.options.args:[],t=Object.create(null);t.env=s.assign(s.deepClone(process.env),{VSCODE_PARENT_PID:String(process.pid)}),this.options&&this.options.env&&(t.env=s.assign(t.env,this.options.env)),this.options&&this.options.freshExecArgv&&(t.execArgv=[]),this.options&&"number"==typeof this.options.debug&&(t.execArgv=["--nolazy","--inspect="+this.options.debug]),this.options&&"number"==typeof this.options.debugBrk&&(t.execArgv=["--nolazy","--inspect-brk="+this.options.debugBrk]),this.child=i.fork(this.modulePath,e,t);const r=new o.Emitter;o.Event.fromNodeEventEmitter(this.child,"message",e=>e)(e=>{l.isRemoteConsoleLog(e)?l.log(e,`IPC Library: ${this.options.serverName}`):r.fire(h.VSBuffer.wrap(Buffer.from(e,"base64")))});const u=this.options.useQueue?a.createQueuedSender(this.child):this.child,d={send:e=>this.child&&this.child.connected&&u.send(e.buffer.toString("base64")),onMessage:r.event};this._client=new c.ChannelClient(d);const f=()=>this.disposeClient()
;process.once("exit",f),this.child.on("error",e=>console.warn('IPC "'+this.options.serverName+'" errored with '+e)),this.child.on("exit",(e,t)=>{process.removeListener("exit",f),this.activeRequests.forEach(e=>n.dispose(e)),this.activeRequests.clear(),0!==e&&"SIGTERM"!==t&&console.warn('IPC "'+this.options.serverName+'" crashed with exit code '+e+" and signal "+t),this.disposeDelayer&&this.disposeDelayer.cancel(),this.disposeClient(),this._onDidProcessExit.fire({code:e,signal:t})})}return this._client}getCachedChannel(e){let t=this.channels.get(e);return t||(t=this.client.getChannel(e),this.channels.set(e,t)),t}disposeClient(){this._client&&(this.child&&(this.child.kill(),this.child=null),this._client=null,this.channels.clear())}dispose(){this._onDidProcessExit.dispose(),this.disposeDelayer&&(this.disposeDelayer.cancel(),this.disposeDelayer=void 0),this.disposeClient(),this.activeRequests.clear()}}t.Client=p}),define(t[189],i([12,10]),function(e,t){return e.create("vs/code/electron-main/app",t)}),
define(t[196],i([12,10]),function(e,t){return e.create("vs/code/electron-main/auth",t)}),define(t[198],i([12,10]),function(e,t){return e.create("vs/code/electron-main/window",t)}),define(t[199],i([12,10]),function(e,t){return e.create("vs/code/electron-main/windows",t)}),define(t[83],i([12,10]),function(e,t){return e.create("vs/platform/configuration/common/configurationRegistry",t)}),define(t[84],i([12,10]),function(e,t){return e.create("vs/platform/environment/node/argv",t)}),define(t[85],i([12,10]),function(e,t){return e.create("vs/platform/environment/node/argvHelper",t)}),define(t[86],i([12,10]),function(e,t){return e.create("vs/platform/extensionManagement/common/extensionManagement",t)}),define(t[87],i([12,10]),function(e,t){return e.create("vs/platform/extensions/common/extensionValidator",t)}),define(t[88],i([12,10]),function(e,t){return e.create("vs/platform/files/common/fileService",t)}),define(t[89],i([12,10]),function(e,t){return e.create("vs/platform/files/node/diskFileSystemProvider",t)}),
define(t[90],i([12,10]),function(e,t){return e.create("vs/platform/history/electron-main/historyMainService",t)}),define(t[91],i([12,10]),function(e,t){return e.create("vs/platform/issue/electron-main/issueService",t)}),define(t[92],i([12,10]),function(e,t){return e.create("vs/platform/label/common/label",t)}),define(t[93],i([12,10]),function(e,t){return e.create("vs/platform/menubar/electron-main/menubar",t)}),define(t[94],i([12,10]),function(e,t){return e.create("vs/platform/request/common/request",t)}),define(t[95],i([12,10]),function(e,t){return e.create("vs/platform/telemetry/common/telemetryService",t)}),define(t[96],i([12,10]),function(e,t){return e.create("vs/platform/update/node/update.config.contribution",t)}),define(t[97],i([12,10]),function(e,t){return e.create("vs/platform/windows/electron-main/windowsService",t)}),define(t[98],i([12,10]),function(e,t){return e.create("vs/platform/workspaces/common/workspaces",t)}),define(t[99],i([1,0,4,3]),function(e,t,i,n){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this._onCloseEmitter=new i.Emitter,this._onReloadEmitter=new i.Emitter,this._onTerminateEmitter=new i.Emitter,this._onLogToEmitter=new i.Emitter,this._onAttachEmitter=new i.Emitter}call(e,t,i){switch(t){case"close":return Promise.resolve(this._onCloseEmitter.fire({sessionId:i[0]}));case"reload":return Promise.resolve(this._onReloadEmitter.fire({sessionId:i[0]}));case"terminate":return Promise.resolve(this._onTerminateEmitter.fire({sessionId:i[0]}));case"log":return Promise.resolve(this._onLogToEmitter.fire({sessionId:i[0],log:i[1]}));case"attach":return Promise.resolve(this._onAttachEmitter.fire({sessionId:i[0],port:i[1],subId:i[2]}))}throw new Error("Method not implemented.")}listen(e,t,i){switch(t){case"close":return this._onCloseEmitter.event;case"reload":return this._onReloadEmitter.event;case"terminate":return this._onTerminateEmitter.event;case"log":return this._onLogToEmitter.event;case"attach":return this._onAttachEmitter.event}
throw new Error("Method not implemented.")}}r.ChannelName="extensionhostdebugservice",t.ExtensionHostDebugBroadcastChannel=r;class s extends n.Disposable{constructor(e){super(),this.channel=e}reload(e){this.channel.call("reload",[e])}get onReload(){return this.channel.listen("reload")}close(e){this.channel.call("close",[e])}get onClose(){return this.channel.listen("close")}attachSession(e,t,i){this.channel.call("attach",[e,t,i])}get onAttachSession(){return this.channel.listen("attach")}logToSession(e,t){this.channel.call("log",[e,t])}get onLogToSession(){return this.channel.listen("log")}terminateSession(e,t){this.channel.call("terminate",[e,t])}get onTerminateSession(){return this.channel.listen("terminate")}}t.ExtensionHostDebugChannelClient=s}),define(t[64],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRemoteDiagnosticError=function(e){return!!e.hostName&&!!e.errorMessage}}),define(t[65],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{
value:!0});class i{constructor(e){this.service=e}listen(e,t){throw new Error("Invalid listen")}call(e,t,i){switch(t){case"getDiagnostics":return this.service.getDiagnostics(i[0],i[1]);case"getSystemInfo":return this.service.getSystemInfo(i[0],i[1]);case"getPerformanceInfo":return this.service.getPerformanceInfo(i[0],i[1]);case"reportWorkspaceStats":return this.service.reportWorkspaceStats(i)}throw new Error("Invalid call")}}t.DiagnosticsChannel=i;class n{constructor(e){this.channel=e}getDiagnostics(e,t){return this.channel.call("getDiagnostics",[e,t])}getSystemInfo(e,t){return this.channel.call("getSystemInfo",[e,t])}getPerformanceInfo(e,t){return this.channel.call("getPerformanceInfo",[e,t])}reportWorkspaceStats(e){return this.channel.call("reportWorkspaceStats",e)}}t.DiagnosticsService=n}),define(t[102],i([1,0,51]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.driver=e}listen(e,t){throw new Error("No event found")}call(e,t,i){switch(t){
case"getWindowIds":return this.driver.getWindowIds();case"capturePage":return this.driver.capturePage(i);case"reloadWindow":return this.driver.reloadWindow(i);case"exitApplication":return this.driver.exitApplication();case"dispatchKeybinding":return this.driver.dispatchKeybinding(i[0],i[1]);case"click":return this.driver.click(i[0],i[1],i[2],i[3]);case"doubleClick":return this.driver.doubleClick(i[0],i[1]);case"setValue":return this.driver.setValue(i[0],i[1],i[2]);case"getTitle":return this.driver.getTitle(i[0]);case"isActiveElement":return this.driver.isActiveElement(i[0],i[1]);case"getElements":return this.driver.getElements(i[0],i[1],i[2]);case"getElementXY":return this.driver.getElementXY(i[0],i[1],i[2]);case"typeInEditor":return this.driver.typeInEditor(i[0],i[1],i[2]);case"getTerminalBuffer":return this.driver.getTerminalBuffer(i[0],i[1]);case"writeInTerminal":return this.driver.writeInTerminal(i[0],i[1],i[2])}throw new Error(`Call not found: ${t}`)}}t.DriverChannel=r;class s{constructor(e){
this.channel=e}getWindowIds(){return this.channel.call("getWindowIds")}capturePage(e){return this.channel.call("capturePage",e)}reloadWindow(e){return this.channel.call("reloadWindow",e)}exitApplication(){return this.channel.call("exitApplication")}dispatchKeybinding(e,t){return this.channel.call("dispatchKeybinding",[e,t])}click(e,t,i,n){return this.channel.call("click",[e,t,i,n])}doubleClick(e,t){return this.channel.call("doubleClick",[e,t])}setValue(e,t,i){return this.channel.call("setValue",[e,t,i])}getTitle(e){return this.channel.call("getTitle",[e])}isActiveElement(e,t){return this.channel.call("isActiveElement",[e,t])}getElements(e,t,i){return this.channel.call("getElements",[e,t,i])}getElementXY(e,t,i,n){return this.channel.call("getElementXY",[e,t,i,n])}typeInEditor(e,t,i){return this.channel.call("typeInEditor",[e,t,i])}getTerminalBuffer(e,t){return this.channel.call("getTerminalBuffer",[e,t])}writeInTerminal(e,t,i){return this.channel.call("writeInTerminal",[e,t,i])}}t.DriverChannelClient=s
;class o{constructor(e){this.registry=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"registerWindowDriver":return this.registry.registerWindowDriver(i);case"reloadWindowDriver":return this.registry.reloadWindowDriver(i)}throw new Error(`Call not found: ${t}`)}}t.WindowDriverRegistryChannel=o;class a{constructor(e){this.channel=e}registerWindowDriver(e){return this.channel.call("registerWindowDriver",e)}reloadWindowDriver(e){return this.channel.call("reloadWindowDriver",e)}}t.WindowDriverRegistryChannelClient=a;class c{constructor(e){this.driver=e}listen(e,t){throw new Error(`No event found: ${t}`)}call(e,t,i){switch(t){case"click":return this.driver.click(i[0],i[1],i[2]);case"doubleClick":return this.driver.doubleClick(i);case"setValue":return this.driver.setValue(i[0],i[1]);case"getTitle":return this.driver.getTitle();case"isActiveElement":return this.driver.isActiveElement(i);case"getElements":return this.driver.getElements(i[0],i[1]);case"getElementXY":
return this.driver.getElementXY(i[0],i[1],i[2]);case"typeInEditor":return this.driver.typeInEditor(i[0],i[1]);case"getTerminalBuffer":return this.driver.getTerminalBuffer(i);case"writeInTerminal":return this.driver.writeInTerminal(i[0],i[1])}throw new Error(`Call not found: ${t}`)}}t.WindowDriverChannel=c;class l{constructor(e){this.channel=e}click(e,t,i){return this.channel.call("click",[e,t,i])}doubleClick(e){return this.channel.call("doubleClick",e)}setValue(e,t){return this.channel.call("setValue",[e,t])}getTitle(){return this.channel.call("getTitle")}isActiveElement(e){return this.channel.call("isActiveElement",e)}getElements(e,t){return this.channel.call("getElements",[e,t])}getElementXY(e,t,i){return this.channel.call("getElementXY",[e,t,i])}typeInEditor(e,t){return this.channel.call("typeInEditor",[e,t])}getTerminalBuffer(e){return this.channel.call("getTerminalBuffer",e)}writeInTerminal(e,t){return this.channel.call("writeInTerminal",[e,t])}}t.WindowDriverChannelClient=l,t.connect=function(e){
return n(this,void 0,void 0,function*(){const t=yield i.connect(e,"driverClient"),n=t.getChannel("driver");return{client:t,driver:new s(n)}})}}),define(t[103],i([1,0,87]),function(e,t,i){"use strict";function n(e){return"*"===(e=e.trim())||c.test(e)}function r(e){if(!n(e))return null;if("*"===(e=e.trim()))return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};let t=e.match(c);return t?{hasCaret:"^"===t[1],hasGreaterEquals:">="===t[1],majorBase:"x"===t[2]?0:parseInt(t[2],10),majorMustEqual:"x"!==t[2],minorBase:"x"===t[4]?0:parseInt(t[4],10),minorMustEqual:"x"!==t[4],patchBase:"x"===t[6]?0:parseInt(t[6],10),patchMustEqual:"x"!==t[6],preRelease:t[8]||null}:null}function s(e){if(!e)return null;let t=e.majorBase,i=e.majorMustEqual,n=e.minorBase,r=e.minorMustEqual,s=e.patchBase,o=e.patchMustEqual;return e.hasCaret&&(0===t?o=!1:(r=!1,o=!1)),{majorBase:t,majorMustEqual:i,minorBase:n,minorMustEqual:r,patchBase:s,
patchMustEqual:o,isMinimum:e.hasGreaterEquals}}function o(e,t){let i;i="string"==typeof e?s(r(e)):e;let n;if(n="string"==typeof t?s(r(t)):t,!i||!n)return!1;let o=i.majorBase,a=i.minorBase,c=i.patchBase,l=n.majorBase,u=n.minorBase,d=n.patchBase,h=n.majorMustEqual,f=n.minorMustEqual,p=n.patchMustEqual;return n.isMinimum?o>l||!(o<l)&&(a>u||!(a<u)&&c>=d):(1!==o||0!==l||h&&f&&p||(l=1,u=0,d=0,h=!0,f=!1,p=!1),!(o<l)&&(o>l?!h:!(a<u)&&(a>u?!f:!(c<d)&&(!(c>d)||!p))))}function a(e,t,n=[]){let a=s(r(t));if(!a)return n.push(i.localize(0,null,t)),!1;if(0===a.majorBase){if(!a.majorMustEqual||!a.minorMustEqual)return n.push(i.localize(1,null,t)),!1}else if(!a.majorMustEqual)return n.push(i.localize(2,null,t)),!1;return!!o(e,a)||(n.push(i.localize(3,null,e,t)),!1)}Object.defineProperty(t,"__esModule",{value:!0});const c=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/;t.isValidVersionStr=n,t.parseVersion=r,t.normalizeVersion=s,t.isValidVersion=o,t.isValidExtensionVersion=function(e,t,i){
return!(!t.isBuiltin&&void 0!==t.main)||a(e,t.engines.vscode,i)},t.isEngineValid=function(e,t){return"*"===e||a(t,e)},t.isVersionValid=a}),define(t[104],i([1,0,14]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MANIFEST_CACHE_FOLDER="CachedExtensions",t.USER_MANIFEST_CACHE_FILE="user",t.BUILTIN_MANIFEST_CACHE_FILE="builtin",t.isIExtensionIdentifier=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(!e.uuid||"string"==typeof e.uuid)};!function(e){e[e.System=0]="System",e[e.User=1]="User"}(t.ExtensionType||(t.ExtensionType={}));class n{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(void 0===e||null===e)return void 0===t||null===t;if(void 0===t||null===t)return!1;if("string"==typeof e||"string"==typeof t){let n="string"==typeof e?e:e.value,r="string"==typeof t?t:t.value;return i.equalsIgnoreCase(n,r)}return e._lower===t._lower}static toKey(e){return"string"==typeof e?e.toLowerCase():e._lower}}t.ExtensionIdentifier=n,
t.isLanguagePackExtension=function(e){return!(!e.contributes||!e.contributes.localizations)&&e.contributes.localizations.length>0}}),define(t[105],i([1,0,14,104]),function(e,t,i,n){"use strict";function r(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id||0===i.compareIgnoreCase(e.id,t.id)}Object.defineProperty(t,"__esModule",{value:!0}),t.areSameExtensions=r;class s{constructor(e,t){this.identifier=e,this.version=t}key(){return`${this.identifier.id}-${this.version}`}equals(e){return e instanceof s&&(r(this.identifier,e.identifier)&&this.version===e.version)}}t.ExtensionIdentifierWithVersion=s,t.adoptToGalleryExtensionId=function(e){return e.toLocaleLowerCase()},t.getGalleryExtensionId=function(e,t){return`${e.toLocaleLowerCase()}.${t.toLocaleLowerCase()}`},t.groupByExtension=function(e,t){const i=[],n=e=>{for(const n of i)if(n.some(i=>r(t(i),t(e))))return n;return null};for(const t of e){const e=n(t);e?e.push(t):i.push([t])}return i},t.getLocalExtensionTelemetryData=function(e){return{
id:e.identifier.id,name:e.manifest.name,galleryId:null,publisherId:e.metadata?e.metadata.publisherId:null,publisherName:e.manifest.publisher,publisherDisplayName:e.metadata?e.metadata.publisherDisplayName:null,dependencies:e.manifest.extensionDependencies&&e.manifest.extensionDependencies.length>0}},t.getGalleryExtensionTelemetryData=function(e){return Object.assign({id:e.identifier.id,name:e.name,galleryId:e.identifier.uuid,publisherId:e.publisherId,publisherName:e.publisher,publisherDisplayName:e.publisherDisplayName,dependencies:!!(e.properties.dependencies&&e.properties.dependencies.length>0)},e.telemetryData)},t.BetterMergeId=new n.ExtensionIdentifier("pprice.better-merge"),t.getMaliciousExtensionsSet=function(e){const t=new Set;for(const i of e)i.malicious&&t.add(i.id.id);return t}}),define(t[82],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.service=e}listen(e,t,i){switch(t){case"watch":return this.service.watch(i);case"onLogMessage":
return this.service.onLogMessage}throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"setRoots":return this.service.setRoots(i);case"setVerboseLogging":return this.service.setVerboseLogging(i);case"stop":return this.service.stop()}throw new Error(`Call not found: ${t}`)}}t.WatcherChannel=i;class n{constructor(e){this.channel=e}watch(e){return this.channel.listen("watch",e)}setVerboseLogging(e){return this.channel.call("setVerboseLogging",e)}setRoots(e){return this.channel.call("setRoots",e)}get onLogMessage(){return this.channel.listen("onLogMessage")}stop(){return this.channel.call("stop")}}t.WatcherChannelClient=n}),define(t[107],i([1,0,36,81,82,3,29]),function(e,t,i,n,r,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends s.Disposable{constructor(e,t,i,n){super(),this.folders=e,this.onFileChanges=t,this.onLogMessage=i,this.verboseLogging=n,this.isDisposed=!1,this.restartCounter=0,this.startWatching()}startWatching(){
const t=this._register(new n.Client(o.getPathFromAmdModule(e,"bootstrap-fork"),{serverName:"File Watcher (nsfw)",args:["--type=watcherService"],env:{AMD_ENTRYPOINT:"vs/platform/files/node/watcher/nsfw/watcherApp",PIPE_LOGGING:"true",VERBOSE_LOGGING:"true"}}));this._register(t.onDidProcessExit(()=>{this.isDisposed||(this.restartCounter<=a.MAX_RESTARTS?(this.error("terminated unexpectedly and is restarted again..."),this.restartCounter++,this.startWatching()):this.error("failed to start after retrying for some time, giving up. Please report this as a bug report!"))}));const s=i.getNextTickChannel(t.getChannel("watcher"));this.service=new r.WatcherChannelClient(s),this.service.setVerboseLogging(this.verboseLogging);this._register(this.service.watch({})(e=>!this.isDisposed&&this.onFileChanges(e))),this._register(this.service.onLogMessage(e=>this.onLogMessage(e))),this.setFolders(this.folders)}setVerboseLogging(e){this.verboseLogging=e,this.isDisposed||this.service.setVerboseLogging(e)}error(e){this.onLogMessage({
type:"error",message:`[File Watcher (nsfw)] ${e}`})}setFolders(e){this.folders=e,this.service.setRoots(e)}dispose(){this.isDisposed=!0,super.dispose()}}a.MAX_RESTARTS=5,t.FileWatcher=a}),define(t[108],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.service=e}listen(e,t,i){switch(t){case"watch":return this.service.watch(i);case"onLogMessage":return this.service.onLogMessage}throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"setRoots":return this.service.setRoots(i);case"setVerboseLogging":return this.service.setVerboseLogging(i);case"stop":return this.service.stop()}throw new Error(`Call not found: ${t}`)}}t.WatcherChannel=i;class n{constructor(e){this.channel=e}watch(e){return this.channel.listen("watch",e)}setVerboseLogging(e){return this.channel.call("setVerboseLogging",e)}get onLogMessage(){return this.channel.listen("onLogMessage")}setRoots(e){return this.channel.call("setRoots",e)}stop(){return this.channel.call("stop")}}
t.WatcherChannelClient=n}),define(t[109],i([1,0,36,81,108,3,29]),function(e,t,i,n,r,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a extends s.Disposable{constructor(e,t,i,n,r={}){super(),this.folders=e,this.onFileChanges=t,this.onLogMessage=i,this.verboseLogging=n,this.watcherOptions=r,this.isDisposed=!1,this.restartCounter=0,this.startWatching()}startWatching(){const t=this._register(new n.Client(o.getPathFromAmdModule(e,"bootstrap-fork"),{serverName:"File Watcher (chokidar)",args:["--type=watcherService"],env:{AMD_ENTRYPOINT:"vs/platform/files/node/watcher/unix/watcherApp",PIPE_LOGGING:"true",VERBOSE_LOGGING:"true"}}));this._register(t.onDidProcessExit(()=>{this.isDisposed||(this.restartCounter<=a.MAX_RESTARTS?(this.error("terminated unexpectedly and is restarted again..."),this.restartCounter++,this.startWatching()):this.error("failed to start after retrying for some time, giving up. Please report this as a bug report!"))}));const s=i.getNextTickChannel(t.getChannel("watcher"))
;this.service=new r.WatcherChannelClient(s),this.service.setVerboseLogging(this.verboseLogging),this._register(this.service.watch(this.watcherOptions)(e=>!this.isDisposed&&this.onFileChanges(e))),this._register(this.service.onLogMessage(e=>this.onLogMessage(e))),this.service.setRoots(this.folders)}error(e){this.onLogMessage({type:"error",message:`[File Watcher (chokidar)] ${e}`})}setVerboseLogging(e){this.verboseLogging=e,this.service.setVerboseLogging(e)}setFolders(e){this.folders=e,this.service.setRoots(e)}dispose(){this.isDisposed=!0,super.dispose()}}a.MAX_RESTARTS=5,t.FileWatcher=a}),define(t[110],i([1,0,37,71,79,29]),function(e,t,i,n,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(e,t,i,n,s){this.watchedFolder=e,this.eventCallback=i,this.logCallback=n,this.verboseLogging=s,this.restartCounter=0,Array.isArray(t)?this.ignored=t.map(e=>r.parse(e)):this.ignored=[],this.verboseLogging&&this.log(`Start watching: ${e}`),this.startWatcher()}startWatcher(){
const t=[this.watchedFolder];this.verboseLogging&&t.push("-verbose"),this.handle=i.spawn(s.getPathFromAmdModule(e,"vs/platform/files/node/watcher/win32/CodeHelper.exe"),t);const r=new n.LineDecoder;this.handle.stdout.on("data",e=>{const t=[];r.write(e).forEach(e=>{const i=e.split("|");if(2===i.length){const e=Number(i[0]),n=i[1];if(e>=0&&e<3){if(this.ignored&&this.ignored.some(e=>e(n)))return void(this.verboseLogging&&this.log(n));t.push({type:o.changeTypeMap[e],path:n})}else this.log(i[1])}}),t.length>0&&this.eventCallback(t)}),this.handle.on("error",e=>this.onError(e)),this.handle.stderr.on("data",e=>this.onError(e)),this.handle.on("exit",(e,t)=>this.onExit(e,t))}onError(e){this.error("process error: "+e.toString())}onExit(e,t){this.handle&&(this.error(`terminated unexpectedly (code: ${e}, signal: ${t})`),this.restartCounter<=o.MAX_RESTARTS?(this.error("is restarted again..."),this.restartCounter++,
this.startWatcher()):this.error("Watcher failed to start after retrying for some time, giving up. Please report this as a bug report!"))}error(e){this.logCallback({type:"error",message:`[File Watcher (C#)] ${e}`})}log(e){this.logCallback({type:"trace",message:`[File Watcher (C#)] ${e}`})}dispose(){this.handle&&(this.handle.kill(),this.handle=void 0)}}o.MAX_RESTARTS=5,o.changeTypeMap=[0,1,2],t.OutOfProcessWin32FolderWatcher=o}),define(t[111],i([1,0,110,6,14]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(e,t,i,s){this.onFileChanges=t,this.onLogMessage=i,this.verboseLogging=s,this.service=void 0,this.folder=e[0],0===this.folder.path.indexOf("\\\\")&&r.endsWith(this.folder.path,n.posix.sep)&&(this.folder.path=r.rtrim(this.folder.path,n.posix.sep)),this.service=this.startWatching()}get isDisposed(){return!this.service}startWatching(){
return new i.OutOfProcessWin32FolderWatcher(this.folder.path,this.folder.excludes,e=>this.onFileEvents(e),e=>this.onLogMessage(e),this.verboseLogging)}setVerboseLogging(e){this.verboseLogging=e,this.service&&(this.service.dispose(),this.service=this.startWatching())}onFileEvents(e){this.isDisposed||e.length>0&&this.onFileChanges(e)}dispose(){this.service&&(this.service.dispose(),this.service=void 0)}}t.FileWatcher=s}),define(t[59],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}t.SyncDescriptor=i,t.createSyncDescriptor=((e,...t)=>new i(e,t))}),define(t[113],i([1,0,19,167]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._hashFn=e,this._nodes=Object.create(null)}roots(){const e=[];return n.forEach(this._nodes,t=>{i.isEmptyObject(t.value.outgoing)&&e.push(t.value)}),e}insertEdge(e,t){
const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing[this._hashFn(t)]=n,n.incoming[this._hashFn(e)]=i}removeNode(e){const t=this._hashFn(e);delete this._nodes[t],n.forEach(this._nodes,e=>{delete e.value.outgoing[t],delete e.value.incoming[t]})}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes[t];return i||(i=function(e){return{data:e,incoming:Object.create(null),outgoing:Object.create(null)}}(e),this._nodes[t]=i),i}lookup(e){return this._nodes[this._hashFn(e)]}isEmpty(){for(const e in this._nodes)return!1;return!0}toString(){let e=[];return n.forEach(this._nodes,t=>{e.push(`${t.key}, (incoming)[${Object.keys(t.value.incoming).join(", ")}], (outgoing)[${Object.keys(t.value.outgoing).join(",")}]`)}),e.join("\n")}}t.Graph=r}),define(t[5],i([1,0]),function(e,t){"use strict";function i(e,t,i,n){t[r.DI_TARGET]===t?t[r.DI_DEPENDENCIES].push({id:e,index:i,optional:n}):(t[r.DI_DEPENDENCIES]=[{id:e,index:i,optional:n}],t[r.DI_TARGET]=t)}function n(e){
if(r.serviceIds.has(e))return r.serviceIds.get(e);const t=function(e,n,r){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(t,e,r,!1)};return t.toString=(()=>e),r.serviceIds.set(e,t),t}Object.defineProperty(t,"__esModule",{value:!0});var r;!function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(r=t._util||(t._util={})),t.IInstantiationService=n("instantiationService"),t.createDecorator=n,t.optional=function(e){return function(t,n,r){if(3!==arguments.length)throw new Error("@optional-decorator can only be used to decorate a parameter");i(e,t,r,!0)}}}),define(t[57],i([1,0,5]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IBackupMainService=i.createDecorator("backupMainService")}),define(t[11],i([1,0,5]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),
t.IEnvironmentService=i.createDecorator("environmentService"),t.BACKUPS="Backups"}),define(t[117],i([1,0,86,5]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXTENSION_IDENTIFIER_PATTERN="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",t.EXTENSION_IDENTIFIER_REGEX=new RegExp(t.EXTENSION_IDENTIFIER_PATTERN),t.isIExtensionIdentifier=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&(!e.uuid||"string"==typeof e.uuid)},t.IExtensionManagementService=n.createDecorator("extensionManagementService"),t.IExtensionGalleryService=n.createDecorator("extensionGalleryService");!function(e){e[e.NoneOrRelevance=0]="NoneOrRelevance",e[e.LastUpdatedDate=1]="LastUpdatedDate",e[e.Title=2]="Title",e[e.PublisherName=3]="PublisherName",e[e.InstallCount=4]="InstallCount",e[e.PublishedDate=5]="PublishedDate",e[e.AverageRating=6]="AverageRating",e[e.WeightedRating=12]="WeightedRating"}(t.SortBy||(t.SortBy={}));!function(e){e[e.Default=0]="Default",
e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"}(t.SortOrder||(t.SortOrder={}));!function(e){e.Uninstall="uninstall"}(t.StatisticType||(t.StatisticType={}));!function(e){e[e.None=0]="None",e[e.Install=1]="Install",e[e.Update=2]="Update"}(t.InstallOperation||(t.InstallOperation={})),t.INSTALL_ERROR_MALICIOUS="malicious",t.INSTALL_ERROR_INCOMPATIBLE="incompatible",t.ExtensionsLabel=i.localize(0,null),t.ExtensionsChannelId="extensions",t.PreferencesLabel=i.localize(1,null)}),define(t[30],i([1,0,6,5,14,21,19]),function(e,t,i,n,r,s,o){"use strict";function a(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function c(e){if(!e)return l.Unknown;if(e instanceof u)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return l.Unknown;switch(t[1]){case l.FileExists:return l.FileExists;case l.FileIsADirectory:return l.FileIsADirectory;case l.FileNotADirectory:return l.FileNotADirectory;case l.FileNotFound:return l.FileNotFound;case l.NoPermissions:return l.NoPermissions
;case l.Unavailable:return l.Unavailable}return l.Unknown}Object.defineProperty(t,"__esModule",{value:!0}),t.IFileService=n.createDecorator("fileService");!function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"}(t.FileType||(t.FileType={}));!function(e){e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash"}(t.FileSystemProviderCapabilities||(t.FileSystemProviderCapabilities={})),t.hasReadWriteCapability=function(e){return!!(2&e.capabilities)},t.hasFileFolderCopyCapability=function(e){return!!(8&e.capabilities)},t.hasOpenReadWriteCloseCapability=function(e){return!!(4&e.capabilities)};var l;!function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",
e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"}(l=t.FileSystemProviderErrorCode||(t.FileSystemProviderErrorCode={}));class u extends Error{constructor(e,t){super(e),this.code=t}}t.FileSystemProviderError=u,t.createFileSystemProviderError=function(e,t){const i=new u(e.toString(),t);return a(i,t),i},t.markAsFileSystemProviderError=a,t.toFileSystemProviderErrorCode=c,t.toFileOperationResult=function(e){if(e instanceof f)return e.fileOperationResult;switch(c(e)){case l.FileNotFound:return 1;case l.FileIsADirectory:return 0;case l.NoPermissions:return 6;case l.FileExists:return 4;case l.FileNotADirectory:default:return 10}};!function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY"}(t.FileOperation||(t.FileOperation={}));class d{constructor(e,t,i){this.resource=e,this.operation=t,this.target=i}isOperation(e){return this.operation===e}}t.FileOperationEvent=d;!function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"
}(t.FileChangeType||(t.FileChangeType={}));class h{constructor(e){this._changes=e}get changes(){return this._changes}contains(e,t){if(!e)return!1;const i=!o.isUndefinedOrNull(t);return this._changes.some(n=>(!i||n.type===t)&&(2===n.type?s.isEqualOrParent(e,n.resource):s.isEqual(e,n.resource)))}getAdded(){return this.getOfType(1)}gotAdded(){return this.hasType(1)}getDeleted(){return this.getOfType(2)}gotDeleted(){return this.hasType(2)}getUpdated(){return this.getOfType(0)}gotUpdated(){return this.hasType(0)}getOfType(e){return this._changes.filter(t=>t.type===e)}hasType(e){return this._changes.some(t=>t.type===e)}}t.FileChangesEvent=h,t.isParent=function(e,t,n){return!(!e||!t||e===t)&&!(t.length>e.length)&&(t.charAt(t.length-1)!==i.sep&&(t+=i.sep),n?r.startsWithIgnoreCase(e,t):0===e.indexOf(t))};class f extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}static isFileOperationError(e){return e instanceof Error&&!o.isUndefinedOrNull(e.fileOperationResult)}}t.FileOperationError=f
;!function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_READ_ONLY=5]="FILE_READ_ONLY",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_EXCEED_MEMORY_LIMIT=9]="FILE_EXCEED_MEMORY_LIMIT",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"}(t.FileOperationResult||(t.FileOperationResult={})),t.AutoSaveConfiguration={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},t.HotExitConfiguration={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},t.CONTENT_CHANGE_EVENT_BUFFER_DELAY=1e3,t.FILES_ASSOCIATIONS_CONFIG="files.associations",t.FILES_EXCLUDE_CONFIG="files.exclude";!function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",
e[e.ROOT_FOLDER=2]="ROOT_FOLDER"}(t.FileKind||(t.FileKind={})),t.MIN_MAX_MEMORY_SIZE_MB=2048,t.FALLBACK_MAX_MEMORY_SIZE_MB=4096,t.ETAG_DISABLED="",t.etag=function(e){if("number"==typeof e.size&&"number"==typeof e.mtime)return e.mtime.toString(29)+e.size.toString(31)}}),define(t[74],i([1,0,8,30,2]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFileChanges=function(e){return e.map(e=>({type:e.type,resource:i.URI.file(e.path)}))},t.normalizeFileChanges=function(e){const t=new s;for(const i of e)t.processEvent(i);return t.normalize()};class s{constructor(){this.normalized=[],this.mapPathToChange=new Map}processEvent(e){const t=this.mapPathToChange.get(e.path);if(t){const i=t.type,n=e.type;1===i&&2===n?(this.mapPathToChange.delete(e.path),this.normalized.splice(this.normalized.indexOf(t),1)):2===i&&1===n?t.type=0:1===i&&0===n||(t.type=n)}else this.normalized.push(e),this.mapPathToChange.set(e.path,e)}normalize(){const e=[],t=[]
;return this.normalized.filter(t=>2===t.type||(e.push(t),!1)).sort((e,t)=>e.path.length-t.path.length).filter(e=>!t.some(t=>n.isParent(e.path,t,!r.isLinux))&&(t.push(e.path),!0)).concat(e)}}}),define(t[120],i([1,0,74,3,17,68,70,9,6]),function(e,t,i,r,s,o,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class u extends r.Disposable{constructor(e,t,i,n){super(),this.path=e,this.onFileChanges=t,this.onLogMessage=i,this.verboseLogging=n,this.fileChangesDelayer=this._register(new c.ThrottledDelayer(2*a.CHANGE_BUFFER_DELAY)),this.fileChangesBuffer=[],this.startWatching()}setVerboseLogging(e){this.verboseLogging=e}startWatching(){return n(this,void 0,void 0,function*(){try{const{stat:e,isSymbolicLink:t}=yield s.statLink(this.path);if(this.isDisposed)return;let i=this.path;if(t)try{i=yield o.realpath(i)}catch(e){this.onError(e)}e.isDirectory()?this._register(a.watchFolder(i,(e,t)=>{this.onFileChange({type:"changed"===e?0:"added"===e?1:2,path:l.join(this.path,l.basename(t))})
},e=>this.onError(e))):this._register(a.watchFile(i,e=>{this.onFileChange({type:"changed"===e?0:2,path:this.path})},e=>this.onError(e)))}catch(e){this.onError(e)}})}onFileChange(e){this.fileChangesBuffer.push(e),this.verboseLogging&&this.onVerbose(`${1===e.type?"[ADDED]":2===e.type?"[DELETED]":"[CHANGED]"} ${e.path}`),this.fileChangesDelayer.trigger(()=>{const e=this.fileChangesBuffer;this.fileChangesBuffer=[];const t=i.normalizeFileChanges(e);return this.verboseLogging&&t.forEach(e=>{this.onVerbose(`>> normalized ${1===e.type?"[ADDED]":2===e.type?"[DELETED]":"[CHANGED]"} ${e.path}`)}),t.length>0&&this.onFileChanges(t),Promise.resolve()})}onError(e){this.isDisposed||this.onLogMessage({type:"error",message:`[File Watcher (node.js)] ${e}`})}onVerbose(e){this.isDisposed||this.onLogMessage({type:"trace",message:`[File Watcher (node.js)] ${e}`})}dispose(){this.isDisposed=!0,super.dispose()}}t.FileWatcher=u}),define(t[44],i([1,0,5]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),
t.IHistoryMainService=i.createDecorator("historyMainService"),t.isRecentWorkspace=function(e){return e.hasOwnProperty("workspace")},t.isRecentFolder=function(e){return e.hasOwnProperty("folderUri")},t.isRecentFile=function(e){return e.hasOwnProperty("fileUri")}}),define(t[122],i([1,0,8,44]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restoreRecentlyOpened=function(e,t){const n={workspaces:[],files:[]};if(e){const r=function(e,i){for(let n=0;n<e.length;n++)try{i(e[n],n)}catch(i){t.warn(`Error restoring recent entry ${JSON.stringify(e[n])}: ${i.toString()}. Skip entry.`)}},s=e;Array.isArray(s.workspaces3)?r(s.workspaces3,(e,t)=>{const r=Array.isArray(s.workspaceLabels)&&s.workspaceLabels[t]||void 0;"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.configURIPath?n.workspaces.push({label:r,workspace:{id:e.id,configPath:i.URI.parse(e.configURIPath)}}):"string"==typeof e&&n.workspaces.push({label:r,folderUri:i.URI.parse(e)})
}):Array.isArray(s.workspaces2)?r(s.workspaces2,e=>{"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.configPath?n.workspaces.push({workspace:{id:e.id,configPath:i.URI.file(e.configPath)}}):"string"==typeof e&&n.workspaces.push({folderUri:i.URI.parse(e)})}):Array.isArray(s.workspaces)&&r(s.workspaces,e=>{"string"==typeof e?n.workspaces.push({folderUri:i.URI.file(e)}):function(e){return"object"==typeof e&&"string"==typeof e.id&&"string"==typeof e.configPath}(e)?n.workspaces.push({workspace:{id:e.id,configPath:i.URI.file(e.configPath)}}):function(e){return e&&"string"==typeof e.path&&"string"==typeof e.scheme}(e)&&n.workspaces.push({folderUri:i.URI.revive(e)})}),Array.isArray(s.files2)?r(s.files2,(e,t)=>{const r=Array.isArray(s.fileLabels)&&s.fileLabels[t]||void 0;"string"==typeof e&&n.files.push({label:r,fileUri:i.URI.parse(e)})}):Array.isArray(s.files)&&r(s.files,e=>{"string"==typeof e&&n.files.push({fileUri:i.URI.file(e)})})}return n},t.toStoreData=function(e){const t={workspaces3:[],files2:[]}
;let i=!1;const r=[];for(const s of e.workspaces)n.isRecentFolder(s)?t.workspaces3.push(s.folderUri.toString()):t.workspaces3.push({id:s.workspace.id,configURIPath:s.workspace.configPath.toString()}),r.push(s.label||null),i=i||!!s.label;i&&(t.workspaceLabels=r),i=!1;const s=[];for(const n of e.files)t.files2.push(n.fileUri.toString()),s.push(n.label||null),i=i||!!n.label;return i&&(t.fileLabels=s),t}}),define(t[62],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(...e){this._entries=new Map;for(let[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){this._entries.forEach((t,i)=>e(i,t))}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=i}),define(t[124],i([1,0,18,113,59,5,62,9]),function(e,t,i,n,r,s,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const c="function"==typeof Proxy;class l extends Error{constructor(e){
super("cyclic dependency between services"),this.message=e.toString()}}class u{constructor(e=new o.ServiceCollection,t=!1,i){this._services=e,this._strict=t,this._parent=i,this._services.set(s.IInstantiationService,this)}createChild(e){return new u(e,this._strict,this)}invokeFunction(e,...t){let n=h.traceInvocation(e),r=!1;try{const o={get:(e,t)=>{if(r)throw i.illegalState("service accessor is only valid during the invocation of its target method");const o=this._getOrCreateServiceInstance(e,n);if(!o&&t!==s.optional)throw new Error(`[invokeFunction] unknown service '${e}'`);return o}};return e.apply(void 0,[o,...t])}finally{r=!0,n.stop()}}createInstance(e,...t){let i,n;return e instanceof r.SyncDescriptor?(i=h.traceCreation(e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=h.traceCreation(e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){let n=s._util.getServiceDependencies(e).sort((e,t)=>e.index-t.index),r=[];for(const t of n){
let n=this._getOrCreateServiceInstance(t.id,i);if(!n&&this._strict&&!t.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);r.push(n)}let o=n.length>0?n[0].index:t.length;if(t.length!==o){console.warn(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);let i=o-t.length;t=i>0?t.concat(new Array(i)):t.slice(0,o)}return new e(...[...t,...r])}_setServiceInstance(e,t){if(this._services.get(e)instanceof r.SyncDescriptor)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let i=this._getServiceInstanceOrDescriptor(e);return i instanceof r.SyncDescriptor?this._createAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}
_createAndCacheServiceInstance(e,t,i){const o=new n.Graph(e=>e.id.toString());let a=0;const c=[{id:e,desc:t,_trace:i}];for(;c.length;){const t=c.pop();if(o.lookupOrInsertNode(t),a++>100)throw new l(o);for(let i of s._util.getServiceDependencies(t.desc.ctor)){let n=this._getServiceInstanceOrDescriptor(i.id);if(n||i.optional||console.warn(`[createInstance] ${e} depends on ${i.id} which is NOT registered.`),n instanceof r.SyncDescriptor){const e={id:i.id,desc:n,_trace:t._trace.branch(i.id,!0)};o.insertEdge(t,e),c.push(e)}}}for(;;){const e=o.roots();if(0===e.length){if(!o.isEmpty())throw new l(o);break}for(const{data:t}of e){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e),o.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,s){if(this._services.get(e)instanceof r.SyncDescriptor)return this._createServiceInstance(t,i,n,s)
;if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,s);throw new Error("illegalState - creating UNKNOWN service instance")}_createServiceInstance(e,t=[],i,n){if(i&&c){const i=new a.IdleValue(()=>this._createInstance(e,t,n));return new Proxy(Object.create(null),{get:(e,t)=>i.getValue()[t],set:(e,t,n)=>(i.getValue()[t]=n,!0)})}return this._createInstance(e,t,n)}}t.InstantiationService=u;var d;!function(e){e[e.Creation=0]="Creation",e[e.Invocation=1]="Invocation",e[e.Branch=2]="Branch"}(d||(d={}));class h{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return h._None}static traceCreation(e){return h._None}branch(e,t){let i=new h(2,e.toString());return this._dep.push([e,t,i]),i}stop(){function e(t,n){let r=[],s=new Array(t+1).join("\t");for(const[o,a,c]of n._dep)if(a&&c){i=!0,r.push(`${s}CREATES -> ${o}`);let n=e(t+1,c);n&&r.push(n)}else r.push(`${s}uses -> ${o}`);return r.join("\n")}let t=Date.now()-this._start;h._totals+=t
;let i=!1,n=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,`${e(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${h._totals.toFixed(2)}ms)`];(t>2||i)&&console.log(n.join("\n"))}}h._None=new class extends h{constructor(){super(-1,null)}stop(){}branch(){return this}},h._totals=0}),define(t[125],i([1,0,5]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IIssueService=i.createDecorator("issueService");!function(e){e[e.Bug=0]="Bug",e[e.PerformanceIssue=1]="PerformanceIssue",e[e.FeatureRequest=2]="FeatureRequest",e[e.SettingsSearchIssue=3]="SettingsSearchIssue"}(t.IssueType||(t.IssueType={}))}),define(t[126],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"openIssueReporter":return this.service.openReporter(i);case"openProcessExplorer":return this.service.openProcessExplorer(i);case"getSystemStatus":
return this.service.getSystemStatus()}throw new Error(`Call not found: ${t}`)}}t.IssueChannel=i}),define(t[127],i([1,0,18,170,52]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s extends r.ResolvedKeybinding{constructor(e,t){if(super(),0===t.length)throw i.illegalArgument("parts");this._os=e,this._parts=t}getLabel(){return n.UILabelProvider.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return n.AriaLabelProvider.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1?null:n.ElectronAcceleratorLabelProvider.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return n.UserSettingsLabelProvider.toLabel(this._os,this._parts,e=>this._getUserSettingsLabel(e))}isWYSIWYG(){return this._parts.every(e=>this._isWYSIWYG(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){
return new r.ResolvedKeybindingPart(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}}t.BaseResolvedKeybinding=s}),define(t[128],i([1,0,52,127]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends n.BaseResolvedKeybinding{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(2===this._os)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return i.KeyCodeUtils.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":i.KeyCodeUtils.toString(e.keyCode)}_keyCodeToElectronAccelerator(e){if(e>=93&&e<=108)return null;switch(e){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return i.KeyCodeUtils.toString(e)}_getElectronAccelerator(e){
return e.isDuplicateModifierCase()?null:this._keyCodeToElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=i.KeyCodeUtils.toUserSettingsUS(e.keyCode);return t?t.toLowerCase():t}_isWYSIWYG(){return!0}_getDispatchPart(e){return r.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=i.KeyCodeUtils.toString(e.keyCode)}}t.USLayoutResolvedKeybinding=r}),define(t[129],i([1,0,4,5,9]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ILifecycleService=n.createDecorator("lifecycleService");!function(e){e[e.CLOSE=1]="CLOSE",e[e.QUIT=2]="QUIT",e[e.RELOAD=3]="RELOAD",e[e.LOAD=4]="LOAD"}(t.ShutdownReason||(t.ShutdownReason={}));!function(e){e[e.NewWindow=1]="NewWindow",e[e.ReloadedWindow=3]="ReloadedWindow",e[e.ReopenedWindow=4]="ReopenedWindow"}(t.StartupKind||(t.StartupKind={})),
t.StartupKindToString=function(e){switch(e){case 1:return"NewWindow";case 3:return"ReloadedWindow";case 4:return"ReopenedWindow"}};!function(e){e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Restored=3]="Restored",e[e.Eventually=4]="Eventually"}(t.LifecyclePhase||(t.LifecyclePhase={})),t.LifecyclePhaseToString=function(e){switch(e){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"Eventually"}},t.NullLifecycleService={_serviceBrand:null,onBeforeShutdown:i.Event.None,onWillShutdown:i.Event.None,onShutdown:i.Event.None,phase:3,startupKind:1,when:()=>Promise.resolve()},t.handleVetos=function(e,t){if(0===e.length)return Promise.resolve(!1);const i=[];let n=!1;for(let s of e){if(!0===s)return Promise.resolve(!0);r.isThenable(s)&&i.push(s.then(e=>{e&&(n=!0)},e=>{t(e),n=!0}))}return Promise.all(i).then(()=>n)}}),define(t[7],i([1,0,5,3,2,4]),function(e,t,i,n,r,s){"use strict";function o(){return(new Date).toISOString()}Object.defineProperty(t,"__esModule",{value:!0}),
t.ILogService=i.createDecorator("logService");var a;!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"}(a=t.LogLevel||(t.LogLevel={})),t.DEFAULT_LOG_LEVEL=a.Info;class c extends n.Disposable{constructor(){super(...arguments),this.level=t.DEFAULT_LOG_LEVEL,this._onDidChangeLogLevel=this._register(new s.Emitter),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}t.AbstractLogService=c;class l extends c{constructor(e=t.DEFAULT_LOG_LEVEL){super(),this.setLevel(e),this.useColors=!r.isWindows}trace(e,...t){this.getLevel()<=a.Trace&&(this.useColors?console.log(`[90m[main ${o()}][0m`,e,...t):console.log(`[main ${o()}]`,e,...t))}debug(e,...t){this.getLevel()<=a.Debug&&(this.useColors?console.log(`[90m[main ${o()}][0m`,e,...t):console.log(`[main ${o()}]`,e,...t))}info(e,...t){
this.getLevel()<=a.Info&&(this.useColors?console.log(`[90m[main ${o()}][0m`,e,...t):console.log(`[main ${o()}]`,e,...t))}warn(e,...t){this.getLevel()<=a.Warning&&(this.useColors?console.warn(`[93m[main ${o()}][0m`,e,...t):console.warn(`[main ${o()}]`,e,...t))}error(e,...t){this.getLevel()<=a.Error&&(this.useColors?console.error(`[91m[main ${o()}][0m`,e,...t):console.error(`[main ${o()}]`,e,...t))}critical(e,...t){this.getLevel()<=a.Critical&&(this.useColors?console.error(`[90m[main ${o()}][0m`,e,...t):console.error(`[main ${o()}]`,e,...t))}dispose(){}}t.ConsoleLogMainService=l;class u extends c{constructor(e=t.DEFAULT_LOG_LEVEL){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=a.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=a.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=a.Info&&console.log("%c INFO","color: #33f",e,...t)}warn(e,...t){this.getLevel()<=a.Warning&&console.log("%c WARN","color: #993",e,...t)}
error(e,...t){this.getLevel()<=a.Error&&console.log("%c  ERR","color: #f33",e,...t)}critical(e,...t){this.getLevel()<=a.Critical&&console.log("%cCRITI","background: #f33; color: white",e,...t)}dispose(){}}t.ConsoleLogService=u;class d extends c{constructor(e){super(),this.logServices=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.logServices)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.logServices)i.trace(e,...t)}debug(e,...t){for(const i of this.logServices)i.debug(e,...t)}info(e,...t){for(const i of this.logServices)i.info(e,...t)}warn(e,...t){for(const i of this.logServices)i.warn(e,...t)}error(e,...t){for(const i of this.logServices)i.error(e,...t)}critical(e,...t){for(const i of this.logServices)i.critical(e,...t)}dispose(){for(const e of this.logServices)e.dispose()}}t.MultiplexLogService=d;class h extends n.Disposable{constructor(e){super(),this.logService=e,this._register(e)}get onDidChangeLogLevel(){return this.logService.onDidChangeLogLevel}
setLevel(e){this.logService.setLevel(e)}getLevel(){return this.logService.getLevel()}trace(e,...t){this.logService.trace(e,...t)}debug(e,...t){this.logService.debug(e,...t)}info(e,...t){this.logService.info(e,...t)}warn(e,...t){this.logService.warn(e,...t)}error(e,...t){this.logService.error(e,...t)}critical(e,...t){this.logService.critical(e,...t)}}t.DelegatedLogService=h;class f{constructor(){this.onDidChangeLogLevel=(new s.Emitter).event}setLevel(e){}getLevel(){return a.Info}trace(e,...t){}debug(e,...t){}info(e,...t){}warn(e,...t){}error(e,...t){}critical(e,...t){}dispose(){}}t.NullLogService=f,t.getLogLevel=function(e){if(e.verbose)return a.Trace;if("string"==typeof e.args.log)switch(e.args.log.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warning;case"error":return a.Error;case"critical":return a.Critical;case"off":return a.Off}return t.DEFAULT_LOG_LEVEL}});var s=this&&this.__decorate||function(e,t,i,n){
var r,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,i,o):r(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},o=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};define(t[131],i([1,0,3,30,4,21,88,27,25,45,7,31,9,34,23]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let w=class extends i.Disposable{constructor(e){super(),this.logService=e,this.BUFFER_SIZE=65536,this._onDidChangeFileSystemProviderRegistrations=this._register(new a.Emitter),this.onDidChangeFileSystemProviderRegistrations=this._onDidChangeFileSystemProviderRegistrations.event,this._onWillActivateFileSystemProvider=this._register(new a.Emitter),this.onWillActivateFileSystemProvider=this._onWillActivateFileSystemProvider.event,this.provider=new Map,
this._onAfterOperation=this._register(new a.Emitter),this.onAfterOperation=this._onAfterOperation.event,this._onError=this._register(new a.Emitter),this.onError=this._onError.event,this._onFileChanges=this._register(new a.Emitter),this.onFileChanges=this._onFileChanges.event,this.activeWatchers=new Map,this.writeQueues=new Map}registerProvider(e,t){if(this.provider.has(e))throw new Error(`A provider for the scheme ${e} is already registered.`);this.provider.set(e,t),this._onDidChangeFileSystemProviderRegistrations.fire({added:!0,scheme:e,provider:t});const n=new i.DisposableStore;return n.add(t.onDidChangeFile(e=>this._onFileChanges.fire(new r.FileChangesEvent(e)))),"function"==typeof t.onDidErrorOccur&&n.add(t.onDidErrorOccur(e=>this._onError.fire(new Error(e)))),i.toDisposable(()=>{this._onDidChangeFileSystemProviderRegistrations.fire({added:!1,scheme:e,provider:t}),this.provider.delete(e),i.dispose(n)})}activateProvider(e){return n(this,void 0,void 0,function*(){const t=[]
;this._onWillActivateFileSystemProvider.fire({scheme:e,join(e){e&&t.push(e)}}),this.provider.has(e)||(yield Promise.all(t))})}canHandleResource(e){return this.provider.has(e.scheme)}hasCapability(e,t){const i=this.provider.get(e.scheme);return!!(i&&i.capabilities&t)}withProvider(e){return n(this,void 0,void 0,function*(){if(!c.isAbsolutePath(e))throw new r.FileOperationError(l.localize(0,null,this.resourceForError(e)),8);yield this.activateProvider(e.scheme);const t=this.provider.get(e.scheme);if(!t){const t=new Error;throw t.name="ENOPRO",t.message=l.localize(1,null,e.toString()),t}return t})}withReadWriteProvider(e){return n(this,void 0,void 0,function*(){const t=yield this.withProvider(e);if(r.hasOpenReadWriteCloseCapability(t)||r.hasReadWriteCapability(t))return t;throw new Error("Provider neither has FileReadWrite nor FileOpenReadWriteClose capability which is needed for the operation.")})}resolve(e,t){return n(this,void 0,void 0,function*(){try{return yield this.doResolveFile(e,t)}catch(t){
if(r.toFileSystemProviderErrorCode(t)===r.FileSystemProviderErrorCode.FileNotFound)throw new r.FileOperationError(l.localize(2,null,this.resourceForError(e)),1);throw this.ensureError(t)}})}doResolveFile(e,t){return n(this,void 0,void 0,function*(){const i=yield this.withProvider(e),n=t&&t.resolveTo,r=!(!t||!t.resolveSingleChildDescendants),s=!(!t||!t.resolveMetadata),o=yield i.stat(e);let a;return this.toFileStat(i,e,o,void 0,s,(t,i)=>(a||((a=u.TernarySearchTree.forPaths()).set(e.toString(),!0),d.isNonEmptyArray(n)&&n.forEach(e=>a.set(e.toString(),!0))),!!Boolean(a.findSuperstr(t.resource.toString())||a.get(t.resource.toString()))||!(!t.isDirectory||!r)&&1===i))})}toFileStat(e,t,i,s,o,a){return n(this,void 0,void 0,function*(){const l={resource:t,name:h.getBaseLabel(t),isDirectory:0!=(i.type&r.FileType.Directory),isSymbolicLink:0!=(i.type&r.FileType.SymbolicLink),isReadonly:!!(2048&e.capabilities),mtime:i.mtime,size:i.size,etag:r.etag({mtime:i.mtime,size:i.size})};if(l.isDirectory&&a(l,s)){try{
const i=yield e.readdir(t),r=yield Promise.all(i.map(([r,s])=>n(this,void 0,void 0,function*(){try{const n=c.joinPath(t,r),l=o?yield e.stat(n):{type:s};return yield this.toFileStat(e,n,l,i.length,o,a)}catch(e){return this.logService.trace(e),null}})));l.children=d.coalesce(r)}catch(e){this.logService.trace(e),l.children=[]}return l}return l})}resolveAll(e){return n(this,void 0,void 0,function*(){return Promise.all(e.map(e=>n(this,void 0,void 0,function*(){try{return{stat:yield this.doResolveFile(e.resource,e.options),success:!0}}catch(e){return this.logService.trace(e),{stat:void 0,success:!1}}})))})}exists(e){return n(this,void 0,void 0,function*(){const t=yield this.withProvider(e);try{return!!(yield t.stat(e))}catch(e){return!1}})}createFile(e,t=p.VSBuffer.fromString(""),i){return n(this,void 0,void 0,function*(){if(!!(!i||!i.overwrite)&&(yield this.exists(e)))throw new r.FileOperationError(l.localize(3,null,this.resourceForError(e)),3,i);const n=yield this.writeFile(e,t)
;return this._onAfterOperation.fire(new r.FileOperationEvent(e,0,n)),n})}writeFile(e,t,i){return n(this,void 0,void 0,function*(){const n=this.throwIfFileSystemIsReadonly(yield this.withReadWriteProvider(e));try{(yield this.validateWriteFile(n,e,i))||(yield this.mkdirp(n,c.dirname(e))),r.hasOpenReadWriteCloseCapability(n)?yield this.doWriteBuffered(n,e,t instanceof p.VSBuffer?p.bufferToReadable(t):t):yield this.doWriteUnbuffered(n,e,t)}catch(e){throw new r.FileOperationError(l.localize(4,null,this.ensureError(e).toString()),r.toFileOperationResult(e),i)}return this.resolve(e,{resolveMetadata:!0})})}validateWriteFile(e,t,i){return n(this,void 0,void 0,function*(){let n=void 0;try{n=yield e.stat(t)}catch(e){return}if(0!=(n.type&r.FileType.Directory))throw new r.FileOperationError(l.localize(5,null,this.resourceForError(t)),0,i);if(i&&"number"==typeof i.mtime&&"string"==typeof i.etag&&i.etag!==r.ETAG_DISABLED&&"number"==typeof n.mtime&&"number"==typeof n.size&&i.mtime<n.mtime&&i.etag!==r.etag({mtime:i.mtime,
size:n.size}))throw new r.FileOperationError(l.localize(6,null),3,i);return n})}readFile(e,t){return n(this,void 0,void 0,function*(){const i=yield this.readFileStream(e,t);return Object.assign({},i,{value:yield p.streamToBuffer(i.value)})})}readFileStream(e,t){return n(this,void 0,void 0,function*(){const i=yield this.withReadWriteProvider(e),n=new m.CancellationTokenSource,s=this.validateReadFile(e,t).then(e=>e,e=>{throw n.cancel(),e});try{t&&"string"==typeof t.etag&&t.etag!==r.ETAG_DISABLED&&(yield s);let o;o=r.hasOpenReadWriteCloseCapability(i)?Promise.resolve(this.readFileBuffered(i,e,n.token,t)):this.readFileUnbuffered(i,e,t);const[a,c]=yield Promise.all([s,o]);return Object.assign({},a,{value:c})}catch(e){throw new r.FileOperationError(l.localize(7,null,this.ensureError(e).toString()),r.toFileOperationResult(e),t)}})}readFileBuffered(e,t,i,n){const r=p.writeableBufferStream();let s=void 0;return this.doReadFileBuffered(e,t,r,i,n).then(void 0,e=>s=e).finally(()=>r.end(s)),r}
doReadFileBuffered(e,t,i,r,s){return n(this,void 0,void 0,function*(){const n=yield e.open(t,{create:!1});try{let t=0,o=0,a=s&&"number"==typeof s.length?s.length:void 0,c=p.VSBuffer.alloc(Math.min(this.BUFFER_SIZE,"number"==typeof a?a:this.BUFFER_SIZE)),l=s&&"number"==typeof s.position?s.position:0,u=0;do{l+=o=yield e.read(n,l,c.buffer,u,c.byteLength-u),u+=o,t+=o,"number"==typeof a&&(a-=o),u===c.byteLength&&(i.write(c),c=p.VSBuffer.alloc(Math.min(this.BUFFER_SIZE,"number"==typeof a?a:this.BUFFER_SIZE)),u=0)}while(o>0&&("number"!=typeof a||a>0)&&this.throwIfCancelled(r)&&this.throwIfTooLarge(t,s));if(u>0){let e=u;"number"==typeof a&&(e=Math.min(u,a)),i.write(c.slice(0,e))}}catch(e){throw this.ensureError(e)}finally{yield e.close(n)}})}readFileUnbuffered(e,t,i){return n(this,void 0,void 0,function*(){let n=yield e.readFile(t);return i&&"number"==typeof i.position&&(n=n.slice(i.position)),i&&"number"==typeof i.length&&(n=n.slice(0,i.length)),p.bufferToStream(p.VSBuffer.wrap(n))})}validateReadFile(e,t){
return n(this,void 0,void 0,function*(){const i=yield this.resolve(e,{resolveMetadata:!0});if(i.isDirectory)throw new r.FileOperationError(l.localize(8,null,this.resourceForError(e)),0,t);if(t&&"string"==typeof t.etag&&t.etag!==r.ETAG_DISABLED&&t.etag===i.etag)throw new r.FileOperationError(l.localize(9,null),2,t);if(t&&t.limits){if("number"==typeof t.limits.memory&&i.size>t.limits.memory)throw new r.FileOperationError(l.localize(10,null),9);if("number"==typeof t.limits.size&&i.size>t.limits.size)throw new r.FileOperationError(l.localize(11,null),7)}return i})}move(e,t,i){return n(this,void 0,void 0,function*(){const n=this.throwIfFileSystemIsReadonly(yield this.withReadWriteProvider(e)),s=this.throwIfFileSystemIsReadonly(yield this.withReadWriteProvider(t)),o=yield this.doMoveCopy(n,e,s,t,"move",i),a=yield this.resolve(t,{resolveMetadata:!0});return this._onAfterOperation.fire(new r.FileOperationEvent(e,"move"===o?2:3,a)),a})}copy(e,t,i){return n(this,void 0,void 0,function*(){
const n=yield this.withReadWriteProvider(e),s=this.throwIfFileSystemIsReadonly(yield this.withReadWriteProvider(t)),o=yield this.doMoveCopy(n,e,s,t,"copy",i),a=yield this.resolve(t,{resolveMetadata:!0});return this._onAfterOperation.fire(new r.FileOperationEvent(e,"copy"===o?3:2,a)),a})}doMoveCopy(e,t,i,s,o,a){return n(this,void 0,void 0,function*(){if(t.toString()===s.toString())return o;const{exists:n,isSameResourceWithDifferentPathCase:l}=yield this.doValidateMoveCopy(e,t,i,s,o,a);if(n&&!l&&a&&(yield this.del(s,{recursive:!0})),yield this.mkdirp(i,c.dirname(s)),"copy"===o){if(e===i&&r.hasFileFolderCopyCapability(e))yield e.copy(t,s,{overwrite:!!a});else{const n=yield this.resolve(t);n.isDirectory?yield this.doCopyFolder(e,n,i,s):yield this.doCopyFile(e,t,i,s)}return o}return e===i?(yield e.rename(t,s,{overwrite:!!a}),o):(yield this.doMoveCopy(e,t,i,s,"copy",a),yield this.del(t,{recursive:!0}),"copy")})}doCopyFile(e,t,i,s){return n(this,void 0,void 0,function*(){
return r.hasOpenReadWriteCloseCapability(e)&&r.hasOpenReadWriteCloseCapability(i)?this.doPipeBuffered(e,t,i,s):r.hasOpenReadWriteCloseCapability(e)&&r.hasReadWriteCapability(i)?this.doPipeBufferedToUnbuffered(e,t,i,s):r.hasReadWriteCapability(e)&&r.hasOpenReadWriteCloseCapability(i)?this.doPipeUnbufferedToBuffered(e,t,i,s):r.hasReadWriteCapability(e)&&r.hasReadWriteCapability(i)?this.doPipeUnbuffered(e,t,i,s):void 0})}doCopyFolder(e,t,i,r){return n(this,void 0,void 0,function*(){yield i.mkdir(r),Array.isArray(t.children)&&(yield Promise.all(t.children.map(t=>n(this,void 0,void 0,function*(){const n=c.joinPath(r,t.name);return t.isDirectory?this.doCopyFolder(e,yield this.resolve(t.resource),i,n):this.doCopyFile(e,t.resource,i,n)}))))})}doValidateMoveCopy(e,t,i,s,o,a){return n(this,void 0,void 0,function*(){let n=!1;if(e===i){const i=!!(1024&e.capabilities);if(i||(n=c.isEqual(t,s,!0)),n&&"copy"===o)throw new Error(l.localize(12,null));if(!n&&c.isEqualOrParent(s,t,!i))throw new Error(l.localize(13,null))}
const u=yield this.exists(s);if(u&&!n){if(!a)throw new r.FileOperationError(l.localize(14,null),4);if(e===i){const i=!!(1024&e.capabilities);if(c.isEqualOrParent(t,s,!i))throw new Error(l.localize(15,null))}}return{exists:u,isSameResourceWithDifferentPathCase:n}})}createFolder(e){return n(this,void 0,void 0,function*(){const t=this.throwIfFileSystemIsReadonly(yield this.withProvider(e));yield this.mkdirp(t,e);const i=yield this.resolve(e,{resolveMetadata:!0});return this._onAfterOperation.fire(new r.FileOperationEvent(e,0,i)),i})}mkdirp(e,t){return n(this,void 0,void 0,function*(){const i=[];for(;!c.isEqual(t,c.dirname(t));)try{if(0==((yield e.stat(t)).type&r.FileType.Directory))throw new Error(l.localize(16,null,this.resourceForError(t)));break}catch(e){if(r.toFileSystemProviderErrorCode(e)!==r.FileSystemProviderErrorCode.FileNotFound)throw e;i.push(c.basename(t)),t=c.dirname(t)}for(let n=i.length-1;n>=0;n--)t=c.joinPath(t,i[n]),yield e.mkdir(t)})}del(e,t){return n(this,void 0,void 0,function*(){
const i=this.throwIfFileSystemIsReadonly(yield this.withProvider(e)),n=!(!t||!t.useTrash);if(n&&!(4096&i.capabilities))throw new Error(l.localize(17,null));const s=!(!t||!t.recursive);if(!s&&(yield this.exists(e))){const t=yield this.resolve(e);if(t.isDirectory&&Array.isArray(t.children)&&t.children.length>0)throw new Error(l.localize(18,null,this.resourceForError(e)))}yield i.delete(e,{recursive:s,useTrash:n}),this._onAfterOperation.fire(new r.FileOperationEvent(e,1))})}watch(e,t={recursive:!1,excludes:[]}){let n=!1,r=i.toDisposable(()=>n=!0);return this.doWatch(e,t).then(e=>{n?i.dispose(e):r=e},e=>this.logService.error(e)),i.toDisposable(()=>i.dispose(r))}doWatch(e,t){return n(this,void 0,void 0,function*(){const n=yield this.withProvider(e),r=this.toWatchKey(n,e,t),s=this.activeWatchers.get(r)||{count:0,disposable:n.watch(e,t)};return this.activeWatchers.has(r)||this.activeWatchers.set(r,s),s.count+=1,i.toDisposable(()=>{s.count--,0===s.count&&(i.dispose(s.disposable),this.activeWatchers.delete(r))})})}
toWatchKey(e,t,i){return[this.toMapKey(e,t),String(i.recursive),i.excludes.join()].join()}dispose(){super.dispose(),this.activeWatchers.forEach(e=>i.dispose(e.disposable)),this.activeWatchers.clear()}ensureWriteQueue(e,t){const n=this.toMapKey(e,t);let r=this.writeQueues.get(n);if(!r){r=new g.Queue,this.writeQueues.set(n,r);a.Event.once(r.onFinished)(()=>{this.writeQueues.delete(n),i.dispose(r)})}return r}toMapKey(e,t){return!!(1024&e.capabilities)?t.toString():t.toString().toLowerCase()}doWriteBuffered(e,t,i){return n(this,void 0,void 0,function*(){return this.ensureWriteQueue(e,t).queue(()=>n(this,void 0,void 0,function*(){const n=yield e.open(t,{create:!0});try{p.isVSBufferReadableStream(i)?yield this.doWriteStreamBufferedQueued(e,n,i):yield this.doWriteReadableBufferedQueued(e,n,i)}catch(e){throw this.ensureError(e)}finally{yield e.close(n)}}))})}doWriteStreamBufferedQueued(e,t,i){return new Promise((r,s)=>{let o=0;i.on("data",r=>n(this,void 0,void 0,function*(){i.pause();try{
yield this.doWriteBuffer(e,t,r,r.byteLength,o,0)}catch(e){return s(e)}o+=r.byteLength,setTimeout(()=>i.resume())})),i.on("error",e=>s(e)),i.on("end",()=>r())})}doWriteReadableBufferedQueued(e,t,i){return n(this,void 0,void 0,function*(){let n,r=0;for(;n=i.read();)yield this.doWriteBuffer(e,t,n,n.byteLength,r,0),r+=n.byteLength})}doWriteBuffer(e,t,i,r,s,o){return n(this,void 0,void 0,function*(){let n=0;for(;n<r;){n+=(yield e.write(t,s+n,i.buffer,o+n,r-n))}})}doWriteUnbuffered(e,t,i){return n(this,void 0,void 0,function*(){return this.ensureWriteQueue(e,t).queue(()=>this.doWriteUnbufferedQueued(e,t,i))})}doWriteUnbufferedQueued(e,t,i){return n(this,void 0,void 0,function*(){let n;return n=i instanceof p.VSBuffer?i:p.isVSBufferReadableStream(i)?yield p.streamToBuffer(i):p.readableToBuffer(i),e.writeFile(t,n.buffer,{create:!0,overwrite:!0})})}doPipeBuffered(e,t,i,r){return n(this,void 0,void 0,function*(){return this.ensureWriteQueue(i,r).queue(()=>this.doPipeBufferedQueued(e,t,i,r))})}
doPipeBufferedQueued(e,t,i,r){return n(this,void 0,void 0,function*(){let n=void 0,s=void 0;try{n=yield e.open(t,{create:!1}),s=yield i.open(r,{create:!0});const o=p.VSBuffer.alloc(this.BUFFER_SIZE);let a=0,c=0,l=0;do{l=yield e.read(n,a,o.buffer,c,o.byteLength-c),yield this.doWriteBuffer(i,s,o,l,a,c),a+=l,(c+=l)===o.byteLength&&(c=0)}while(l>0)}catch(e){throw this.ensureError(e)}finally{yield Promise.all(["number"==typeof n?e.close(n):Promise.resolve(),"number"==typeof s?i.close(s):Promise.resolve()])}})}doPipeUnbuffered(e,t,i,r){return n(this,void 0,void 0,function*(){return this.ensureWriteQueue(i,r).queue(()=>this.doPipeUnbufferedQueued(e,t,i,r))})}doPipeUnbufferedQueued(e,t,i,r){return n(this,void 0,void 0,function*(){return i.writeFile(r,yield e.readFile(t),{create:!0,overwrite:!0})})}doPipeUnbufferedToBuffered(e,t,i,r){return n(this,void 0,void 0,function*(){return this.ensureWriteQueue(i,r).queue(()=>this.doPipeUnbufferedToBufferedQueued(e,t,i,r))})}doPipeUnbufferedToBufferedQueued(e,t,i,r){
return n(this,void 0,void 0,function*(){const n=yield i.open(r,{create:!0});try{const r=yield e.readFile(t);yield this.doWriteBuffer(i,n,p.VSBuffer.wrap(r),r.byteLength,0,0)}catch(e){throw this.ensureError(e)}finally{yield i.close(n)}})}doPipeBufferedToUnbuffered(e,t,i,r){return n(this,void 0,void 0,function*(){const n=yield p.streamToBuffer(this.readFileBuffered(e,t,m.CancellationToken.None));yield this.doWriteUnbuffered(i,r,n)})}throwIfFileSystemIsReadonly(e){if(2048&e.capabilities)throw new r.FileOperationError(l.localize(19,null),6);return e}throwIfCancelled(e){if(e.isCancellationRequested)throw new Error("cancelled");return!0}ensureError(e){return e||new Error(l.localize(20,null))}throwIfTooLarge(e,t){if(t&&t.limits){if("number"==typeof t.limits.memory&&e>t.limits.memory)throw new r.FileOperationError(l.localize(21,null),9);if("number"==typeof t.limits.size&&e>t.limits.size)throw new r.FileOperationError(l.localize(22,null),7)}return!0}resourceForError(e){
return e.scheme===v.Schemas.file?e.fsPath:e.toString(!0)}};w=s([o(0,f.ILogService)],w),t.FileService=w}),define(t[132],i([1,0,20,60,3,30,4,2,17,6,21,32,9,7,89,74,109,111,107,120]),function(e,t,i,r,s,o,a,c,l,u,d,h,f,p,g,m,v,w,y,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class b extends s.Disposable{constructor(e,t){super(),this.logService=e,this.watcherOptions=t,this.onDidChangeCapabilities=a.Event.None,this.mapHandleToPos=new Map,this.writeHandles=new Set,this.canFlush=!0,this._onDidWatchErrorOccur=this._register(new a.Emitter),this.onDidErrorOccur=this._onDidWatchErrorOccur.event,this._onDidChangeFile=this._register(new a.Emitter),this.recursiveFoldersToWatch=[],this.recursiveWatchRequestDelayer=this._register(new f.ThrottledDelayer(0))}get capabilities(){return this._capabilities||(this._capabilities=14,c.isLinux&&(this._capabilities|=1024)),this._capabilities}stat(e){return n(this,void 0,void 0,function*(){try{const{stat:t,isSymbolicLink:i}=yield l.statLink(this.toFilePath(e));let n
;return n=i?o.FileType.SymbolicLink|(t.isDirectory()?o.FileType.Directory:o.FileType.File):t.isFile()?o.FileType.File:t.isDirectory()?o.FileType.Directory:o.FileType.Unknown,{type:n,ctime:t.ctime.getTime(),mtime:t.mtime.getTime(),size:t.size}}catch(e){throw this.toFileSystemProviderError(e)}})}readdir(e){return n(this,void 0,void 0,function*(){try{const t=yield l.readdir(this.toFilePath(e)),i=[];return yield Promise.all(t.map(t=>n(this,void 0,void 0,function*(){try{const n=yield this.stat(d.joinPath(e,t));i.push([t,n.type])}catch(e){this.logService.trace(e)}}))),i}catch(e){throw this.toFileSystemProviderError(e)}})}readFile(e){return n(this,void 0,void 0,function*(){try{const t=this.toFilePath(e);return yield l.readFile(t)}catch(e){throw this.toFileSystemProviderError(e)}})}writeFile(e,t,i){return n(this,void 0,void 0,function*(){let n=void 0;try{const r=this.toFilePath(e),s=yield l.exists(r)
;if(s&&!i.overwrite)throw o.createFileSystemProviderError(new Error(g.localize(0,null)),o.FileSystemProviderErrorCode.FileExists);if(!s&&!i.create)throw o.createFileSystemProviderError(new Error(g.localize(1,null)),o.FileSystemProviderErrorCode.FileNotFound);n=yield this.open(e,{create:!0}),yield this.write(n,0,t,0,t.byteLength)}catch(e){throw this.toFileSystemProviderError(e)}finally{"number"==typeof n&&(yield this.close(n))}})}open(e,t){return n(this,void 0,void 0,function*(){try{const n=this.toFilePath(e);let s=void 0;if(t.create){if(c.isWindows&&(yield l.exists(n)))try{yield l.truncate(n,0),s="r+"}catch(e){this.logService.trace(e)}s||(s="w")}else s="r";const o=yield r.promisify(i.open)(n,s);return this.mapHandleToPos.set(o,0),t.create&&this.writeHandles.add(o),o}catch(e){throw this.toFileSystemProviderError(e)}})}close(e){return n(this,void 0,void 0,function*(){try{if(this.mapHandleToPos.delete(e),this.writeHandles.delete(e)&&this.canFlush)try{yield r.promisify(i.fdatasync)(e)}catch(e){this.canFlush=!1,
this.logService.error(e)}return yield r.promisify(i.close)(e)}catch(e){throw this.toFileSystemProviderError(e)}})}read(e,t,s,o,a){return n(this,void 0,void 0,function*(){const n=this.normalizePos(e,t);let c=null;try{const t=yield r.promisify(i.read)(e,s,o,a,n);return c="number"==typeof t?t:t.bytesRead}catch(e){throw this.toFileSystemProviderError(e)}finally{this.updatePos(e,n,c)}})}normalizePos(e,t){return t===this.mapHandleToPos.get(e)?null:t}updatePos(e,t,i){const n=this.mapHandleToPos.get(e);"number"==typeof n&&("number"==typeof t||("number"==typeof i?this.mapHandleToPos.set(e,n+i):this.mapHandleToPos.delete(e)))}write(e,t,i,r,s){return n(this,void 0,void 0,function*(){return f.retry(()=>this.doWrite(e,t,i,r,s),100,3)})}doWrite(e,t,s,o,a){return n(this,void 0,void 0,function*(){const n=this.normalizePos(e,t);let c=null;try{const t=yield r.promisify(i.write)(e,s,o,a,n);return c="number"==typeof t?t:t.bytesWritten}catch(e){throw this.toFileSystemProviderError(e)}finally{this.updatePos(e,n,c)}})}mkdir(e){
return n(this,void 0,void 0,function*(){try{yield r.promisify(i.mkdir)(this.toFilePath(e))}catch(e){throw this.toFileSystemProviderError(e)}})}delete(e,t){return n(this,void 0,void 0,function*(){try{const i=this.toFilePath(e);yield this.doDelete(i,t)}catch(e){throw this.toFileSystemProviderError(e)}})}doDelete(e,t){return n(this,void 0,void 0,function*(){t.recursive?yield l.rimraf(e,l.RimRafMode.MOVE):yield l.unlink(e)})}rename(e,t,i){return n(this,void 0,void 0,function*(){const n=this.toFilePath(e),r=this.toFilePath(t);if(n!==r)try{yield this.validateTargetDeleted(e,t,"move",i&&i.overwrite),yield l.move(n,r)}catch(e){throw"EINVAL"!==e.code&&"EBUSY"!==e.code&&"ENAMETOOLONG"!==e.code||(e=new Error(g.localize(2,null,u.basename(n),u.basename(u.dirname(r)),e.toString()))),this.toFileSystemProviderError(e)}})}copy(e,t,i){return n(this,void 0,void 0,function*(){const n=this.toFilePath(e),r=this.toFilePath(t);if(n!==r)try{yield this.validateTargetDeleted(e,t,"copy",i&&i.overwrite),yield l.copy(n,r)}catch(e){
throw"EINVAL"!==e.code&&"EBUSY"!==e.code&&"ENAMETOOLONG"!==e.code||(e=new Error(g.localize(3,null,u.basename(n),u.basename(u.dirname(r)),e.toString()))),this.toFileSystemProviderError(e)}})}validateTargetDeleted(e,t,i,r){return n(this,void 0,void 0,function*(){const n=!!(1024&this.capabilities),s=this.toFilePath(e),a=this.toFilePath(t);let c=!1;if(n||(c=h.isEqual(s,a,!0)),c&&"copy"===i)throw o.createFileSystemProviderError(new Error("File cannot be copied to same path with different path case"),o.FileSystemProviderErrorCode.FileExists);if(!c&&(yield l.exists(a))){if(!r)throw o.createFileSystemProviderError(new Error("File at target already exists"),o.FileSystemProviderErrorCode.FileExists);yield this.delete(t,{recursive:!0,useTrash:!1})}})}get onDidChangeFile(){return this._onDidChangeFile.event}watch(e,t){return t.recursive?this.watchRecursive(e,t.excludes):this.watchNonRecursive(e)}watchRecursive(e,t){const i={path:this.toFilePath(e),excludes:t};return this.recursiveFoldersToWatch.push(i),
this.refreshRecursiveWatchers(),s.toDisposable(()=>{this.recursiveFoldersToWatch.splice(this.recursiveFoldersToWatch.indexOf(i),1),this.refreshRecursiveWatchers()})}refreshRecursiveWatchers(){this.recursiveWatchRequestDelayer.trigger(()=>(this.doRefreshRecursiveWatchers(),Promise.resolve()))}doRefreshRecursiveWatchers(){if(this.recursiveWatcher instanceof y.FileWatcher)this.recursiveWatcher.setFolders(this.recursiveFoldersToWatch);else if(s.dispose(this.recursiveWatcher),this.recursiveWatcher=void 0,this.recursiveFoldersToWatch.length>0){let e,t=void 0;this.watcherOptions&&this.watcherOptions.usePolling?(e=v.FileWatcher,t=this.watcherOptions):e=1===this.recursiveFoldersToWatch.length?c.isWindows?w.FileWatcher:v.FileWatcher:y.FileWatcher,this.recursiveWatcher=new e(this.recursiveFoldersToWatch,e=>this._onDidChangeFile.fire(m.toFileChanges(e)),e=>{"error"===e.type&&this._onDidWatchErrorOccur.fire(e.message),this.logService[e.type](e.message)},this.logService.getLevel()===p.LogLevel.Trace,t),
this.recursiveWatcherLogLevelListener||(this.recursiveWatcherLogLevelListener=this.logService.onDidChangeLogLevel(()=>{this.recursiveWatcher&&this.recursiveWatcher.setVerboseLogging(this.logService.getLevel()===p.LogLevel.Trace)}))}}watchNonRecursive(e){const t=new S.FileWatcher(this.toFilePath(e),e=>this._onDidChangeFile.fire(m.toFileChanges(e)),e=>{"error"===e.type&&this._onDidWatchErrorOccur.fire(e.message),this.logService[e.type](e.message)},this.logService.getLevel()===p.LogLevel.Trace),i=this.logService.onDidChangeLogLevel(()=>{t.setVerboseLogging(this.logService.getLevel()===p.LogLevel.Trace)});return s.combinedDisposable(t,i)}toFilePath(e){return u.normalize(e.fsPath)}toFileSystemProviderError(e){if(e instanceof o.FileSystemProviderError)return e;let t;switch(e.code){case"ENOENT":t=o.FileSystemProviderErrorCode.FileNotFound;break;case"EISDIR":t=o.FileSystemProviderErrorCode.FileIsADirectory;break;case"EEXIST":t=o.FileSystemProviderErrorCode.FileExists;break;case"EPERM":case"EACCES":
t=o.FileSystemProviderErrorCode.NoPermissions;break;default:t=o.FileSystemProviderErrorCode.Unknown}return o.createFileSystemProviderError(e,t)}dispose(){super.dispose(),s.dispose(this.recursiveWatcher),this.recursiveWatcher=void 0,s.dispose(this.recursiveWatcherLogLevelListener),this.recursiveWatcherLogLevelListener=void 0}}t.DiskFileSystemProvider=b}),define(t[133],i([1,0,7]),function(e,t,i){"use strict";function n(e,t){switch(t){case i.LogLevel.Trace:return e.trace;case i.LogLevel.Debug:return e.debug;case i.LogLevel.Info:return e.info;case i.LogLevel.Warning:return e.warn;case i.LogLevel.Error:return e.error;case i.LogLevel.Critical:return e.critical;default:throw new Error("Invalid log level")}}Object.defineProperty(t,"__esModule",{value:!0});class r extends i.AbstractLogService{constructor(){super(),this.buffer=[],this._logger=void 0,this._register(this.onDidChangeLogLevel(e=>{this._logger&&this._logger.setLevel(e)}))}set logger(e){this._logger=e;for(const{level:t,args:i}of this.buffer){
n(e,t).apply(e,i)}this.buffer=[]}_log(e,t){if(this._logger){n(this._logger,e).apply(this._logger,t)}else this.getLevel()<=e&&this.buffer.push({level:e,args:t})}trace(){this._log(i.LogLevel.Trace,arguments)}debug(){this._log(i.LogLevel.Debug,arguments)}info(){this._log(i.LogLevel.Info,arguments)}warn(){this._log(i.LogLevel.Warning,arguments)}error(){this._log(i.LogLevel.Error,arguments)}critical(){this._log(i.LogLevel.Critical,arguments)}dispose(){this._logger&&this._logger.dispose()}}t.BufferLogService=r}),define(t[134],i([1,0,7,4]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.service=e,this.onDidChangeLogLevel=n.Event.buffer(e.onDidChangeLogLevel,!0)}listen(e,t){switch(t){case"onDidChangeLogLevel":return this.onDidChangeLogLevel}throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"setLevel":return this.service.setLevel(i),Promise.resolve()}throw new Error(`Call not found: ${t}`)}}t.LogLevelSetterChannel=r;class s{constructor(e){
this.channel=e}get onDidChangeLogLevel(){return this.channel.listen("onDidChangeLogLevel")}setLevel(e){this.channel.call("setLevel",e)}}t.LogLevelSetterChannelClient=s;class o extends i.DelegatedLogService{constructor(e,t){super(t),this.master=e,this._register(e.onDidChangeLogLevel(e=>t.setLevel(e)))}setLevel(e){this.master.setLevel(e)}}t.FollowerLogService=o}),define(t[135],i([1,0,6,7]),function(e,t,i,r){"use strict";function s(e,t,i){switch(t){case r.LogLevel.Trace:return e.trace(i);case r.LogLevel.Debug:return e.debug(i);case r.LogLevel.Info:return e.info(i);case r.LogLevel.Warning:return e.warn(i);case r.LogLevel.Error:return e.error(i);case r.LogLevel.Critical:return e.critical(i);default:throw new Error("Invalid log level")}}Object.defineProperty(t,"__esModule",{value:!0}),t.createRotatingLogger=function(t,i,n,r){return e.__$__nodeRequire("spdlog").createRotatingLogger(t,i,n,r)};class o extends r.AbstractLogService{constructor(e,t,i){super(),this.name=e,this.logsFolder=t,this.buffer=[],
this._loggerCreationPromise=void 0,this.setLevel(i),this._createSpdLogLogger(),this._register(this.onDidChangeLogLevel(e=>{this._logger&&this._logger.setLevel(e)}))}_createSpdLogLogger(){return this._loggerCreationPromise||(this._loggerCreationPromise=function(t,r){return n(this,void 0,void 0,function*(){try{const n=yield new Promise((t,i)=>{e(["spdlog"],t,i)});n.setAsyncMode(8192,500);const s=i.join(r,`${t}.log`);return n.createRotatingLoggerAsync(t,s,5242880,6)}catch(e){console.error(e)}return null})}(this.name,this.logsFolder).then(e=>{if(e){this._logger=e,this._logger.setLevel(this.getLevel());for(const{level:e,message:t}of this.buffer)s(this._logger,e,t);this.buffer=[]}})),this._loggerCreationPromise}_log(e,t){this._logger?s(this._logger,e,t):this.getLevel()<=e&&this.buffer.push({level:e,message:t})}trace(){this.getLevel()<=r.LogLevel.Trace&&this._log(r.LogLevel.Trace,this.format(arguments))}debug(){this.getLevel()<=r.LogLevel.Debug&&this._log(r.LogLevel.Debug,this.format(arguments))}info(){
this.getLevel()<=r.LogLevel.Info&&this._log(r.LogLevel.Info,this.format(arguments))}warn(){this.getLevel()<=r.LogLevel.Warning&&this._log(r.LogLevel.Warning,this.format(arguments))}error(){if(this.getLevel()<=r.LogLevel.Error){const e=arguments[0];if(e instanceof Error){const t=Array.prototype.slice.call(arguments);t[0]=e.stack,this._log(r.LogLevel.Error,this.format(t))}else this._log(r.LogLevel.Error,this.format(arguments))}}critical(){this.getLevel()<=r.LogLevel.Critical&&this._log(r.LogLevel.Critical,this.format(arguments))}dispose(){this._logger?this.disposeLogger():this._loggerCreationPromise&&this._loggerCreationPromise.then(()=>this.disposeLogger()),this._loggerCreationPromise=void 0}disposeLogger(){this._logger&&(this._logger.drop(),this._logger=void 0)}format(e){let t="";for(let i=0;i<e.length;i++){let n=e[i];if("object"==typeof n)try{n=JSON.stringify(n)}catch(e){}t+=(i>0?" ":"")+n}return t}}t.SpdLogService=o}),define(t[78],i([1,0,5]),function(e,t,i){"use strict";function n(e){
return void 0!==e.submenu}function r(e){return"vscode.menubar.separator"===e.id}function s(e){return void 0!==e.uri}Object.defineProperty(t,"__esModule",{value:!0}),t.IMenubarService=i.createDecorator("menubarService"),t.isMenubarMenuItemSubmenu=n,t.isMenubarMenuItemSeparator=r,t.isMenubarMenuItemUriAction=s,t.isMenubarMenuItemAction=function(e){return!n(e)&&!r(e)&&!s(e)}}),define(t[137],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"updateMenubar":return this.service.updateMenubar(i[0],i[1])}throw new Error(`Call not found: ${t}`)}}t.MenubarChannel=i}),define(t[138],i([1,0,5]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IProductService=i.createDecorator("productService")}),define(t[49],i([1,0,6,29]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;const r=i.dirname(n.getPathFromAmdModule(e,"")),s=i.join(r,"package.json");t.default=e.__$__nodeRequire(s)}),define(t[22],i([1,0,6,29,49]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i.dirname(n.getPathFromAmdModule(e,"")),o=i.join(s,"product.json"),a=e.__$__nodeRequire(o);process.env.VSCODE_DEV&&(a.nameShort+=" Dev",a.nameLong+=" Dev",a.dataFolderName+="-dev"),a.version=r.default.version,t.default=a}),define(t[141],i([1,0,11,61,106,33,6,21,54,49,22,130,2,29,8]),function(e,t,i,n,r,o,a,c,l,u,d,h,f,p,g){"use strict";function m(e,i){return f.isWindows?function(e,t){return`\\\\.\\pipe\\${n.createHash("md5").update(e).digest("hex")}-${u.default.version}-${t}-sock`}(e,i):function(e,i){const r=process.env.VSCODE_PORTABLE;if(t.xdgRuntimeDir&&!r){const r=n.createHash("md5").update(e).digest("hex").substr(0,8);return a.join(t.xdgRuntimeDir,`vscode-${r}-${u.default.version}-${i}.sock`)}return a.join(e,`${u.default.version}-${i}.sock`)}(e,i)}function v(e,t){
return w(e["inspect-extensions"],e["inspect-brk-extensions"],5870,t,e.debugId)}function w(e,t,i,n,r){const s=t||e,o=Number(s)||(n?null:i);return{port:o,break:!!o&&Boolean(!!t),debugId:r}}function y(e,t){if(!e)return;const i=a.resolve(e);return a.normalize(e)===i?i:a.resolve(t.env.VSCODE_CWD||t.cwd(),e)}function S(e,t){return y(e["user-data-dir"],t)||a.resolve(r.getDefaultUserDataPath(t.platform))}Object.defineProperty(t,"__esModule",{value:!0}),t.xdgRuntimeDir=process.env.XDG_RUNTIME_DIR;class b{constructor(e,t){if(this._args=e,this._execPath=t,!process.env.VSCODE_LOGS){const e=h.toLocalISOString(new Date).replace(/-|:|\.\d+Z$/g,"");process.env.VSCODE_LOGS=a.join(this.userDataPath,"logs",e)}this.logsPath=process.env.VSCODE_LOGS}get args(){return this._args}get appRoot(){return a.dirname(p.getPathFromAmdModule(e,""))}get execPath(){return this._execPath}get cliPath(){return function(e,t,i){
return f.isWindows?i?a.join(a.dirname(e),"bin",`${d.default.applicationName}.cmd`):a.join(t,"scripts","code-cli.bat"):f.isLinux?i?a.join(a.dirname(e),"bin",`${d.default.applicationName}`):a.join(t,"scripts","code-cli.sh"):i?a.join(t,"bin","code"):a.join(t,"scripts","code-cli.sh")}(this.execPath,this.appRoot,this.isBuilt)}get userHome(){return o.homedir()}get userDataPath(){const e=process.env.VSCODE_PORTABLE;return e?a.join(e,"user-data"):S(this._args,process)}get webUserDataHome(){return g.URI.file(y(this._args["web-user-data-dir"],process)||this.userDataPath)}get appNameLong(){return d.default.nameLong}get appQuality(){return d.default.quality}get appSettingsHome(){return g.URI.file(a.join(this.userDataPath,"User"))}get userRoamingDataHome(){return this.appSettingsHome}get settingsResource(){return c.joinPath(this.userRoamingDataHome,"settings.json")}get machineSettingsHome(){return g.URI.file(a.join(this.userDataPath,"Machine"))}get machineSettingsResource(){
return c.joinPath(this.machineSettingsHome,"settings.json")}get globalStorageHome(){return a.join(this.appSettingsHome.fsPath,"globalStorage")}get workspaceStorageHome(){return a.join(this.appSettingsHome.fsPath,"workspaceStorage")}get keybindingsResource(){return c.joinPath(this.userRoamingDataHome,"keybindings.json")}get keyboardLayoutResource(){return c.joinPath(this.userRoamingDataHome,"keyboardLayout.json")}get localeResource(){return c.joinPath(this.userRoamingDataHome,"locale.json")}get isExtensionDevelopment(){return!!this._args.extensionDevelopmentPath}get backupHome(){return g.URI.file(a.join(this.userDataPath,i.BACKUPS))}get backupWorkspacesPath(){return a.join(this.backupHome.fsPath,"workspaces.json")}get untitledWorkspacesHome(){return g.URI.file(a.join(this.userDataPath,"Workspaces"))}get installSourcePath(){return a.join(this.userDataPath,"installSource")}get builtinExtensionsPath(){const t=y(this._args["builtin-extensions-dir"],process)
;return t||a.normalize(a.join(p.getPathFromAmdModule(e,""),"..","extensions"))}get extensionsPath(){const e=y(this._args["extensions-dir"],process);if(e)return e;const t=process.env.VSCODE_EXTENSIONS;if(t)return t;const i=process.env.VSCODE_PORTABLE;return i?a.join(i,"extensions"):a.join(this.userHome,d.default.dataFolderName,"extensions")}get extensionDevelopmentLocationURI(){const e=this._args.extensionDevelopmentPath;return Array.isArray(e)?e.map(e=>/^[^:/?#]+?:\/\//.test(e)?g.URI.parse(e):g.URI.file(a.normalize(e))):e?/^[^:/?#]+?:\/\//.test(e)?[g.URI.parse(e)]:[g.URI.file(a.normalize(e))]:void 0}get extensionTestsLocationURI(){const e=this._args.extensionTestsPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?g.URI.parse(e):g.URI.file(a.normalize(e))}get disableExtensions(){if(this._args["disable-extensions"])return!0;const e=this._args["disable-extension"];if(e){if("string"==typeof e)return[e];if(Array.isArray(e)&&e.length>0)return e}return!1}get debugExtensionHost(){return v(this._args,this.isBuilt)}
get isBuilt(){return!process.env.VSCODE_DEV}get verbose(){return!!this._args.verbose}get log(){return this._args.log}get wait(){return!!this._args.wait}get status(){return!!this._args.status}get mainIPCHandle(){return m(this.userDataPath,"main")}get sharedIPCHandle(){return m(this.userDataPath,"shared")}get nodeCachedDataDir(){return process.env.VSCODE_NODE_CACHED_DATA_DIR||void 0}get galleryMachineIdResource(){return c.joinPath(g.URI.file(this.userDataPath),"machineid")}get disableUpdates(){return!!this._args["disable-updates"]}get disableCrashReporter(){return!!this._args["disable-crash-reporter"]}get driverHandle(){return this._args.driver}get driverVerbose(){return!!this._args["driver-verbose"]}}s([l.memoize],b.prototype,"appRoot",null),s([l.memoize],b.prototype,"cliPath",null),s([l.memoize],b.prototype,"userHome",null),s([l.memoize],b.prototype,"userDataPath",null),s([l.memoize],b.prototype,"webUserDataHome",null),s([l.memoize],b.prototype,"appSettingsHome",null),
s([l.memoize],b.prototype,"userRoamingDataHome",null),s([l.memoize],b.prototype,"settingsResource",null),s([l.memoize],b.prototype,"machineSettingsHome",null),s([l.memoize],b.prototype,"machineSettingsResource",null),s([l.memoize],b.prototype,"globalStorageHome",null),s([l.memoize],b.prototype,"workspaceStorageHome",null),s([l.memoize],b.prototype,"keybindingsResource",null),s([l.memoize],b.prototype,"keyboardLayoutResource",null),s([l.memoize],b.prototype,"localeResource",null),s([l.memoize],b.prototype,"isExtensionDevelopment",null),s([l.memoize],b.prototype,"backupHome",null),s([l.memoize],b.prototype,"backupWorkspacesPath",null),s([l.memoize],b.prototype,"untitledWorkspacesHome",null),s([l.memoize],b.prototype,"installSourcePath",null),s([l.memoize],b.prototype,"builtinExtensionsPath",null),s([l.memoize],b.prototype,"extensionsPath",null),s([l.memoize],b.prototype,"extensionDevelopmentLocationURI",null),s([l.memoize],b.prototype,"extensionTestsLocationURI",null),
s([l.memoize],b.prototype,"debugExtensionHost",null),s([l.memoize],b.prototype,"mainIPCHandle",null),s([l.memoize],b.prototype,"sharedIPCHandle",null),s([l.memoize],b.prototype,"nodeCachedDataDir",null),s([l.memoize],b.prototype,"galleryMachineIdResource",null),t.EnvironmentService=b,t.parseExtensionHostPort=v,t.parseSearchPort=function(e,t){return w(e["inspect-search"],e["inspect-brk-search"],5876,t)},t.parseUserDataDir=S}),define(t[35],i([1,0,19,118]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.data=new Map}add(e,t){n.ok(i.isString(e)),n.ok(i.isObject(t)),n.ok(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}}t.Registry=new r}),define(t[143],i([1,0,35,4]),function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions={JSONContribution:"base.contributions.json"};class r{constructor(){
this._onDidChangeSchema=new n.Emitter,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(e,t){this.schemasById[function(e){return e.length>0&&"#"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}}const s=new r;i.Registry.add(t.Extensions.JSONContribution,s)}),define(t[46],i([1,0,83,4,35,19,14,143]),function(e,t,i,n,r,s,o,a){"use strict";function c(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}function l(e){return t.OVERRIDE_PROPERTY_PATTERN.test(e)?i.localize(3,null,e):void 0!==g.getConfigurationProperties()[e]?i.localize(4,null,e):null}Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions={Configuration:"base.contributions.configuration"};!function(e){
e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.WINDOW=3]="WINDOW",e[e.RESOURCE=4]="RESOURCE",e[e.MACHINE_OVERRIDABLE=5]="MACHINE_OVERRIDABLE"}(t.ConfigurationScope||(t.ConfigurationScope={})),t.allSettings={properties:{},patternProperties:{}},t.applicationSettings={properties:{},patternProperties:{}},t.machineSettings={properties:{},patternProperties:{}},t.machineOverridableSettings={properties:{},patternProperties:{}},t.windowSettings={properties:{},patternProperties:{}},t.resourceSettings={properties:{},patternProperties:{}},t.editorConfigurationSchemaId="vscode://schemas/settings/editor";const u=r.Registry.as(a.Extensions.JSONContribution);class d{constructor(){this.overrideIdentifiers=[],this._onDidSchemaChange=new n.Emitter,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new n.Emitter,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.defaultOverridesConfigurationNode={id:"defaultOverrides",title:i.localize(0,null),properties:{}},
this.configurationContributors=[this.defaultOverridesConfigurationNode],this.editorConfigurationSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowsTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},this.computeOverridePropertyPattern(),u.registerSchema(t.editorConfigurationSchemaId,this.editorConfigurationSchema)}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=[];e.forEach(e=>{i.push(...this.validateAndRegisterProperties(e,t)),this.configurationContributors.push(e),this.registerJSONConfiguration(e),this.updateSchemaForOverrideSettingsConfiguration(e)}),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}deregisterConfigurations(e){const i=[],n=e=>{if(e.properties)for(const n in e.properties)switch(i.push(n),delete this.configurationProperties[n],delete this.editorConfigurationSchema.properties[n],
delete t.allSettings.properties[n],e.properties[n].scope){case 1:delete t.applicationSettings.properties[n];break;case 2:delete t.machineSettings.properties[n];break;case 5:delete t.machineOverridableSettings.properties[n];break;case 3:delete t.windowSettings.properties[n];break;case 4:delete t.resourceSettings.properties[n]}e.allOf&&e.allOf.forEach(e=>n(e))};for(const t of e){n(t);const e=this.configurationContributors.indexOf(t);-1!==e&&this.configurationContributors.splice(e,1)}u.registerSchema(t.editorConfigurationSchemaId,this.editorConfigurationSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}registerDefaultConfigurations(e){const n=[];for(const r of e)for(const e in r.defaults){const s=r.defaults[e];if(t.OVERRIDE_PROPERTY_PATTERN.test(e)&&"object"==typeof s){const r={type:"object",default:s,description:i.localize(1,null,e),$ref:t.editorConfigurationSchemaId};t.allSettings.properties[e]=r,this.defaultOverridesConfigurationNode.properties[e]=r,
this.configurationProperties[e]=r,n.push(e)}}this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}deregisterDefaultConfigurations(e){const i=[];for(const n of e)for(const e in n.defaults)i.push(e),delete t.allSettings.properties[e],delete this.defaultOverridesConfigurationNode.properties[e],delete this.configurationProperties[e];this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(i)}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.overrideIdentifiers.push(...e),this.updateOverridePropertyPatternKey()}validateAndRegisterProperties(e,i=!0,n=3,r=!1){n=s.isUndefinedOrNull(e.scope)?n:e.scope,r=e.overridable||r;let o=[],a=e.properties;if(a)for(let e in a){let u;if(i&&(u=l(e))){console.warn(u),delete a[e];continue}let d=a[e],h=d.default;s.isUndefined(h)&&(d.default=c(d.type)),r&&(d.overridable=!0),t.OVERRIDE_PROPERTY_PATTERN.test(e)?d.scope=void 0:d.scope=s.isUndefinedOrNull(d.scope)?n:d.scope,
!a[e].hasOwnProperty("included")||a[e].included?(this.configurationProperties[e]=a[e],o.push(e)):(this.excludedConfigurationProperties[e]=a[e],delete a[e])}let u=e.allOf;if(u)for(let e of u)o.push(...this.validateAndRegisterProperties(e,i,n,r));return o}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}registerJSONConfiguration(e){function i(e){let n=e.properties;if(n)for(const e in n)switch(t.allSettings.properties[e]=n[e],n[e].scope){case 1:t.applicationSettings.properties[e]=n[e];break;case 2:t.machineSettings.properties[e]=n[e];break;case 5:t.machineOverridableSettings.properties[e]=n[e];break;case 3:t.windowSettings.properties[e]=n[e];break;case 4:t.resourceSettings.properties[e]=n[e]}let r=e.allOf;r&&r.forEach(i)}i(e)}updateSchemaForOverrideSettingsConfiguration(e){e.id!==h&&(this.update(e),
u.registerSchema(t.editorConfigurationSchemaId,this.editorConfigurationSchema))}updateOverridePropertyPatternKey(){let e=t.allSettings.patternProperties[this.overridePropertyPattern];e||(e={type:"object",description:i.localize(2,null),errorMessage:"Unknown Identifier. Use language identifiers",$ref:t.editorConfigurationSchemaId}),delete t.allSettings.patternProperties[this.overridePropertyPattern],delete t.applicationSettings.patternProperties[this.overridePropertyPattern],delete t.machineSettings.patternProperties[this.overridePropertyPattern],delete t.machineOverridableSettings.patternProperties[this.overridePropertyPattern],delete t.windowSettings.patternProperties[this.overridePropertyPattern],delete t.resourceSettings.patternProperties[this.overridePropertyPattern],this.computeOverridePropertyPattern(),t.allSettings.patternProperties[this.overridePropertyPattern]=e,t.applicationSettings.patternProperties[this.overridePropertyPattern]=e,t.machineSettings.patternProperties[this.overridePropertyPattern]=e,
t.machineOverridableSettings.patternProperties[this.overridePropertyPattern]=e,t.windowSettings.patternProperties[this.overridePropertyPattern]=e,t.resourceSettings.patternProperties[this.overridePropertyPattern]=e,this._onDidSchemaChange.fire()}update(e){let t=e.properties;if(t)for(let e in t)t[e].overridable&&(this.editorConfigurationSchema.properties[e]=this.getConfigurationProperties()[e]);let i=e.allOf;i&&i.forEach(e=>this.update(e))}computeOverridePropertyPattern(){this.overridePropertyPattern=this.overrideIdentifiers.length?p.replace("${0}",this.overrideIdentifiers.map(e=>o.createRegExp(e,!1).source).join("|")):f}}const h="override",f="\\[.*\\]$",p="\\[(${0})\\]$";t.OVERRIDE_PROPERTY_PATTERN=new RegExp(f),t.getDefaultValue=c;const g=new d;r.Registry.add(t.Extensions.Configuration,g),t.validateProperty=l,t.getScopes=function(){const e=[],t=g.getConfigurationProperties();for(const i of Object.keys(t))e.push([i,t[i].scope]);return e.push(["launch",4]),e.push(["task",4]),e}}),
define(t[16],i([1,0,15,19,8,35,5,46]),function(e,t,i,n,r,s,o,a){"use strict";function c(e,t){const i=Object.create(null);for(let n in e)l(i,n,e[n],t);return i}function l(e,t,i,n){const r=t.split("."),s=r.pop();let o=e;for(let e=0;e<r.length;e++){let i=r[e],s=o[i];switch(typeof s){case"undefined":s=o[i]=Object.create(null);break;case"object":break;default:return void n(`Ignoring ${t} as ${r.slice(0,e+1).join(".")} is ${JSON.stringify(s)}`)}o=s}"object"==typeof o?o[s]=i:n(`Ignoring ${t} as ${r.join(".")} is ${JSON.stringify(o)}`)}function u(e,t){const i=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(i)){const n=e[i];"object"!=typeof n||Array.isArray(n)||(u(n,t),0===Object.keys(n).length&&delete e[i])}}else delete e[i]}function d(e,t,i){const n=function(e,t){let i=e;for(const e of t){if("object"!=typeof i||null===i)return;i=i[e]}return i}(e,t.split("."));return void 0===n?i:n}function h(e,t,i){Object.keys(t).forEach(r=>{r in e?n.isObject(e[r])&&n.isObject(t[r])?h(e[r],t[r],i):i&&(e[r]=t[r]):e[r]=t[r]
})}function f(e){return e.substring(1,e.length-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.IConfigurationService=o.createDecorator("configurationService"),t.isConfigurationOverrides=function(e){return e&&"object"==typeof e&&(!e.overrideIdentifier||"string"==typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof r.URI)};!function(e){e[e.USER=1]="USER",e[e.USER_LOCAL=2]="USER_LOCAL",e[e.USER_REMOTE=3]="USER_REMOTE",e[e.WORKSPACE=4]="WORKSPACE",e[e.WORKSPACE_FOLDER=5]="WORKSPACE_FOLDER",e[e.DEFAULT=6]="DEFAULT",e[e.MEMORY=7]="MEMORY"}(t.ConfigurationTarget||(t.ConfigurationTarget={})),t.ConfigurationTargetToString=function(e){switch(e){case 1:return"USER";case 2:return"USER_LOCAL";case 3:return"USER_REMOTE";case 4:return"WORKSPACE";case 5:return"WORKSPACE_FOLDER";case 6:return"DEFAULT";case 7:return"MEMORY"}},t.compare=function(e,t){const n=t.keys.filter(t=>-1===e.keys.indexOf(t)),r=e.keys.filter(e=>-1===t.keys.indexOf(e)),s=[];for(const n of e.keys){const r=d(e.contents,n),o=d(t.contents,n)
;i.equals(r,o)||s.push(n)}return{added:n,removed:r,updated:s}},t.toOverrides=function(e,t){const i=[],n=s.Registry.as(a.Extensions.Configuration).getConfigurationProperties();for(const r of Object.keys(e))if(a.OVERRIDE_PROPERTY_PATTERN.test(r)){const s={};for(const t in e[r])n[t]&&n[t].overridable&&(s[t]=e[r][t]);i.push({identifiers:[f(r).trim()],contents:c(s,t)})}return i},t.toValuesTree=c,t.addToValueTree=l,t.removeFromValueTree=function(e,t){u(e,t.split("."))},t.getConfigurationValue=d,t.merge=h,t.getConfigurationKeys=function(){const e=s.Registry.as(a.Extensions.Configuration).getConfigurationProperties();return Object.keys(e)},t.getDefaultValues=function(){const e=Object.create(null),t=s.Registry.as(a.Extensions.Configuration).getConfigurationProperties();for(let i in t)l(e,i,t[i].default,e=>console.error(`Conflict in default settings: ${e}`));return e},t.overrideIdentifierFromKey=f,t.keyFromOverrideIdentifier=function(e){return`[${e}]`},t.getMigratedSettingValue=function(e,t,i){
const n=e.inspect(t),r=e.inspect(i);return void 0!==n.user||void 0!==n.workspace||void 0!==n.workspaceFolder?n.value:void 0!==r.user||void 0!==r.workspace||void 0!==r.workspaceFolder?r.value:n.default}}),define(t[146],i([1,0,42,27,25,19,15,46,16,35]),function(e,t,i,n,r,s,o,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class u{constructor(e={},t=[],i=[]){this._contents=e,this._keys=t,this._overrides=i,this.isFrozen=!1}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?c.getConfigurationValue(this.contents,e):this.contents}override(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!=typeof t||!Object.keys(t).length)return this;let i={};for(const e of r.distinct([...Object.keys(this.contents),...Object.keys(t)])){
let n=this.contents[e],r=t[e];r&&("object"==typeof n&&"object"==typeof r?(n=o.deepClone(n),this.mergeContents(n,r)):n=r),i[e]=n}return new u(i)}merge(...e){const t=o.deepClone(this.contents),i=o.deepClone(this.overrides),n=[...this.keys];for(const s of e){this.mergeContents(t,s.contents);for(const e of s.overrides){const[t]=i.filter(t=>r.equals(t.identifiers,e.identifiers));t?this.mergeContents(t.contents,e.contents):i.push(o.deepClone(e))}for(const e of s.keys)-1===n.indexOf(e)&&n.push(e)}return new u(t,n,i)}freeze(){return this.isFrozen=!0,this}mergeContents(e,t){for(const i of Object.keys(t))i in e&&s.isObject(e[i])&&s.isObject(t[i])?this.mergeContents(e[i],t[i]):e[i]=o.deepClone(t[i])}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?o.deepFreeze(e):e}getContentsForOverrideIdentifer(e){for(const t of this.overrides)if(-1!==t.identifiers.indexOf(e))return t.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),
c.addToValueTree(this.contents,e,t,e=>{throw new Error(e)})}removeValue(e){this.removeKey(e)&&c.removeFromValueTree(this.contents,e)}addKey(e){let t=this.keys.length;for(let i=0;i<t;i++)0===e.indexOf(this.keys[i])&&(t=i);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return-1!==t&&(this.keys.splice(t,1),!0)}}t.ConfigurationModel=u;class d extends u{constructor(){const e=c.getDefaultValues(),t=c.getConfigurationKeys(),i=[];for(const t of Object.keys(e))a.OVERRIDE_PROPERTY_PATTERN.test(t)&&i.push({identifiers:[c.overrideIdentifierFromKey(t).trim()],contents:c.toValuesTree(e[t],e=>console.error(`Conflict in default settings file: ${e}`))});super(e,t,i)}}t.DefaultConfigurationModel=d;class h{constructor(e,t){this._name=e,this._scopes=t,this._raw=null,this._configurationModel=null,this._parseErrors=[]}get configurationModel(){return this._configurationModel||new u}get errors(){return this._parseErrors}parseContent(e){if(e){const t=this.doParseContent(e);this.parseRaw(t)}}parseRaw(e){this._raw=e
;const t=this.doParseRaw(e);this._configurationModel=new u(t.contents,t.keys,t.overrides)}parse(){this._raw&&this.parseRaw(this._raw)}doParseContent(e){function t(e){Array.isArray(s)?s.push(e):r&&(s[r]=e)}let n={},r=null,s=[],o=[],a=[],c={onObjectBegin:()=>{let e={};t(e),o.push(s),s=e,r=null},onObjectProperty:e=>{r=e},onObjectEnd:()=>{s=o.pop()},onArrayBegin:()=>{let e=[];t(e),o.push(s),s=e,r=null},onArrayEnd:()=>{s=o.pop()},onLiteralValue:t,onError:(e,t,i)=>{a.push({error:e,offset:t,length:i})}};if(e)try{i.visit(e,c),n=s[0]||{}}catch(e){console.error(`Error while parsing settings file ${this._name}: ${e}`),this._parseErrors=[e]}return n}doParseRaw(e){if(this._scopes){const t=l.Registry.as(a.Extensions.Configuration).getConfigurationProperties();e=this.filterByScope(e,t,!0,this._scopes)}return{contents:c.toValuesTree(e,e=>console.error(`Conflict in settings file ${this._name}: ${e}`)),keys:Object.keys(e),overrides:c.toOverrides(e,e=>console.error(`Conflict in settings file ${this._name}: ${e}`))}}
filterByScope(e,t,i,n){const r={};for(let s in e)if(a.OVERRIDE_PROPERTY_PATTERN.test(s)&&i)r[s]=this.filterByScope(e[s],t,!1,n);else{const i=this.getScope(s,t);-1!==n.indexOf(i)&&(r[s]=e[s])}return r}getScope(e,t){const i=t[e];return i&&void 0!==i.scope?i.scope:3}}t.ConfigurationModelParser=h;class f{constructor(e,t,i=new u,r=new u,s=new n.ResourceMap,o=new u,a=new n.ResourceMap,c=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=i,this._workspaceConfiguration=r,this._folderConfigurations=s,this._memoryConfiguration=o,this._memoryConfigurationByResource=a,this._freeze=c,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new n.ResourceMap}getValue(e,t,i){return this.getConsolidateConfigurationModel(t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource))||(n=new u,this._memoryConfigurationByResource.set(i.resource,n)):n=this._memoryConfiguration,
void 0===t?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const n=this.getConsolidateConfigurationModel(t,i),r=this.getFolderConfigurationModelForResource(t.resource,i),s=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration;return{default:t.overrideIdentifier?this._defaultConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._defaultConfiguration.freeze().getValue(e),user:t.overrideIdentifier?this.userConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.userConfiguration.freeze().getValue(e),userLocal:t.overrideIdentifier?this.localUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.localUserConfiguration.freeze().getValue(e),userRemote:t.overrideIdentifier?this.remoteUserConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this.remoteUserConfiguration.freeze().getValue(e),
workspace:i?t.overrideIdentifier?this._workspaceConfiguration.freeze().override(t.overrideIdentifier).getValue(e):this._workspaceConfiguration.freeze().getValue(e):void 0,workspaceFolder:r?t.overrideIdentifier?r.freeze().override(t.overrideIdentifier).getValue(e):r.freeze().getValue(e):void 0,memory:t.overrideIdentifier?s.override(t.overrideIdentifier).getValue(e):s.getValue(e),value:n.getValue(e)}}keys(e){const t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.freeze().keys,user:this.userConfiguration.freeze().keys,workspace:this._workspaceConfiguration.freeze().keys,workspaceFolder:t?t.freeze().keys:[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}
updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}get defaults(){return this._defaultConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){
return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidateConfigurationModel(e,t){let i=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?i.override(e.overrideIdentifier):i}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);const r=this._memoryConfigurationByResource.get(e);r&&(i=i.merge(r))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){
let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return s.withUndefinedAsNull(this._folderConfigurations.get(i.uri))}return null}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:this._folderConfigurations.keys().reduce((e,t)=>{const{contents:i,overrides:n,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:r}]),
e},[])}}allKeys(e){let t=this.keys(e),i=[...t.default];const n=e=>{for(const t of e)-1===i.indexOf(t)&&i.push(t)};n(t.user),n(t.workspace);for(const e of this.folderConfigurations.keys())n(this.folderConfigurations.get(e).keys);return i}}t.Configuration=f;class p{doesConfigurationContains(e,t){let i,n=e.contents,r=c.toValuesTree({[t]:!0},()=>{});for(;"object"==typeof r&&(i=Object.keys(r)[0]);){if(!(n=n[i]))return!1;r=r[i]}return!0}updateKeys(e,t,i){for(const i of t)e.setValue(i,{})}}t.AbstractConfigurationChangeEvent=p;class g extends p{constructor(e=new u,t=new n.ResourceMap){super(),this._changedConfiguration=e,this._changedConfigurationByResource=t}get changedConfiguration(){return this._changedConfiguration}get changedConfigurationByResource(){return this._changedConfigurationByResource}change(e,t){if(e instanceof g){this._changedConfiguration=this._changedConfiguration.merge(e._changedConfiguration);for(const t of e._changedConfigurationByResource.keys()){
let i=this.getOrSetChangedConfigurationForResource(t);i=i.merge(e._changedConfigurationByResource.get(t)),this._changedConfigurationByResource.set(t,i)}}else this.changeWithKeys(e,t);return this}telemetryData(e,t){return this._source=e,this._sourceConfig=t,this}get affectedKeys(){const e=[...this._changedConfiguration.keys];return this._changedConfigurationByResource.forEach(t=>e.push(...t.keys)),r.distinct(e)}get source(){return this._source}get sourceConfig(){return this._sourceConfig}affectsConfiguration(e,t){let i=[this._changedConfiguration];if(t){let e=this._changedConfigurationByResource.get(t);e&&i.push(e)}else i.push(...this._changedConfigurationByResource.values());for(const t of i)if(this.doesConfigurationContains(t,e))return!0;return!1}changeWithKeys(e,t){let i=t?this.getOrSetChangedConfigurationForResource(t):this._changedConfiguration;this.updateKeys(i,e)}getOrSetChangedConfigurationForResource(e){let t=this._changedConfigurationByResource.get(e);return t||(t=new u,
this._changedConfigurationByResource.set(e,t)),t}}t.ConfigurationChangeEvent=g}),define(t[147],i([1,0,35,46,3,16,146,4,119,18,23]),function(e,t,i,n,r,s,o,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class d extends r.Disposable{constructor(e){super(),this.settingsResource=e,this._onDidChangeConfiguration=this._register(new a.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.configuration=new o.Configuration(new o.DefaultConfigurationModel,new o.ConfigurationModel),this._register(i.Registry.as(n.Extensions.Configuration).onDidUpdateConfiguration(e=>this.onDidDefaultConfigurationChange(e)))}initialize(){return this.userConfigModelWatcher&&this.userConfigModelWatcher.dispose(),this.settingsResource.scheme!==u.Schemas.file?Promise.resolve():new Promise((e,t)=>{this.userConfigModelWatcher=this._register(new c.ConfigWatcher(this.settingsResource.fsPath,{changeBufferDelay:300,onError:e=>l.onUnexpectedError(e),
defaultConfig:new o.ConfigurationModelParser(this.settingsResource.fsPath),parse:(e,t)=>{const i=new o.ConfigurationModelParser(this.settingsResource.fsPath);return i.parseContent(e),[...i.errors],i},initCallback:()=>{this.configuration=new o.Configuration(new o.DefaultConfigurationModel,this.userConfigModelWatcher.getConfig().configurationModel),this._register(this.userConfigModelWatcher.onDidUpdateConfiguration(()=>this.onDidChangeUserConfiguration(this.userConfigModelWatcher.getConfig().configurationModel))),e()}}))})}getConfigurationData(){return this.configuration.toData()}getValue(e,t){const i="string"==typeof e?e:void 0,n=s.isConfigurationOverrides(e)?e:s.isConfigurationOverrides(t)?t:{};return this.configuration.getValue(i,n,void 0)}updateValue(e,t,i,n){return Promise.reject(new Error("not supported"))}inspect(e){return this.configuration.inspect(e,{},void 0)}keys(){return this.configuration.keys(void 0)}reloadConfiguration(e){
return this.userConfigModelWatcher?new Promise(e=>this.userConfigModelWatcher.reload(t=>{this.onDidChangeUserConfiguration(t.configurationModel),e()})):this.initialize()}onDidChangeUserConfiguration(e){const{added:t,updated:i,removed:n}=s.compare(this.configuration.localUserConfiguration,e),r=[...t,...i,...n];r.length&&(this.configuration.updateLocalUserConfiguration(e),this.trigger(r,1))}onDidDefaultConfigurationChange(e){this.configuration.updateDefaultConfiguration(new o.DefaultConfigurationModel),this.trigger(e,6)}trigger(e,t){this._onDidChangeConfiguration.fire((new o.ConfigurationChangeEvent).change(e).telemetryData(t,this.getTargetConfiguration(t)))}getTargetConfiguration(e){switch(e){case 6:return this.configuration.defaults.contents;case 1:return this.configuration.localUserConfiguration.contents}return{}}}t.ConfigurationService=d}),define(t[67],i([1,0,23]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REMOTE_HOST_SCHEME=i.Schemas.vscodeRemote,
t.getRemoteAuthority=function(e){return e.scheme===t.REMOTE_HOST_SCHEME?e.authority:void 0},t.getRemoteName=function(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}}),define(t[47],i([1,0,94,5,46,35,31]),function(e,t,i,r,s,o,a){"use strict";function c(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||1223===e.res.statusCode}function l(e){return 204===e.res.statusCode}Object.defineProperty(t,"__esModule",{value:!0}),t.IRequestService=r.createDecorator("requestService"),t.asText=function(e){return n(this,void 0,void 0,function*(){if(!c(e))throw new Error("Server returned "+e.res.statusCode);return l(e)?null:(yield a.streamToBuffer(e.stream)).toString()})},t.asJson=function(e){return n(this,void 0,void 0,function*(){if(!c(e))throw new Error("Server returned "+e.res.statusCode);if(l(e))return null;const t=yield a.streamToBuffer(e.stream);return JSON.parse(t.toString())})},o.Registry.as(s.Extensions.Configuration).registerConfiguration({id:"http",order:15,
title:i.localize(0,null),type:"object",properties:{"http.proxy":{type:"string",pattern:"^https?://([^:]*(:[^@]*)?@)?([^:]+)(:\\d+)?/?$|^$",markdownDescription:i.localize(1,null)},"http.proxyStrictSSL":{type:"boolean",default:!0,description:i.localize(2,null)},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:i.localize(3,null)},"http.proxySupport":{type:"string",enum:["off","on","override"],enumDescriptions:[i.localize(4,null),i.localize(5,null),i.localize(6,null)],default:"override",description:i.localize(7,null)},"http.systemCertificates":{type:"boolean",default:!0,description:i.localize(8,null)}}})}),define(t[150],i([1,0,151,19]),function(e,t,i,r){"use strict";function s(t,s={}){return n(this,void 0,void 0,function*(){const n=i.parse(t),o=s.proxyUrl||function(e){return"http:"===e.protocol?process.env.HTTP_PROXY||process.env.http_proxy||null:"https:"===e.protocol?process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||null:null}(n)
;if(!o)return null;const a=i.parse(o);if(!/^https?:$/.test(a.protocol||""))return null;const c={host:a.hostname||"",port:Number(a.port),auth:a.auth,rejectUnauthorized:!r.isBoolean(s.strictSSL)||s.strictSSL};return new("http:"===n.protocol?yield new Promise((t,i)=>{e(["http-proxy-agent"],t,i)}):yield new Promise((t,i)=>{e(["https-proxy-agent"],t,i)}))(c)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getProxyAgent=s}),define(t[152],i([1,0,5]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIGN_SERVICE_ID="signService",t.ISignService=i.createDecorator(t.SIGN_SERVICE_ID)}),define(t[153],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{vsda(){return new Promise((t,i)=>{e(["vsda"],t,i)})}sign(e){return n(this,void 0,void 0,function*(){try{const t=new((yield this.vsda()).signer);if(t)return t.sign(e)}catch(e){console.error("signer.sign: "+e)}return e})}}t.SignService=i}),define(t[38],i([1,0,5]),function(e,t,i){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0}),t.IStateService=i.createDecorator("stateService")}),define(t[24],i([1,0,13,7,38,4,5,129,2,3,9]),function(e,t,i,r,a,c,l,u,d,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ILifecycleService=l.createDecorator("lifecycleService");!function(e){e[e.CLOSE=1]="CLOSE",e[e.QUIT=2]="QUIT",e[e.RELOAD=3]="RELOAD",e[e.LOAD=4]="LOAD"}(t.UnloadReason||(t.UnloadReason={}));!function(e){e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.AfterWindowOpen=3]="AfterWindowOpen"}(t.LifecycleMainPhase||(t.LifecycleMainPhase={}));let p=class e extends h.Disposable{constructor(e,t){super(),this.logService=e,this.stateService=t,this.windowToCloseRequest=new Set,this.oneTimeListenerTokenGenerator=0,this.windowCounter=0,this._quitRequested=!1,this._wasRestarted=!1,this._onBeforeShutdown=this._register(new c.Emitter),this.onBeforeShutdown=this._onBeforeShutdown.event,this._onWillShutdown=this._register(new c.Emitter),this.onWillShutdown=this._onWillShutdown.event,
this._onBeforeWindowClose=this._register(new c.Emitter),this.onBeforeWindowClose=this._onBeforeWindowClose.event,this._onBeforeWindowUnload=this._register(new c.Emitter),this.onBeforeWindowUnload=this._onBeforeWindowUnload.event,this._phase=1,this.phaseWhen=new Map,this.handleRestarted(),this.when(2).then(()=>this.registerListeners())}get quitRequested(){return this._quitRequested}get wasRestarted(){return this._wasRestarted}get phase(){return this._phase}handleRestarted(){this._wasRestarted=!!this.stateService.getItem(e.QUIT_FROM_RESTART_MARKER),this._wasRestarted&&this.stateService.removeItem(e.QUIT_FROM_RESTART_MARKER)}registerListeners(){const e=()=>{this._quitRequested||(this.logService.trace("Lifecycle#app.on(before-quit)"),this._quitRequested=!0,this.logService.trace("Lifecycle#onBeforeShutdown.fire()"),this._onBeforeShutdown.fire(),d.isMacintosh&&0===this.windowCounter&&this.beginOnWillShutdown())};i.app.addListener("before-quit",e);const t=()=>{
this.logService.trace("Lifecycle#app.on(window-all-closed)"),!this._quitRequested&&d.isMacintosh||i.app.quit()};i.app.addListener("window-all-closed",t),i.app.once("will-quit",n=>{this.logService.trace("Lifecycle#app.on(will-quit)"),n.preventDefault();this.beginOnWillShutdown().finally(()=>{this.resolvePendingQuitPromise(!1),i.app.removeListener("before-quit",e),i.app.removeListener("window-all-closed",t),i.app.quit()})})}beginOnWillShutdown(){if(this.pendingWillShutdownPromise)return this.pendingWillShutdownPromise;this.logService.trace("Lifecycle#onWillShutdown.fire()");const e=[];return this._onWillShutdown.fire({join(t){t&&e.push(t)}}),this.pendingWillShutdownPromise=Promise.all(e).then(()=>void 0,e=>this.logService.error(e)),this.pendingWillShutdownPromise}set phase(e){if(e<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===e)return;this.logService.trace(`lifecycle (main): phase changed (value: ${e})`),this._phase=e;const t=this.phaseWhen.get(this._phase);t&&(t.open(),
this.phaseWhen.delete(this._phase))}when(e){return n(this,void 0,void 0,function*(){if(e<=this._phase)return;let t=this.phaseWhen.get(e);t||(t=new f.Barrier,this.phaseWhen.set(e,t)),yield t.wait()})}registerWindow(e){this.windowCounter++,e.win.on("close",t=>{const i=e.id;this.windowToCloseRequest.has(i)?this.windowToCloseRequest.delete(i):(this.logService.trace(`Lifecycle#window.on('close') - window ID ${e.id}`),t.preventDefault(),this.unload(e,1).then(t=>{t?this.windowToCloseRequest.delete(i):(this.windowToCloseRequest.add(i),this.logService.trace(`Lifecycle#onBeforeWindowClose.fire() - window ID ${i}`),this._onBeforeWindowClose.fire(e),e.close())}))}),e.win.on("closed",()=>{this.logService.trace(`Lifecycle#window.on('closed') - window ID ${e.id}`),this.windowCounter--,0!==this.windowCounter||d.isMacintosh&&!this._quitRequested||this.beginOnWillShutdown()})}unload(e,t){return n(this,void 0,void 0,function*(){if(!e.isReady)return Promise.resolve(!1)
;this.logService.trace(`Lifecycle#unload() - window ID ${e.id}`);const i=this._quitRequested?2:t;let n=yield this.onBeforeUnloadWindowInRenderer(e,i);return n?(this.logService.trace(`Lifecycle#unload() - veto in renderer (window ID ${e.id})`),this.handleWindowUnloadVeto(n)):(n=yield this.onBeforeUnloadWindowInMain(e,i))?(this.logService.trace(`Lifecycle#unload() - veto in main (window ID ${e.id})`),this.handleWindowUnloadVeto(n)):(this.logService.trace(`Lifecycle#unload() - no veto (window ID ${e.id})`),yield this.onWillUnloadWindowInRenderer(e,i),!1)})}handleWindowUnloadVeto(e){return!!e&&(this.resolvePendingQuitPromise(!0),this._quitRequested=!1,!0)}resolvePendingQuitPromise(e){this.pendingQuitPromiseResolve&&(this.pendingQuitPromiseResolve(e),this.pendingQuitPromiseResolve=null,this.pendingQuitPromise=null)}onBeforeUnloadWindowInRenderer(e,t){return new Promise(n=>{const r=this.oneTimeListenerTokenGenerator++,s=`vscode:ok${r}`,o=`vscode:cancel${r}`;i.ipcMain.once(s,()=>{n(!1)}),i.ipcMain.once(o,()=>{n(!0)
}),e.send("vscode:onBeforeUnload",{okChannel:s,cancelChannel:o,reason:t})})}onBeforeUnloadWindowInMain(e,t){const i=[];return this._onBeforeWindowUnload.fire({reason:t,window:e,veto(e){i.push(e)}}),u.handleVetos(i,e=>this.logService.error(e))}onWillUnloadWindowInRenderer(e,t){return new Promise(n=>{const r=`vscode:reply${this.oneTimeListenerTokenGenerator++}`;i.ipcMain.once(r,()=>n()),e.send("vscode:onWillUnload",{replyChannel:r,reason:t})})}quit(t){return this.pendingQuitPromise?this.pendingQuitPromise:(this.logService.trace(`Lifecycle#quit() - from update: ${t}`),t&&this.stateService.setItem(e.QUIT_FROM_RESTART_MARKER,!0),this.pendingQuitPromise=new Promise(e=>{this.pendingQuitPromiseResolve=e,this.logService.trace("Lifecycle#quit() - calling app.quit()"),i.app.quit()}),this.pendingQuitPromise)}relaunch(t){this.logService.trace("Lifecycle#relaunch()");const n=process.argv.slice(1);if(t&&t.addArgs&&n.push(...t.addArgs),t&&t.removeArgs)for(const e of t.removeArgs){const t=n.indexOf(e);t>=0&&n.splice(t,1)}
let r=!1;i.app.once("quit",()=>{if(!r){this.stateService.setItem(e.QUIT_FROM_RESTART_MARKER,!0);try{if(d.isWindows){const e=process.env.VSCODE_CWD;e&&process.chdir(e)}}catch(e){this.logService.error(e)}this.logService.trace("Lifecycle#relaunch() - calling app.relaunch()"),i.app.relaunch({args:n})}}),this.quit().then(e=>r=e)}kill(e){this.logService.trace("Lifecycle#kill()"),i.app.exit(e)}};p.QUIT_FROM_RESTART_MARKER="quit.from.restart",p=s([o(0,r.ILogService),o(1,a.IStateService)],p),t.LifecycleService=p}),define(t[156],i([1,0,6,20,11,17,19,7]),function(e,t,i,r,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class d{constructor(e,t){this.dbPath=e,this.onError=t,this._database=null,this.lastFlushedSerializedDatabase=null}get database(){return this._database||(this._database=this.loadSync()),this._database}init(){return n(this,void 0,void 0,function*(){if(this._database)return;const e=yield this.loadAsync();this._database||(this._database=e)})}loadSync(){try{
return this.lastFlushedSerializedDatabase=r.readFileSync(this.dbPath).toString(),JSON.parse(this.lastFlushedSerializedDatabase)}catch(e){return"ENOENT"!==e.code&&this.onError(e),{}}}loadAsync(){return n(this,void 0,void 0,function*(){try{return this.lastFlushedSerializedDatabase=(yield c.readFile(this.dbPath)).toString(),JSON.parse(this.lastFlushedSerializedDatabase)}catch(e){return"ENOENT"!==e.code&&this.onError(e),{}}})}getItem(e,t){const i=this.database[e];return l.isUndefinedOrNull(i)?t:i}setItem(e,t){if(l.isUndefinedOrNull(t))return this.removeItem(e);("string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t||this.database[e]!==t)&&(this.database[e]=t,this.saveSync())}removeItem(e){l.isUndefined(this.database[e])||(this.database[e]=void 0,this.saveSync())}saveSync(){const e=JSON.stringify(this.database,null,4);if(e!==this.lastFlushedSerializedDatabase)try{c.writeFileSync(this.dbPath,e),this.lastFlushedSerializedDatabase=e}catch(e){this.onError(e)}}}t.FileStorage=d;let h=class e{constructor(t,n){
this.fileStorage=new d(i.join(t.userDataPath,e.STATE_FILE),e=>n.error(e))}init(){return this.fileStorage.init()}getItem(e,t){return this.fileStorage.getItem(e,t)}setItem(e,t){this.fileStorage.setItem(e,t)}removeItem(e){this.fileStorage.removeItem(e)}};h.STATE_FILE="storage.json",h=s([o(0,a.IEnvironmentService),o(1,u.ILogService)],h),t.StateService=h}),define(t[157],i([1,0,5,4,3,19]),function(e,t,i,r,s,o){"use strict";function a(e,t,i,r){return n(this,void 0,void 0,function*(){const n=e=>{try{return JSON.parse(e)}catch(t){return e}},s=new Map,o=new Map;e.forEach((e,t)=>{s.set(t,e),o.set(t,n(e))});const a=new Map,c=new Map;t.forEach((e,t)=>{a.set(t,e),c.set(t,n(e))}),console.group(`Storage: Global (path: ${i})`);let l=[];s.forEach((e,t)=>{l.push({key:t,value:e})}),console.table(l),console.groupEnd(),console.log(o),console.group(`Storage: Workspace (path: ${r})`);let u=[];a.forEach((e,t)=>{u.push({key:t,value:e})}),console.table(u),console.groupEnd(),console.log(c)})}Object.defineProperty(t,"__esModule",{
value:!0}),t.IStorageService=i.createDecorator("storageService");!function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"}(t.WillSaveStateReason||(t.WillSaveStateReason={}));!function(e){e[e.GLOBAL=0]="GLOBAL",e[e.WORKSPACE=1]="WORKSPACE"}(t.StorageScope||(t.StorageScope={}));class c extends s.Disposable{constructor(){super(...arguments),this._serviceBrand=null,this._onDidChangeStorage=this._register(new r.Emitter),this.onDidChangeStorage=this._onDidChangeStorage.event,this.onWillSaveState=r.Event.None,this.globalCache=new Map,this.workspaceCache=new Map}getCache(e){return 0===e?this.globalCache:this.workspaceCache}get(e,t,i){const n=this.getCache(t).get(e);return o.isUndefinedOrNull(n)?i:n}getBoolean(e,t,i){const n=this.getCache(t).get(e);return o.isUndefinedOrNull(n)?i:"true"===n}getNumber(e,t,i){const n=this.getCache(t).get(e);return o.isUndefinedOrNull(n)?i:parseInt(n,10)}store(e,t,i){if(o.isUndefinedOrNull(t))return this.remove(e,i);const n=String(t)
;return this.getCache(i).get(e)===n?Promise.resolve():(this.getCache(i).set(e,n),this._onDidChangeStorage.fire({scope:i,key:e}),Promise.resolve())}remove(e,t){return this.getCache(t).delete(e)?(this._onDidChangeStorage.fire({scope:t,key:e}),Promise.resolve()):Promise.resolve()}logStorage(){a(this.globalCache,this.workspaceCache,"inMemory","inMemory")}}t.InMemoryStorageService=c,t.logStorage=a}),define(t[158],i([1,0,5,4,3,7,11,149,148,6]),function(e,t,i,n,r,a,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IStorageMainService=i.createDecorator("storageMainService");let h=class e extends r.Disposable{constructor(e,t){super(),this.logService=e,this.environmentService=t,this._onDidChangeStorage=this._register(new n.Emitter),this.onDidChangeStorage=this._onDidChangeStorage.event,this._onWillSaveState=this._register(new n.Emitter),this.onWillSaveState=this._onWillSaveState.event,this.storage=new u.Storage(new u.InMemoryStorageDatabase)}get items(){return this.storage.items}
get storagePath(){return this.environmentService.extensionTestsLocationURI?l.SQLiteStorageDatabase.IN_MEMORY_PATH:d.join(this.environmentService.globalStorageHome,e.STORAGE_NAME)}createLogginOptions(){return{logTrace:this.logService.getLevel()===a.LogLevel.Trace?e=>this.logService.trace(e):void 0,logError:e=>this.logService.error(e)}}initialize(){return this.initializePromise||(this.initializePromise=this.doInitialize()),this.initializePromise}doInitialize(){return this.storage.dispose(),this.storage=new u.Storage(new l.SQLiteStorageDatabase(this.storagePath,{logging:this.createLogginOptions()})),this._register(this.storage.onDidChangeStorage(e=>this._onDidChangeStorage.fire({key:e}))),this.storage.init()}get(e,t){return this.storage.get(e,t)}getBoolean(e,t){return this.storage.getBoolean(e,t)}getNumber(e,t){return this.storage.getNumber(e,t)}store(e,t){return this.storage.set(e,t)}remove(e){return this.storage.delete(e)}close(){return this._onWillSaveState.fire(),this.storage.close()}}
;h.STORAGE_NAME="state.vscdb",h=s([o(0,a.ILogService),o(1,c.IEnvironmentService)],h),t.StorageMainService=h}),define(t[28],i([1,0,5]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITelemetryService=i.createDecorator("telemetryService"),t.instanceStorageKey="telemetry.instanceId",t.currentSessionDateStorageKey="telemetry.currentSessionDate",t.firstSessionDateStorageKey="telemetry.firstSessionDate",t.lastSessionDateStorageKey="telemetry.lastSessionDate"}),define(t[72],i([1,0,33,75,64,20,6,42,69,22,49,14,2,8,28,5]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w){"use strict";function y(e,t){function i(e,t,r,s){let o=[];c.readdir(e,(u,d)=>n(this,void 0,void 0,function*(){if(u)return s(o);if(r.count>a)return r.count+=d.length,r.maxReached=!0,s(o);let n=d.length;if(0===n)return s(o);let h=d;r.count+d.length>a&&(r.maxReached=!0,n=a-r.count,h=d.slice(0,n)),r.count+=d.length;for(const a of h)c.stat(l.join(e,a),(c,u)=>{if(c){if(0==--n)return s(o)
}else u.isDirectory()?-1===t.indexOf(a)?i(l.join(e,a),t,r,e=>{if(o=o.concat(e),0==--n)return s(o)}):0==--n&&s(o):(o.push(a),0==--n&&s(o))})}))}const r=[{tag:"grunt.js",pattern:/^gruntfile\.js$/i},{tag:"gulp.js",pattern:/^gulpfile\.js$/i},{tag:"tsconfig.json",pattern:/^tsconfig\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"jsconfig.json",pattern:/^jsconfig\.json$/i},{tag:"tslint.json",pattern:/^tslint\.json$/i},{tag:"eslint.json",pattern:/^eslint\.json$/i},{tag:"tasks.json",pattern:/^tasks\.json$/i},{tag:"launch.json",pattern:/^launch\.json$/i},{tag:"settings.json",pattern:/^settings\.json$/i},{tag:"webpack.config.js",pattern:/^webpack\.config\.js$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"makefile",pattern:/^makefile$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"cmake",pattern:/^.+\.cmake$/i}],s=new Map,o=new Map,a=2e4,u={count:0,maxReached:!1};return new Promise((a,c)=>{i(e,t,u,t=>n(this,void 0,void 0,function*(){t.forEach(e=>{
if(e.lastIndexOf(".")>=0){const t=e.split(".").pop();t&&(e=>{s.has(e)?s.set(e,s.get(e)+1):s.set(e,1)})(t)}(e=>{for(const t of r)t.pattern.test(e)&&(o.has(t.tag)?o.set(t.tag,o.get(t.tag)+1):o.set(t.tag,1))})(e)});const i=yield _(e);a({configFiles:S(o),fileTypes:S(s),fileCount:u.count,maxFilesReached:u.maxReached,launchConfigFiles:i})}))})}function S(e){const t=[];return e.forEach((e,i)=>t.push({name:i,count:e})),t.sort((e,t)=>t.count-e.count)}function b(){const e=1073741824,t={os:`${i.type()} ${i.arch()} ${i.release()}`,memory:`${(i.totalmem()/e).toFixed(2)}GB (${(i.freemem()/e).toFixed(2)}GB free)`,vmHint:`${Math.round(100*r.virtualMachineHint.value())}%`},n=i.cpus();return n&&n.length>0&&(t.cpus=`${n[0].model} (${n.length} x ${n[0].speed})`),t}function _(e){let t=new Map,i=l.join(e,".vscode","launch.json");return new Promise((e,n)=>{c.exists(i,n=>{if(!n)return e([]);c.readFile(i,(n,r)=>{if(n)return e([]);const s=[],o=u.parse(r.toString(),s);if(s.length)return console.log(`Unable to parse ${i}`),e([])
;if(o.configurations)for(const e of o.configurations){const i=e.type;i&&(t.has(i)?t.set(i,t.get(i)+1):t.set(i,1))}return e(S(t))})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.ID="diagnosticsService",t.IDiagnosticsService=w.createDecorator(t.ID),t.collectWorkspaceStats=y,t.getMachineInfo=b,t.collectLaunchConfigs=_;let E=class{constructor(e){this.telemetryService=e}formatMachineInfo(e){const t=[];return t.push(`OS Version:       ${e.os}`),t.push(`CPUs:             ${e.cpus}`),t.push(`Memory (System):  ${e.memory}`),t.push(`VM:               ${e.vmHint}`),t.join("\n")}formatEnvironment(e){const t=1073741824,n=[];n.push(`Version:          ${f.default.name} ${f.default.version} (${h.default.commit||"Commit unknown"}, ${h.default.date||"Date unknown"})`),n.push(`OS Version:       ${i.type()} ${i.arch()} ${i.release()}`);const s=i.cpus();return s&&s.length>0&&n.push(`CPUs:             ${s[0].model} (${s.length} x ${s[0].speed})`),
n.push(`Memory (System):  ${(i.totalmem()/t).toFixed(2)}GB (${(i.freemem()/t).toFixed(2)}GB free)`),g.isWindows||n.push(`Load (avg):       ${i.loadavg().map(e=>Math.round(e)).join(", ")}`),n.push(`VM:               ${Math.round(100*r.virtualMachineHint.value())}%`),n.push(`Screen Reader:    ${e.screenReader?"yes":"no"}`),n.push(`Process Argv:     ${e.mainArguments.join(" ")}`),n.push(`GPU Status:       ${this.expandGPUFeatures(e.gpuFeatureStatus)}`),n.join("\n")}getPerformanceInfo(e,t){return n(this,void 0,void 0,function*(){return Promise.all([d.listProcesses(e.mainPID),this.formatWorkspaceMetadata(e)]).then(i=>n(this,void 0,void 0,function*(){let[n,r]=i,s=this.formatProcessList(e,n);return t.forEach(t=>{if(a.isRemoteDiagnosticError(t))s+=`\n${t.errorMessage}`,r+=`\n${t.errorMessage}`;else if(s+=`\n\nRemote: ${t.hostName}`,t.processes&&(s+=`\n${this.formatProcessList(e,t.processes)}`),t.workspaceMetadata){r+=`\n|  Remote: ${t.hostName}`;for(const e of Object.keys(t.workspaceMetadata)){
const i=t.workspaceMetadata[e];let n=`${i.fileCount} files`;i.maxFilesReached&&(n=`more than ${n}`),r+=`|    Folder (${e}): ${n}`,r+=this.formatWorkspaceStats(i)}}}),{processInfo:s,workspaceInfo:r}}))})}getSystemInfo(e,t){return n(this,void 0,void 0,function*(){const{memory:n,vmHint:r,os:s,cpus:o}=b(),a={os:s,memory:n,cpus:o,vmHint:r,processArgs:`${e.mainArguments.join(" ")}`,gpuStatus:e.gpuFeatureStatus,screenReader:`${e.screenReader?"yes":"no"}`,remoteData:t};return g.isWindows||(a.load=`${i.loadavg().map(e=>Math.round(e)).join(", ")}`),Promise.resolve(a)})}getDiagnostics(e,t){return n(this,void 0,void 0,function*(){const i=[];return d.listProcesses(e.mainPID).then(r=>n(this,void 0,void 0,function*(){return i.push(""),i.push(this.formatEnvironment(e)),i.push(""),i.push(this.formatProcessList(e,r)),e.windows.some(e=>e.folderURIs&&e.folderURIs.length>0&&!e.remoteAuthority)&&(i.push(""),i.push("Workspace Stats: "),i.push(yield this.formatWorkspaceMetadata(e))),t.forEach(t=>{
if(a.isRemoteDiagnosticError(t))i.push(`\n${t.errorMessage}`);else if(i.push("\n\n"),i.push(`Remote:           ${t.hostName}`),i.push(this.formatMachineInfo(t.machineInfo)),t.processes&&i.push(this.formatProcessList(e,t.processes)),t.workspaceMetadata)for(const e of Object.keys(t.workspaceMetadata)){const n=t.workspaceMetadata[e];let r=`${n.fileCount} files`;n.maxFilesReached&&(r=`more than ${r}`),i.push(`Folder (${e}): ${r}`),i.push(this.formatWorkspaceStats(n))}}),i.push(""),i.push(""),i.join("\n")}))})}formatWorkspaceStats(e){const t=[];let i=0;const n=(e,n)=>{const s=` ${e}(${n})`;i+s.length>60?(t.push(r),i=(r="|                 ").length):i+=s.length,r+=s};let r="|      File types:";let s=e.fileTypes.length>10?10:e.fileTypes.length;for(let t=0;t<s;t++){const i=e.fileTypes[t];n(i.name,i.count)}if(t.push(r),e.configFiles.length>=0&&(r="|      Conf files:",i=0,e.configFiles.forEach(e=>{n(e.name,e.count)}),t.push(r)),e.launchConfigFiles.length>0){let i="|      Launch Configs:"
;e.launchConfigFiles.forEach(e=>{const t=e.count>1?` ${e.name}(${e.count})`:` ${e.name}`;i+=t}),t.push(i)}return t.join("\n")}expandGPUFeatures(e){const t=Math.max(...Object.keys(e).map(e=>e.length));return Object.keys(e).map(i=>`${i}:  ${p.repeat(" ",t-i.length)}  ${e[i]}`).join("\n                  ")}formatWorkspaceMetadata(e){const t=[],i=[];return e.windows.forEach(e=>{0===e.folderURIs.length||e.remoteAuthority||(t.push(`|  Window (${e.title})`),e.folderURIs.forEach(e=>{const n=m.URI.revive(e);if("file"===n.scheme){const e=n.fsPath;i.push(y(e,["node_modules",".git"]).then(i=>{let n=`${i.fileCount} files`;i.maxFilesReached&&(n=`more than ${n}`),t.push(`|    Folder (${l.basename(e)}): ${n}`),t.push(this.formatWorkspaceStats(i))}).catch(i=>{t.push(`|      Error: Unable to collect workspace stats for folder ${e} (${i.toString()})`)}))}else t.push(`|    Folder (${n.toString()}): Workspace stats not available.`)}))}),Promise.all(i).then(e=>t.join("\n")).catch(e=>`Unable to collect workspace stats: ${e}`)}
formatProcessList(e,t){const i=new Map;e.windows.forEach(e=>i.set(e.pid,e.title));const n=[];return n.push("CPU %\tMem MB\t   PID\tProcess"),t&&this.formatProcessItem(e.mainPID,i,n,t,0),n.join("\n")}formatProcessItem(e,t,n,r,s){let o;0===s?o=r.pid===e?`${h.default.applicationName} main`:"remote agent":(o=`${p.repeat("  ",s)} ${r.name}`,"window"===r.name&&(o=`${o} (${t.get(r.pid)})`));const a="win32"===process.platform?r.mem:i.totalmem()*(r.mem/100);n.push(`${p.pad(Number(r.load.toFixed(0)),5," ")}\t${p.pad(Number((a/1048576).toFixed(0)),6," ")}\t${p.pad(Number(r.pid.toFixed(0)),6," ")}\t${o}`),Array.isArray(r.children)&&r.children.forEach(i=>this.formatProcessItem(e,t,n,i,s+1))}reportWorkspaceStats(e){return n(this,void 0,void 0,function*(){e.folders.forEach(t=>{const i=m.URI.revive(t.uri);if("file"===i.scheme){y(i.fsPath,["node_modules",".git"]).then(t=>{this.telemetryService.publicLog2("workspace.stats",{"workspace.id":e.telemetryId,fileTypes:t.fileTypes,configTypes:t.configFiles,
launchConfigs:t.launchConfigFiles})}).catch(e=>{})}})})}};E=s([o(0,v.ITelemetryService)],E),t.DiagnosticsService=E}),define(t[161],i([1,0,18,117,105,15,28,47,103,11,39,27,34,7,30,21,31,138,157,5]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_){"use strict";function E(...e){return String(e.reduce((e,t)=>e|t,0))}function C(e,t){const i=(e||[]).filter(e=>e.statisticName===t)[0];return i?i.value:0}function k(e,t){return e.files.filter(e=>e.assetType===t)[0]?{uri:`${e.assetUri}/${t}`,fallbackUri:`${e.fallbackAssetUri}/${t}`}:null}function I(e,t){const i=e.properties?e.properties.filter(e=>e.key===t):[],n=i.length>0&&i[0].value;return n?n.split(",").map(e=>a.adoptToGalleryExtensionId(e)):[]}function P(e){const t=e.properties?e.properties.filter(e=>e.key===L.Engine):[];return t.length>0&&t[0].value||""}function M(t,i,n,r,s){const o={manifest:k(i,W.Manifest),readme:k(i,W.Details),changelog:k(i,W.Changelog),license:k(i,W.License),repository:function(e){if(e.properties){
const t=e.properties.filter(e=>e.key===W.Repository),i=new RegExp("((git|ssh|http(s)?)|(git@[w.]+))(:(//)?)([w.@:/-~]+)(.git)(/)?"),n=t.filter(e=>i.test(e.value))[0];return n?{uri:n.value,fallbackUri:n.value}:null}return k(e,W.Repository)}(i),download:function(e){return{uri:`${e.fallbackAssetUri}/${W.VSIX}?redirect=true`,fallbackUri:`${e.fallbackAssetUri}/${W.VSIX}`}}(i),icon:function(t){const i=k(t,W.Icon);if(i)return i;const n=e.toUrl("./media/defaultIcon.png");return{uri:n,fallbackUri:n}}(i),coreTranslations:function(e){return e.files.filter(e=>0===e.assetType.indexOf("Microsoft.VisualStudio.Code.Translation.")).reduce((t,i)=>{const n=k(e,i.assetType);return n&&t.push([i.assetType.substring("Microsoft.VisualStudio.Code.Translation.".length),n]),t},[])}(i)};return{identifier:{id:a.getGalleryExtensionId(t.publisher.publisherName,t.extensionName),uuid:t.extensionId},name:t.extensionName,version:i.version,date:i.lastUpdated,displayName:t.displayName,publisherId:t.publisher.publisherId,
publisher:t.publisher.publisherName,publisherDisplayName:t.publisher.displayName,description:t.shortDescription||"",installCount:C(t.statistics,"install")+C(t.statistics,"updateCount"),rating:C(t.statistics,"averagerating"),ratingCount:C(t.statistics,"ratingcount"),assets:o,properties:{dependencies:I(i,L.Dependency),extensionPack:I(i,L.ExtensionPack),engine:P(i),localizedLanguages:function(e){const t=e.properties?e.properties.filter(e=>e.key===L.LocalizedLanguages):[],i=t.length>0&&t[0].value||"";return i?i.split(","):[]}(i)},telemetryData:{index:(r.pageNumber-1)*r.pageSize+n,searchText:r.searchText,querySource:s},preview:function(e){return-1!==e.indexOf("preview")}(t.flags)}}function A(e,t,i,r){return n(this,void 0,void 0,function*(){const n={"X-Market-Client-Id":`VSCode ${e}`,"User-Agent":`VSCode ${e}`};let s=null;if(t.galleryMachineIdResource){try{const e=(yield i.readFile(t.galleryMachineIdResource)).value.toString();s=f.isUUID(e)?e:null}catch(e){s=null}if(!s){s=f.generateUuid();try{
yield i.writeFile(t.galleryMachineIdResource,y.VSBuffer.fromString(s))}catch(e){}}}return r&&((s=r.get("marketplace.userid",0)||null)||(s=f.generateUuid(),r.store("marketplace.userid",s,0))),s&&(n["X-Market-User-Id"]=s),n})}Object.defineProperty(t,"__esModule",{value:!0});var D;!function(e){e[e.None=0]="None",e[e.IncludeVersions=1]="IncludeVersions",e[e.IncludeFiles=2]="IncludeFiles",e[e.IncludeCategoryAndTags=4]="IncludeCategoryAndTags",e[e.IncludeSharedAccounts=8]="IncludeSharedAccounts",e[e.IncludeVersionProperties=16]="IncludeVersionProperties",e[e.ExcludeNonValidated=32]="ExcludeNonValidated",e[e.IncludeInstallationTargets=64]="IncludeInstallationTargets",e[e.IncludeAssetUri=128]="IncludeAssetUri",e[e.IncludeStatistics=256]="IncludeStatistics",e[e.IncludeLatestVersionOnly=512]="IncludeLatestVersionOnly",e[e.Unpublished=4096]="Unpublished"}(D||(D={}));var O;!function(e){e[e.Tag=1]="Tag",e[e.ExtensionId=4]="ExtensionId",e[e.Category=5]="Category",e[e.ExtensionName=7]="ExtensionName",e[e.Target=8]="Target",
e[e.Featured=9]="Featured",e[e.SearchText=10]="SearchText",e[e.ExcludeWithFlags=12]="ExcludeWithFlags"}(O||(O={}));const W={Icon:"Microsoft.VisualStudio.Services.Icons.Default",Details:"Microsoft.VisualStudio.Services.Content.Details",Changelog:"Microsoft.VisualStudio.Services.Content.Changelog",Manifest:"Microsoft.VisualStudio.Code.Manifest",VSIX:"Microsoft.VisualStudio.Services.VSIXPackage",License:"Microsoft.VisualStudio.Services.Content.License",Repository:"Microsoft.VisualStudio.Services.Links.Source"},L={Dependency:"Microsoft.VisualStudio.Code.ExtensionDependencies",ExtensionPack:"Microsoft.VisualStudio.Code.ExtensionPack",Engine:"Microsoft.VisualStudio.Code.Engine",LocalizedLanguages:"Microsoft.VisualStudio.Code.LocalizedLanguages"},R={pageNumber:1,pageSize:10,sortBy:0,sortOrder:0,flags:D.None,criteria:[],assetTypes:[]};class F{constructor(e=R){this.state=e}get pageNumber(){return this.state.pageNumber}get pageSize(){return this.state.pageSize}get sortBy(){return this.state.sortBy}get sortOrder(){
return this.state.sortOrder}get flags(){return this.state.flags}withPage(e,t=this.state.pageSize){return new F(c.assign({},this.state,{pageNumber:e,pageSize:t}))}withFilter(e,...t){const i=[...this.state.criteria,...t.map(t=>({filterType:e,value:t}))];return new F(c.assign({},this.state,{criteria:i}))}withSortBy(e){return new F(c.assign({},this.state,{sortBy:e}))}withSortOrder(e){return new F(c.assign({},this.state,{sortOrder:e}))}withFlags(...e){return new F(c.assign({},this.state,{flags:e.reduce((e,t)=>e|t,0)}))}withAssetTypes(...e){return new F(c.assign({},this.state,{assetTypes:e}))}get raw(){const{criteria:e,pageNumber:t,pageSize:i,sortBy:n,sortOrder:r,flags:s,assetTypes:o}=this.state;return{filters:[{criteria:e,pageNumber:t,pageSize:i,sortBy:n,sortOrder:r}],assetTypes:o,flags:s}}get searchText(){const e=this.state.criteria.filter(e=>e.filterType===O.SearchText)[0];return e&&e.value?e.value:""}}let T=class{constructor(e,t,i,n,r,s,o){this.requestService=e,this.logService=t,this.environmentService=i,
this.telemetryService=n,this.fileService=r,this.productService=s,this.storageService=o;const a=s.extensionsGallery;this.extensionsGalleryUrl=a&&a.serviceUrl,this.extensionsControlUrl=a&&a.controlUrl,this.commonHeadersPromise=A(s.version,this.environmentService,this.fileService,this.storageService)}api(e=""){return`${this.extensionsGalleryUrl}${e}`}isEnabled(){return!!this.extensionsGalleryUrl}getCompatibleExtension(e,t){const i=r.isIExtensionIdentifier(e)?null:e;if(i&&i.properties.engine&&d.isEngineValid(i.properties.engine,this.productService.version))return Promise.resolve(i);const{id:n,uuid:s}=i?i.identifier:e;let o=(new F).withFlags(D.IncludeAssetUri,D.IncludeStatistics,D.IncludeFiles,D.IncludeVersionProperties,D.ExcludeNonValidated).withPage(1,1).withFilter(O.Target,"Microsoft.VisualStudio.Code").withFilter(O.ExcludeWithFlags,E(D.Unpublished));return o=s?o.withFilter(O.ExtensionId,s):o.withFilter(O.ExtensionName,n),this.queryGallery(o,g.CancellationToken.None).then(({galleryExtensions:e})=>{const[i]=e
;if(!i||!i.versions.length)return null;if(t){const e=i.versions.filter(e=>e.version===t)[0];if(e){const t=M(i,e,0,o);if(t.properties.engine&&d.isEngineValid(t.properties.engine,this.productService.version))return t}return null}return this.getLastValidExtensionVersion(i,i.versions).then(e=>e?M(i,e,0,o):null)})}query(e,t){const n=g.CancellationToken.isCancellationToken(e)?{}:e,r=g.CancellationToken.isCancellationToken(e)?e:t;if(!this.isEnabled())return Promise.reject(new Error("No extension gallery service configured."));const s=n.names?"ids":n.text?"text":"all";let o=n.text||"";const a=c.getOrDefault(n,e=>e.pageSize,50);this.telemetryService.publicLog2("galleryService:query",{type:s,text:o});let l=(new F).withFlags(D.IncludeLatestVersionOnly,D.IncludeAssetUri,D.IncludeStatistics,D.IncludeFiles,D.IncludeVersionProperties).withPage(1,a).withFilter(O.Target,"Microsoft.VisualStudio.Code").withFilter(O.ExcludeWithFlags,E(D.Unpublished))
;return o?((o=(o=(o=o.replace(/\bcategory:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(e,t,i)=>(l=l.withFilter(O.Category,i||t),""))).replace(/\btag:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(e,t,i)=>(l=l.withFilter(O.Tag,i||t),""))).trim())&&(o=o.length<200?o:o.substring(0,200),l=l.withFilter(O.SearchText,o)),l=l.withSortBy(0)):l=n.ids?l.withFilter(O.ExtensionId,...n.ids):n.names?l.withFilter(O.ExtensionName,...n.names):l.withSortBy(4),"number"==typeof n.sortBy&&(l=l.withSortBy(n.sortBy)),"number"==typeof n.sortOrder&&(l=l.withSortOrder(n.sortOrder)),this.queryGallery(l,r).then(({galleryExtensions:e,total:t})=>{return{firstPage:e.map((e,t)=>M(e,e.versions[0],t,l,n.source)),total:t,pageSize:l.pageSize,getPage:(e,t)=>{if(t.isCancellationRequested)return Promise.reject(i.canceled());const r=l.withPage(e+1);return this.queryGallery(r,t).then(({galleryExtensions:e})=>e.map((e,t)=>M(e,e.versions[0],t,r,n.source)))}}})}queryGallery(e,t){return this.isEnabled()?this.commonHeadersPromise.then(i=>{
const n=JSON.stringify(e.raw),r=c.assign({},i,{"Content-Type":"application/json",Accept:"application/json;api-version=3.0-preview.1","Accept-Encoding":"gzip","Content-Length":n.length});return this.requestService.request({type:"POST",url:this.api("/extensionquery"),data:n,headers:r},t).then(e=>e.res.statusCode&&e.res.statusCode>=400&&e.res.statusCode<500?{galleryExtensions:[],total:0}:u.asJson(e).then(e=>{if(e){const t=e.results[0],i=t.extensions,n=t.resultMetadata&&t.resultMetadata.filter(e=>"ResultCount"===e.metadataType)[0];return{galleryExtensions:i,total:n&&n.metadataItems.filter(e=>"TotalCount"===e.name)[0].count||0}}return{galleryExtensions:[],total:0}}))}):Promise.reject(new Error("No extension gallery service configured."))}reportStatistic(e,t,i,n){return this.isEnabled()?this.commonHeadersPromise.then(r=>{const s=Object.assign({},r,{Accept:"*/*;api-version=4.0-preview.1"});return this.requestService.request({type:"POST",url:this.api(`/publishers/${e}/extensions/${t}/${i}/stats?statType=${n}`),
headers:s},g.CancellationToken.None).then(void 0,()=>void 0)}):Promise.resolve(void 0)}download(e,t,i){this.logService.trace("ExtensionGalleryService#download",e.identifier.id);const n=w.joinPath(t,f.generateUuid()),r=a.getGalleryExtensionTelemetryData(e),s=(new Date).getTime(),o=1===i?"install":2===i?"update":"",l=o?{uri:`${e.assets.download.uri}&${o}=true`,fallbackUri:`${e.assets.download.fallbackUri}?${o}=true`}:e.assets.download;return this.getAsset(l).then(e=>this.fileService.writeFile(n,e.stream)).then(()=>(e=>this.telemetryService.publicLog("galleryService:downloadVSIX",c.assign(r,{duration:e})))((new Date).getTime()-s)).then(()=>n)}getReadme(e,t){return e.assets.readme?this.getAsset(e.assets.readme,{},t).then(e=>u.asText(e)).then(e=>e||""):Promise.resolve("")}getManifest(e,t){return e.assets.manifest?this.getAsset(e.assets.manifest,{},t).then(u.asText).then(JSON.parse):Promise.resolve(null)}getCoreTranslation(e,t){const i=e.assets.coreTranslations.filter(e=>e[0]===t.toUpperCase())[0]
;return i?this.getAsset(i[1]).then(u.asText).then(JSON.parse):Promise.resolve(null)}getChangelog(e,t){return e.assets.changelog?this.getAsset(e.assets.changelog,{},t).then(e=>u.asText(e)).then(e=>e||""):Promise.resolve("")}getAllVersions(e,t){let i=(new F).withFlags(D.IncludeVersions,D.IncludeFiles,D.IncludeVersionProperties,D.ExcludeNonValidated).withPage(1,1).withFilter(O.Target,"Microsoft.VisualStudio.Code").withFilter(O.ExcludeWithFlags,E(D.Unpublished));return i=e.identifier.uuid?i.withFilter(O.ExtensionId,e.identifier.uuid):i.withFilter(O.ExtensionName,e.identifier.id),this.queryGallery(i,g.CancellationToken.None).then(({galleryExtensions:e})=>e.length?t?Promise.all(e[0].versions.map(e=>this.getEngine(e).then(t=>d.isEngineValid(t,this.productService.version)?e:null))).then(e=>e.filter(e=>!!e).map(e=>({version:e.version,date:e.lastUpdated}))):e[0].versions.map(e=>({version:e.version,date:e.lastUpdated})):[])}getAsset(e,t={},n=g.CancellationToken.None){return this.commonHeadersPromise.then(r=>{
const s=c.assign({},r,t.headers||{});t=c.assign({},t,{type:"GET"},{headers:s});const o=e.uri,a=e.fallbackUri,l=c.assign({},t,{url:o});return this.requestService.request(l,n).then(e=>200===e.res.statusCode?Promise.resolve(e):u.asText(e).then(t=>Promise.reject(new Error(`Expected 200, got back ${e.res.statusCode} instead.\n\n${t}`)))).then(void 0,e=>{if(i.isPromiseCanceledError(e))return Promise.reject(e);const r=i.getErrorMessage(e);this.telemetryService.publicLog2("galleryService:requestError",{url:o,cdn:!0,message:r}),this.telemetryService.publicLog2("galleryService:cdnFallback",{url:o,message:r});const s=c.assign({},t,{url:a});return this.requestService.request(s,n).then(void 0,e=>{if(i.isPromiseCanceledError(e))return Promise.reject(e);const t=i.getErrorMessage(e);return this.telemetryService.publicLog2("galleryService:requestError",{url:a,cdn:!1,message:t}),Promise.reject(e)})})})}getLastValidExtensionVersion(e,t){const i=this.getLastValidExtensionVersionFromProperties(e,t)
;return i||this.getLastValidExtensionVersionRecursively(e,t)}getLastValidExtensionVersionFromProperties(e,t){for(const e of t){const t=P(e);if(!t)return null;if(d.isEngineValid(t,this.productService.version))return Promise.resolve(e)}return null}getEngine(e){const t=P(e);if(t)return Promise.resolve(t);const i=k(e,W.Manifest);if(!i)return Promise.reject("Manifest was not found");return this.getAsset(i,{headers:{"Accept-Encoding":"gzip"}}).then(e=>u.asJson(e)).then(e=>e?e.engines.vscode:Promise.reject("Error while reading manifest"))}getLastValidExtensionVersionRecursively(e,t){if(!t.length)return Promise.resolve(null);const i=t[0];return this.getEngine(i).then(n=>d.isEngineValid(n,this.productService.version)?(i.properties=i.properties||[],i.properties.push({key:L.Engine,value:n}),i):this.getLastValidExtensionVersionRecursively(e,t.slice(1)))}getExtensionsReport(){return this.isEnabled()?this.extensionsControlUrl?this.requestService.request({type:"GET",url:this.extensionsControlUrl
},g.CancellationToken.None).then(e=>200!==e.res.statusCode?Promise.reject(new Error("Could not get extensions report.")):u.asJson(e).then(e=>{const t=new Map;if(e)for(const i of e.malicious){const e=t.get(i)||{id:{id:i},malicious:!0,slow:!1};e.malicious=!0,t.set(i,e)}return Promise.resolve(p.values(t))})):Promise.resolve([]):Promise.reject(new Error("No extension gallery service configured."))}};T=s([o(0,u.IRequestService),o(1,m.ILogService),o(2,h.IEnvironmentService),o(3,l.ITelemetryService),o(4,v.IFileService),o(5,S.IProductService),o(6,_.optional(b.IStorageService))],T),t.ExtensionGalleryService=T,t.resolveMarketplaceHeaders=A}),define(t[162],i([1,0,4,27,3,18,39,28]),function(e,t,i,r,s,o,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class l extends s.Disposable{constructor(e,t){super(),this.logService=e,this.storageMainService=t,this._onDidChangeItems=this._register(new i.Emitter),this.onDidChangeItems=this._onDidChangeItems.event,this.whenReady=this.init()}init(){
return n(this,void 0,void 0,function*(){try{yield this.storageMainService.initialize()}catch(e){o.onUnexpectedError(e),this.logService.error(e)}this.initTelemetry(),this.registerListeners()})}initTelemetry(){void 0===this.storageMainService.get(c.instanceStorageKey,void 0)&&this.storageMainService.store(c.instanceStorageKey,a.generateUuid());void 0===this.storageMainService.get(c.firstSessionDateStorageKey,void 0)&&this.storageMainService.store(c.firstSessionDateStorageKey,(new Date).toUTCString());const e=this.storageMainService.get(c.currentSessionDateStorageKey,void 0),t=(new Date).toUTCString();this.storageMainService.store(c.lastSessionDateStorageKey,void 0===e?null:e),this.storageMainService.store(c.currentSessionDateStorageKey,t)}registerListeners(){this._register(i.Event.debounce(this.storageMainService.onDidChangeStorage,(e,t)=>(e?e.push(t):e=[t],e),l.STORAGE_CHANGE_DEBOUNCE_TIME)(e=>{e.length&&this._onDidChangeItems.fire(this.serializeEvents(e))}))}serializeEvents(e){const t=new Map
;return e.forEach(e=>t.set(e.key,this.storageMainService.get(e.key))),{items:r.mapToSerializable(t)}}listen(e,t){switch(t){case"onDidChangeItems":return this.onDidChangeItems}throw new Error(`Event not found: ${t}`)}call(e,t,i){return n(this,void 0,void 0,function*(){switch(yield this.whenReady,t){case"getItems":return r.mapToSerializable(this.storageMainService.items);case"updateItems":{const e=i;if(e.insert)for(const[t,i]of e.insert)this.storageMainService.store(t,i);e.delete&&e.delete.forEach(e=>this.storageMainService.remove(e));break}default:throw new Error(`Call not found: ${t}`)}})}}l.STORAGE_CHANGE_DEBOUNCE_TIME=100,t.GlobalStorageDatabaseChannel=l;class u extends s.Disposable{constructor(e){super(),this.channel=e,this._onDidChangeItemsExternal=this._register(new i.Emitter),this.onDidChangeItemsExternal=this._onDidChangeItemsExternal.event,this.registerListeners()}registerListeners(){this.onDidChangeItemsOnMainListener=this.channel.listen("onDidChangeItems")(e=>this.onDidChangeItemsOnMain(e))}
onDidChangeItemsOnMain(e){Array.isArray(e.items)&&this._onDidChangeItemsExternal.fire({items:r.serializableToMap(e.items)})}getItems(){return n(this,void 0,void 0,function*(){const e=yield this.channel.call("getItems");return r.serializableToMap(e)})}updateItems(e){const t=Object.create(null);return e.insert&&(t.insert=r.mapToSerializable(e.insert)),e.delete&&(t.delete=r.values(e.delete)),this.channel.call("updateItems",t)}close(){return s.dispose(this.onDidChangeItemsOnMainListener),Promise.resolve()}dispose(){super.dispose(),s.dispose(this.onDidChangeItemsOnMainListener)}}t.GlobalStorageDatabaseChannelClient=u}),define(t[163],i([1,0,95,14,5,16,46,3,15,35]),function(e,t,i,r,a,c,l,u,d,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let f=class{constructor(e,t){this._configurationService=t,this._disposables=new u.DisposableStore,this._cleanupPatterns=[],this._appender=e.appender,this._commonProperties=e.commonProperties||Promise.resolve({}),this._piiPaths=e.piiPaths||[],this._userOptIn=!0,
this._enabled=!0,this._cleanupPatterns=[/file:\/\/\/.*?\/resources\/app\//gi];for(let e of this._piiPaths)this._cleanupPatterns.push(new RegExp(r.escapeRegExpCharacters(e),"gi"));this._configurationService&&(this._updateUserOptIn(),this._configurationService.onDidChangeConfiguration(this._updateUserOptIn,this,this._disposables),this.publicLog2("optInStatus",{optIn:this._userOptIn}),this._commonProperties.then(t=>{const i=/^[a-f0-9]+$/i.test(t["common.machineId"]);this.publicLog2("machineIdFallback",{usingFallbackGuid:!i}),e.trueMachineId&&this.publicLog2("machineIdDisambiguation",{correctedMachineId:e.trueMachineId})}))}setEnabled(e){this._enabled=e}_updateUserOptIn(){const e=this._configurationService.getValue(p);this._userOptIn=e?e.enableTelemetry:this._userOptIn}get isOptedIn(){return this._userOptIn&&this._enabled}getTelemetryInfo(){return n(this,void 0,void 0,function*(){const e=yield this._commonProperties;return{sessionId:e.sessionID,instanceId:e["common.instanceId"],machineId:e["common.machineId"],
msftInternal:e["common.msftInternal"]}})}dispose(){this._disposables.dispose()}publicLog(e,t,i){return this.isOptedIn?this._commonProperties.then(n=>{t=d.mixin(t,n),t=d.cloneAndChange(t,e=>{if("string"==typeof e)return this._cleanupInfo(e,i)}),this._appender.log(e,t)},e=>{console.error(e)}):Promise.resolve(void 0)}publicLog2(e,t,i){return this.publicLog(e,t,i)}_cleanupInfo(e,t){let i=e;if(t){const t=[];for(let i of this._cleanupPatterns)for(;;){const n=i.exec(e);if(!n)break;t.push([n.index,i.lastIndex])}const n=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,r=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let s=0;for(i="";;){const o=r.exec(e);if(!o)break;!n.test(o[0])&&t.every(([e,t])=>o.index<e||o.index>=t)&&(i+=e.substring(s,o.index)+"<REDACTED: user-file-path>",s=r.lastIndex)}s<e.length&&(i+=e.substr(s))}for(let e of this._cleanupPatterns)i=i.replace(e,"");return i}};f.IDLE_START_EVENT_NAME="UserIdleStart",f.IDLE_STOP_EVENT_NAME="UserIdleStop",
f=s([o(1,a.optional(c.IConfigurationService))],f),t.TelemetryService=f;const p="telemetry";h.Registry.as(l.Extensions.Configuration).registerConfiguration({id:p,order:110,type:"object",title:i.localize(0,null),properties:{"telemetry.enableTelemetry":{type:"boolean",description:i.localize(1,null),default:!0,tags:["usesOnlineServices"]}}})}),define(t[164],i([1,0,16,7,15,19]),function(e,t,i,n,r,a){"use strict";function c(e,t){return t.onDidChangeConfiguration(t=>{6!==t.source&&(e.publicLog2("updateConfiguration",{configurationSource:i.ConfigurationTargetToString(t.source),configurationKeys:function(e){if(!e)return[];const t=[];return u(t,"",e),t}(t.sourceConfig)}),e.publicLog2("updateConfigurationValues",{configurationSource:i.ConfigurationTargetToString(t.source),configurationValues:function(e,t){if(!e)return[];return t.reduce((t,i)=>{const n=i.split(".").reduce((e,t)=>e&&"object"==typeof e?e[t]:void 0,e);return void 0!==n&&t.push({[i]:n}),t},[])}(t.sourceConfig,h)}))})}function l(e,t,i=0,n){
if(e)for(let s of Object.getOwnPropertyNames(e)){const o=e[s],c=n?n+s:s;Array.isArray(o)?t[c]=r.safeStringify(o):o instanceof Date?t[c]=o.toISOString():a.isObject(o)?i<2?l(o,t,i+1,c+"."):t[c]=r.safeStringify(o):t[c]=o}}function u(e,t,i){i&&"object"==typeof i&&!Array.isArray(i)?Object.keys(i).forEach(n=>u(e,t?`${t}.${n}`:n,i[n])):e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NullTelemetryService=new class{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}setEnabled(){}getTelemetryInfo(){return Promise.resolve({instanceId:"someValue.instanceId",sessionId:"someValue.sessionId",machineId:"someValue.machineId"})}},t.combinedAppender=function(...e){return{log:(t,i)=>e.forEach(e=>e.log(t,i)),flush:()=>Promise.all(e.map(e=>e.flush()))}},t.NullAppender={log:()=>null,flush:()=>Promise.resolve(null)};let d=class{constructor(e){this._logService=e,this.commonPropertiesRegex=/^sessionID$|^version$|^timestamp$|^commitHash$|^common\./}flush(){
return Promise.resolve(void 0)}log(e,t){const i={};Object.keys(t).forEach(e=>{this.commonPropertiesRegex.test(e)||(i[e]=t[e])}),this._logService.trace(`telemetry/${e}`,i)}};d=s([o(0,n.ILogService)],d),t.LogAppender=d
;const h=["editor.fontFamily","editor.fontWeight","editor.fontSize","editor.lineHeight","editor.letterSpacing","editor.lineNumbers","editor.rulers","editor.wordSeparators","editor.tabSize","editor.indentSize","editor.insertSpaces","editor.detectIndentation","editor.roundedSelection","editor.scrollBeyondLastLine","editor.minimap.enabled","editor.minimap.side","editor.minimap.renderCharacters","editor.minimap.maxColumn","editor.find.seedSearchStringFromSelection","editor.find.autoFindInSelection","editor.wordWrap","editor.wordWrapColumn","editor.wrappingIndent","editor.mouseWheelScrollSensitivity","editor.multiCursorModifier","editor.quickSuggestions","editor.quickSuggestionsDelay","editor.parameterHints.enabled","editor.parameterHints.cycle","editor.autoClosingBrackets","editor.autoClosingQuotes","editor.autoSurround","editor.autoIndent","editor.formatOnType","editor.formatOnPaste","editor.suggestOnTriggerCharacters","editor.acceptSuggestionOnEnter","editor.acceptSuggestionOnCommitCharacter","editor.snippetSuggestions","editor.emptySelectionClipboard","editor.wordBasedSuggestions","editor.suggestSelection","editor.suggestFontSize","editor.suggestLineHeight","editor.tabCompletion","editor.selectionHighlight","editor.occurrencesHighlight","editor.overviewRulerLanes","editor.overviewRulerBorder","editor.cursorBlinking","editor.cursorSmoothCaretAnimation","editor.cursorStyle","editor.mouseWheelZoom","editor.fontLigatures","editor.hideCursorInOverviewRuler","editor.renderWhitespace","editor.renderControlCharacters","editor.renderIndentGuides","editor.renderLineHighlight","editor.codeLens","editor.folding","editor.showFoldingControls","editor.matchBrackets","editor.glyphMargin","editor.useTabStops","editor.trimAutoWhitespace","editor.stablePeek","editor.dragAndDrop","editor.formatOnSave","editor.colorDecorators","breadcrumbs.enabled","breadcrumbs.filePath","breadcrumbs.symbolPath","breadcrumbs.symbolSortOrder","breadcrumbs.useQuickPick","explorer.openEditors.visible","extensions.autoUpdate","files.associations","files.autoGuessEncoding","files.autoSave","files.autoSaveDelay","files.encoding","files.eol","files.hotExit","files.trimTrailingWhitespace","git.confirmSync","git.enabled","http.proxyStrictSSL","javascript.validate.enable","php.builtInCompletions.enable","php.validate.enable","php.validate.run","terminal.integrated.fontFamily","window.openFilesInNewWindow","window.restoreWindows","window.nativeFullScreen","window.zoomLevel","workbench.editor.enablePreview","workbench.editor.enablePreviewFromQuickOpen","workbench.editor.showTabs","workbench.editor.highlightModifiedTabs","workbench.sideBar.location","workbench.startupEditor","workbench.statusBar.visible","workbench.welcome.enabled"]
;t.configurationTelemetry=c,t.keybindingsTelemetry=function(e,t){return t.onDidUpdateKeybindings(t=>{2===t.source&&t.keybindings&&e.publicLog2("updateKeybindings",{bindings:t.keybindings.map(e=>({key:e.key,command:e.command,when:e.when,args:!!e.args||void 0}))})})},t.validateTelemetryData=function(e){const t=Object.create(null),i=Object.create(null),n=Object.create(null);l(e,n);for(let e in n){const r=n[e=e.length>150?e.substr(e.length-149):e];"number"==typeof r?i[e]=r:"boolean"==typeof r?i[e]=r?1:0:"string"==typeof r?t[e]=r.substring(0,1023):void 0!==r&&null!==r&&(t[e]=r)}return{properties:t,measurements:i}},t.cleanRemoteAuthority=function(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(i=>{0===e.indexOf(`${i}+`)&&(t=i)}),t}}),define(t[165],i([1,0,2,33,39,17]),function(e,t,i,r,s,o){"use strict";function a(e,t,a,c,l,u){return n(this,void 0,void 0,function*(){const n=Object.create(null);n["common.machineId"]=a,n.sessionID=s.generateUuid()+Date.now(),
n.commitHash=e,n.version=t,n["common.platformVersion"]=(r.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),n["common.platform"]=i.PlatformToString(i.platform),n["common.nodePlatform"]=process.platform,n["common.nodeArch"]=process.arch,n["common.product"]=u||"desktop";const d=function(e){if(!process||!process.env||!process.env.USERDNSDOMAIN)return!1;const t=process.env.USERDNSDOMAIN.toLowerCase();for(let i of e)if(t===i)return!0;return!1}(c||[]);d&&(n["common.msftInternal"]=d);let h=0;const f=Date.now();Object.defineProperties(n,{timestamp:{get:()=>new Date,enumerable:!0},"common.timesincesessionstart":{get:()=>Date.now()-f,enumerable:!0},"common.sequence":{get:()=>h++,enumerable:!0}}),"linux"===process.platform&&process.env.SNAP&&process.env.SNAP_REVISION&&(n["common.snap"]="true");try{const e=yield o.readFile(l,"utf8");n["common.source"]=e.slice(0,30)}catch(e){}return n})}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveCommonProperties=a}),define(t[166],i([1,0]),function(e,t){
"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.appender=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,{eventName:i,data:n}){return this.appender.log(i,n),Promise.resolve(null)}}t.TelemetryAppenderChannel=i;class n{constructor(e){this.channel=e}log(e,t){return this.channel.call("log",{eventName:e,data:t}).then(void 0,e=>`Failed to log telemetry: ${console.warn(e)}`),Promise.resolve(null)}flush(){return Promise.resolve()}}t.TelemetryAppenderClient=n}),define(t[56],i([1,0,2,13,38,5]),function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.IThemeMainService=a.createDecorator("themeMainService");let c=class{constructor(e){this.stateService=e,n.ipcMain.on("vscode:changeColorTheme",(e,t,i)=>{"string"==typeof i&&this.storeBackgroundColor(JSON.parse(i))})}storeBackgroundColor(e){this.stateService.setItem("theme",e.baseTheme),this.stateService.setItem("themeBackground",e.background)}getBackgroundColor(){
if(i.isWindows&&n.systemPreferences.isInvertedColorScheme())return"#000000";let e=this.stateService.getItem("themeBackground",null);if(!e){let t;e="hc-black"===(t=i.isWindows&&n.systemPreferences.isInvertedColorScheme()?"hc-black":this.stateService.getItem("theme","vs-dark").split(" ")[0])?"#000000":"vs"===t?"#FFFFFF":"#1E1E1E"}return i.isMacintosh&&"#1E1E1E"===e.toUpperCase()&&(e="#171717"),e}};c=s([o(0,r.IStateService)],c),t.ThemeMainService=c}),define(t[168],i([1,0,15,54,11,13,9,7,24,56,3]),function(e,t,i,r,a,c,l,u,d,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let p=class{constructor(e,t,i,n,r,s){this.machineId=e,this.userEnv=t,this.environmentService=i,this.lifecycleService=n,this.logService=r,this.themeMainService=s,this.barrier=new l.Barrier,this.window=null}get _whenReady(){this.window=new c.BrowserWindow({show:!1,backgroundColor:this.themeMainService.getBackgroundColor(),webPreferences:{images:!1,webaudio:!1,webgl:!1,nodeIntegration:!0,disableBlinkFeatures:"Auxclick"}})
;const t=i.assign({appRoot:this.environmentService.appRoot,machineId:this.machineId,nodeCachedDataDir:this.environmentService.nodeCachedDataDir,userEnv:this.userEnv}),n=`${e.toUrl("vs/code/electron-browser/sharedProcess/sharedProcess.html")}?config=${encodeURIComponent(JSON.stringify(t))}`;this.window.loadURL(n);const r=e=>{this.logService.trace("SharedProcess#close prevented"),e.preventDefault(),this.window&&this.window.isVisible()&&this.window.hide()};this.window.on("close",r);const s=new f.DisposableStore;return this.lifecycleService.onWillShutdown(()=>{s.dispose(),this.window&&this.window.removeListener("close",r),setTimeout(()=>{try{this.window&&this.window.close()}catch(e){}this.window=null},0)}),new Promise(e=>{c.ipcMain.once("handshake:hello",({sender:t})=>{t.send("handshake:hey there",{sharedIPCHandle:this.environmentService.sharedIPCHandle,args:this.environmentService.args,logLevel:this.logService.getLevel()}),s.add(f.toDisposable(()=>t.send("handshake:goodbye"))),
c.ipcMain.once("handshake:im ready",()=>e(void 0))})})}spawn(e){this.userEnv=Object.assign({},this.userEnv,e),this.barrier.open()}whenReady(){return n(this,void 0,void 0,function*(){yield this.barrier.wait(),yield this._whenReady})}toggle(){!this.window||this.window.isVisible()?this.hide():this.show()}show(){this.window&&(this.window.show(),this.window.webContents.openDevTools())}hide(){this.window&&(this.window.webContents.closeDevTools(),this.window.hide())}};s([r.memoize],p.prototype,"_whenReady",null),p=s([o(2,a.IEnvironmentService),o(3,d.ILifecycleService),o(4,u.ILogService),o(5,h.IThemeMainService)],p),t.SharedProcess=p}),define(t[43],i([1,0,5]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.Uninitialized="uninitialized",e.Idle="idle",e.CheckingForUpdates="checking for updates",e.AvailableForDownload="available for download",e.Downloading="downloading",e.Downloaded="downloaded",e.Updating="updating",e.Ready="ready"}(t.StateType||(t.StateType={}))
;!function(e){e[e.Setup=0]="Setup",e[e.Archive=1]="Archive",e[e.Snap=2]="Snap"}(t.UpdateType||(t.UpdateType={})),t.State={Uninitialized:{type:"uninitialized"},Idle:(e,t)=>({type:"idle",updateType:e,error:t}),CheckingForUpdates:e=>({type:"checking for updates",context:e}),AvailableForDownload:e=>({type:"available for download",update:e}),Downloading:e=>({type:"downloading",update:e}),Downloaded:e=>({type:"downloaded",update:e}),Updating:e=>({type:"updating",update:e}),Ready:e=>({type:"ready",update:e})},t.IUpdateService=i.createDecorator("updateService")}),define(t[58],i([1,0,4,9,16,24,22,43,11,7,47,34]),function(e,t,i,r,a,c,l,u,d,h,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUpdateURL=function(e,t){return`${l.default.updateUrl}/api/update/${e}/${t}/${l.default.commit}`};let g=class{constructor(e,t,n,r,s){if(this.lifecycleService=e,this.configurationService=t,this.environmentService=n,this.requestService=r,this.logService=s,this._state=u.State.Uninitialized,
this._onStateChange=new i.Emitter,this.onStateChange=this._onStateChange.event,this.environmentService.disableUpdates)return void this.logService.info("update#ctor - updates are disabled by the environment");if(!l.default.updateUrl||!l.default.commit)return void this.logService.info("update#ctor - updates are disabled as there is no update URL");const o=a.getMigratedSettingValue(this.configurationService,"update.mode","update.channel"),c=this.getProductQuality(o);c?(this.url=this.buildUpdateFeedUrl(c),this.url?(this.setState(u.State.Idle(this.getUpdateType())),"manual"!==o?"start"===o?(this.logService.info("update#ctor - startup checks only; automatic updates are disabled by user preference"),
setTimeout(()=>this.checkForUpdates(null),3e4)):this.scheduleCheckForUpdates(3e4).then(void 0,e=>this.logService.error(e)):this.logService.info("update#ctor - manual checks only; automatic updates are disabled by user preference")):this.logService.info("update#ctor - updates are disabled as the update URL is badly formed")):this.logService.info("update#ctor - updates are disabled by user preference")}get state(){return this._state}setState(e){this.logService.info("update#setState",e.type),this._state=e,this._onStateChange.fire(e)}getProductQuality(e){return"none"===e?void 0:l.default.quality}scheduleCheckForUpdates(e=36e5){return r.timeout(e).then(()=>this.checkForUpdates(null)).then(()=>this.scheduleCheckForUpdates(36e5))}checkForUpdates(e){return n(this,void 0,void 0,function*(){this.logService.trace("update#checkForUpdates, state = ",this.state.type),"idle"===this.state.type&&this.doCheckForUpdates(e)})}downloadUpdate(){return n(this,void 0,void 0,function*(){
this.logService.trace("update#downloadUpdate, state = ",this.state.type),"available for download"===this.state.type&&(yield this.doDownloadUpdate(this.state))})}doDownloadUpdate(e){return n(this,void 0,void 0,function*(){})}applyUpdate(){return n(this,void 0,void 0,function*(){this.logService.trace("update#applyUpdate, state = ",this.state.type),"downloaded"===this.state.type&&(yield this.doApplyUpdate())})}doApplyUpdate(){return n(this,void 0,void 0,function*(){})}quitAndInstall(){return this.logService.trace("update#quitAndInstall, state = ",this.state.type),"ready"!==this.state.type?Promise.resolve(void 0):(this.logService.trace("update#quitAndInstall(): before lifecycle quit()"),this.lifecycleService.quit(!0).then(e=>{this.logService.trace(`update#quitAndInstall(): after lifecycle quit() with veto: ${e}`),e||(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.doQuitAndInstall())}),Promise.resolve(void 0))}isLatestVersion(){return this.url?this.requestService.request({
url:this.url},p.CancellationToken.None).then(e=>204===e.res.statusCode):Promise.resolve(void 0)}getUpdateType(){return 1}doQuitAndInstall(){}};g=s([o(0,c.ILifecycleService),o(1,a.IConfigurationService),o(2,d.IEnvironmentService),o(3,f.IRequestService),o(4,h.ILogService)],g),t.AbstractUpdateService=g}),define(t[171],i([1,0,13,3,4,54,16,24,43,28,11,7,58,47]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let m=class extends p.AbstractUpdateService{constructor(e,t,i,n,r,s){super(e,t,n,r,s),this.telemetryService=i,this.disposables=[],this.onRawError(this.onError,this,this.disposables),this.onRawUpdateAvailable(this.onUpdateAvailable,this,this.disposables),this.onRawUpdateDownloaded(this.onUpdateDownloaded,this,this.disposables),this.onRawUpdateNotAvailable(this.onUpdateNotAvailable,this,this.disposables)}get onRawError(){return r.Event.fromNodeEventEmitter(i.autoUpdater,"error",(e,t)=>t)}get onRawUpdateNotAvailable(){
return r.Event.fromNodeEventEmitter(i.autoUpdater,"update-not-available")}get onRawUpdateAvailable(){return r.Event.fromNodeEventEmitter(i.autoUpdater,"update-available",(e,t,i)=>({url:t,version:i,productVersion:i}))}get onRawUpdateDownloaded(){return r.Event.fromNodeEventEmitter(i.autoUpdater,"update-downloaded",(e,t,i,n)=>({releaseNotes:t,version:i,productVersion:i,date:n}))}onError(e){this.logService.error("UpdateService error:",e);const t="checking for updates"!==this.state.type||!!this.state.context?e:void 0;this.setState(u.State.Idle(1,t))}buildUpdateFeedUrl(e){const t=p.createUpdateURL("darwin",e);try{i.autoUpdater.setFeedURL({url:t})}catch(e){return void this.logService.error("Failed to set update feed URL",e)}return t}doCheckForUpdates(e){this.setState(u.State.CheckingForUpdates(e)),i.autoUpdater.checkForUpdates()}onUpdateAvailable(e){"checking for updates"===this.state.type&&this.setState(u.State.Downloading(e))}onUpdateDownloaded(e){
"downloading"===this.state.type&&(this.telemetryService.publicLog2("update:downloaded",{version:e.version}),this.setState(u.State.Ready(e)))}onUpdateNotAvailable(){"checking for updates"===this.state.type&&(this.telemetryService.publicLog2("update:notAvailable",{explicit:!!this.state.context}),this.setState(u.State.Idle(1)))}doQuitAndInstall(){this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),i.autoUpdater.quitAndInstall()}dispose(){this.disposables=n.dispose(this.disposables)}};s([a.memoize],m.prototype,"onRawError",null),s([a.memoize],m.prototype,"onRawUpdateNotAvailable",null),s([a.memoize],m.prototype,"onRawUpdateAvailable",null),s([a.memoize],m.prototype,"onRawUpdateDownloaded",null),m=s([o(0,l.ILifecycleService),o(1,c.IConfigurationService),o(2,d.ITelemetryService),o(3,h.IEnvironmentService),o(4,g.IRequestService),o(5,f.ILogService)],m),t.DarwinUpdateService=m}),define(t[172],i([1,0,22,16,24,43,28,11,7,58,47,13,34]),function(e,t,i,r,a,c,l,u,d,h,f,p,g){"use strict"
;Object.defineProperty(t,"__esModule",{value:!0});let m=class extends h.AbstractUpdateService{constructor(e,t,i,n,r,s){super(e,t,n,r,s),this.telemetryService=i}buildUpdateFeedUrl(e){return h.createUpdateURL(`linux-${process.arch}`,e)}doCheckForUpdates(e){this.url&&(this.setState(c.State.CheckingForUpdates(e)),this.requestService.request({url:this.url},g.CancellationToken.None).then(f.asJson).then(t=>{t&&t.url&&t.version&&t.productVersion?this.setState(c.State.AvailableForDownload(t)):(this.telemetryService.publicLog2("update:notAvailable",{explicit:!!e}),this.setState(c.State.Idle(1)))}).then(void 0,t=>{this.logService.error(t),this.telemetryService.publicLog2("update:notAvailable",{explicit:!!e});const i=e?t.message||t:void 0;this.setState(c.State.Idle(1,i))}))}doDownloadUpdate(e){return n(this,void 0,void 0,function*(){i.default.downloadUrl&&i.default.downloadUrl.length>0?p.shell.openExternal(i.default.downloadUrl):e.update.url&&p.shell.openExternal(e.update.url),this.setState(c.State.Idle(1))})}}
;m=s([o(0,a.ILifecycleService),o(1,r.IConfigurationService),o(2,l.ITelemetryService),o(3,u.IEnvironmentService),o(4,f.IRequestService),o(5,d.ILogService)],m),t.LinuxUpdateService=m}),define(t[173],i([1,0,4,9,24,43,11,7,6,20,37,28]),function(e,t,i,r,a,c,l,u,d,h,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let g=class{constructor(e,t,n){this.lifecycleService=e,this.logService=n,this._state=c.State.Uninitialized,this._onStateChange=new i.Emitter,this.onStateChange=this._onStateChange.event,t.disableUpdates?this.logService.info("update#ctor - updates are disabled"):(this.setState(c.State.Idle(this.getUpdateType())),this.scheduleCheckForUpdates(3e4).then(void 0,e=>this.logService.error(e)))}get state(){return this._state}setState(e){this.logService.info("update#setState",e.type),this._state=e,this._onStateChange.fire(e)}scheduleCheckForUpdates(e=36e5){return r.timeout(e).then(()=>this.checkForUpdates(null)).then(()=>this.scheduleCheckForUpdates(36e5))}checkForUpdates(e){
return n(this,void 0,void 0,function*(){this.logService.trace("update#checkForUpdates, state = ",this.state.type),"idle"===this.state.type&&this.doCheckForUpdates(e)})}downloadUpdate(){return n(this,void 0,void 0,function*(){this.logService.trace("update#downloadUpdate, state = ",this.state.type),"available for download"===this.state.type&&(yield this.doDownloadUpdate(this.state))})}doDownloadUpdate(e){return Promise.resolve(void 0)}applyUpdate(){return n(this,void 0,void 0,function*(){this.logService.trace("update#applyUpdate, state = ",this.state.type),"downloaded"===this.state.type&&(yield this.doApplyUpdate())})}doApplyUpdate(){return Promise.resolve(void 0)}quitAndInstall(){return this.logService.trace("update#quitAndInstall, state = ",this.state.type),"ready"!==this.state.type?Promise.resolve(void 0):(this.logService.trace("update#quitAndInstall(): before lifecycle quit()"),this.lifecycleService.quit(!0).then(e=>{this.logService.trace(`update#quitAndInstall(): after lifecycle quit() with veto: ${e}`),
e||(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.doQuitAndInstall())}),Promise.resolve(void 0))}getUpdateType(){return 2}doQuitAndInstall(){}};g=s([o(0,a.ILifecycleService),o(1,l.IEnvironmentService),o(2,u.ILogService)],g);let m=class extends g{constructor(e,t,n,r,s,o){super(n,r,s),this.snap=e,this.snapRevision=t,this.telemetryService=o;const a=h.watch(d.dirname(this.snap)),c=i.Event.fromNodeEventEmitter(a,"change",(e,t)=>t),l=i.Event.filter(c,e=>"current"===e),u=i.Event.debounce(l,(e,t)=>t,2e3)(this.checkForUpdates,this);n.onWillShutdown(()=>{u.dispose(),a.close()})}doCheckForUpdates(e){this.setState(c.State.CheckingForUpdates(e)),this.isUpdateAvailable().then(t=>{t?this.setState(c.State.Ready({version:"something",productVersion:"something"})):(this.telemetryService.publicLog2("update:notAvailable",{explicit:!!e}),this.setState(c.State.Idle(2)))},t=>{this.logService.error(t),this.telemetryService.publicLog2("update:notAvailable",{explicit:!!e}),
this.setState(c.State.Idle(2,t.message||t))})}doQuitAndInstall(){this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),f.spawn("sleep 3 && "+d.basename(process.argv[0]),{shell:!0,detached:!0,stdio:"ignore"})}isUpdateAvailable(){return n(this,void 0,void 0,function*(){const e=yield new Promise((e,t)=>h.realpath(`${d.dirname(this.snap)}/current`,(i,n)=>i?t(i):e(n))),t=d.basename(e);return this.snapRevision!==t})}isLatestVersion(){return this.isUpdateAvailable().then(void 0,e=>{this.logService.error("update#checkForSnapUpdate(): Could not get realpath of application.")})}};m=s([o(2,a.ILifecycleService),o(3,l.IEnvironmentService),o(4,u.ILogService),o(5,p.ITelemetryService)],m),t.SnapUpdateService=m}),define(t[174],i([1,0,20,6,17,54,16,24,22,43,28,11,7,58,47,115,33,37,13,34,9,30,8]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,E,C,k){"use strict";function I(){return void 0===P&&(P=i.existsSync(r.join(r.dirname(process.execPath),"unins000.exe"))?0:1),P}
Object.defineProperty(t,"__esModule",{value:!0});let P=void 0,M=class extends m.AbstractUpdateService{constructor(e,t,i,n,r,s,o){super(e,t,n,r,s),this.telemetryService=i,this.fileService=o,0===I()&&i.publicLog("update:win32SetupTarget",{target:d.default.target})}get cachePath(){const e=r.join(y.tmpdir(),`vscode-update-${d.default.target}-${process.arch}`);return a.mkdirp(e,void 0).then(()=>e)}buildUpdateFeedUrl(e){let t="win32";return"x64"===process.arch&&(t+="-x64"),1===I()?t+="-archive":"user"===d.default.target&&(t+="-user"),m.createUpdateURL(t,e)}doCheckForUpdates(e){this.url&&(this.setState(h.State.CheckingForUpdates(e)),this.requestService.request({url:this.url},_.CancellationToken.None).then(v.asJson).then(t=>{const i=I();return t&&t.url&&t.version&&t.productVersion?1===i?(this.setState(h.State.AvailableForDownload(t)),Promise.resolve(null)):(this.setState(h.State.Downloading(t)),this.cleanup(t.version).then(()=>this.getUpdatePackagePath(t.version).then(e=>a.exists(e).then(i=>{
if(i)return Promise.resolve(e);const n=t.url,r=t.hash,s=`${e}.tmp`;return this.requestService.request({url:n},_.CancellationToken.None).then(e=>this.fileService.writeFile(k.URI.file(s),e.stream)).then(r?()=>w.checksum(s,t.hash):()=>void 0).then(()=>a.rename(s,e)).then(()=>e)})).then(e=>{const i=this.configurationService.getValue("update.enableWindowsBackgroundUpdates");this.availableUpdate={packagePath:e},i&&t.supportsFastUpdate?"user"===d.default.target?this.doApplyUpdate():this.setState(h.State.Downloaded(t)):this.setState(h.State.Ready(t))}))):(this.telemetryService.publicLog2("update:notAvailable",{explicit:!!e}),this.setState(h.State.Idle(i)),Promise.resolve(null))}).then(void 0,t=>{this.logService.error(t),this.telemetryService.publicLog2("update:notAvailable",{explicit:!!e});const i=e?t.message||t:void 0;this.setState(h.State.Idle(I(),i))}))}doDownloadUpdate(e){return n(this,void 0,void 0,function*(){e.update.url&&b.shell.openExternal(e.update.url),this.setState(h.State.Idle(I()))})}
getUpdatePackagePath(e){return n(this,void 0,void 0,function*(){const t=yield this.cachePath;return r.join(t,`CodeSetup-${d.default.quality}-${e}.exe`)})}cleanup(e=null){return n(this,void 0,void 0,function*(){const t=e?t=>!new RegExp(`${d.default.quality}-${e}\\.exe$`).test(t):()=>!0,i=yield this.cachePath,s=(yield a.readdir(i)).filter(t).map(e=>n(this,void 0,void 0,function*(){try{yield a.unlink(r.join(i,e))}catch(e){}}));yield Promise.all(s)})}doApplyUpdate(){return n(this,void 0,void 0,function*(){if("downloaded"!==this.state.type&&"downloading"!==this.state.type)return Promise.resolve(void 0);if(!this.availableUpdate)return Promise.resolve(void 0);const t=this.state.update;this.setState(h.State.Updating(t));const i=yield this.cachePath;this.availableUpdate.updateFilePath=r.join(i,`CodeSetup-${d.default.quality}-${t.version}.flag`),yield a.writeFile(this.availableUpdate.updateFilePath,"flag")
;S.spawn(this.availableUpdate.packagePath,["/verysilent",`/update="${this.availableUpdate.updateFilePath}"`,"/nocloseapplications","/mergetasks=runcode,!desktopicon,!quicklaunchicon"],{detached:!0,stdio:["ignore","ignore","ignore"],windowsVerbatimArguments:!0}).once("exit",()=>{this.availableUpdate=void 0,this.setState(h.State.Idle(I()))});const s=`${d.default.win32MutexName}-ready`,o=yield new Promise((t,i)=>{e(["windows-mutex"],t,i)});(function(e,t=1e3){return n(this,void 0,void 0,function*(){for(;!e();)yield E.timeout(t)})})(()=>o.isActive(s)).then(()=>this.setState(h.State.Ready(t)))})}doQuitAndInstall(){"ready"===this.state.type&&this.availableUpdate&&(this.logService.trace("update#quitAndInstall(): running raw#quitAndInstall()"),this.state.update.supportsFastUpdate&&this.availableUpdate.updateFilePath?i.unlinkSync(this.availableUpdate.updateFilePath):S.spawn(this.availableUpdate.packagePath,["/silent","/mergetasks=runcode,!desktopicon,!quicklaunchicon"],{detached:!0,stdio:["ignore","ignore","ignore"]}))
}getUpdateType(){return I()}};s([c.memoize],M.prototype,"cachePath",null),M=s([o(0,u.ILifecycleService),o(1,l.IConfigurationService),o(2,f.ITelemetryService),o(3,p.IEnvironmentService),o(4,v.IRequestService),o(5,g.ILogService),o(6,C.IFileService)],M),t.Win32UpdateService=M}),define(t[175],i([1,0,35,46,96,2]),function(e,t,i,n,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i.Registry.as(n.Extensions.Configuration).registerConfiguration({id:"update",order:15,title:r.localize(0,null),type:"object",properties:{"update.mode":{type:"string",enum:["none","manual","start","default"],default:"default",scope:1,description:r.localize(1,null),tags:["usesOnlineServices"],enumDescriptions:[r.localize(2,null),r.localize(3,null),r.localize(4,null),r.localize(5,null)]},"update.channel":{type:"string",default:"default",scope:1,description:r.localize(6,null),deprecationMessage:r.localize(7,null,"update.mode")},"update.enableWindowsBackgroundUpdates":{type:"boolean",default:!0,scope:1,title:r.localize(8,null),
description:r.localize(9,null),included:s.isWindows},"update.showReleaseNotes":{type:"boolean",default:!0,scope:1,description:r.localize(10,null),tags:["usesOnlineServices"]}}})}),define(t[176],i([1,0]),function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.service=e}listen(e,t){switch(t){case"onStateChange":return this.service.onStateChange}throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"checkForUpdates":return this.service.checkForUpdates(i);case"downloadUpdate":return this.service.downloadUpdate();case"applyUpdate":return this.service.applyUpdate();case"quitAndInstall":return this.service.quitAndInstall();case"_getInitialState":return Promise.resolve(this.service.state);case"isLatestVersion":return this.service.isLatestVersion()}throw new Error(`Call not found: ${t}`)}}t.UpdateChannel=i}),define(t[53],i([1,0,5]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IURLService=i.createDecorator("urlService")}),
define(t[178],i([1,0,27,9,3]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s extends r.Disposable{constructor(){super(...arguments),this.handlers=new Set}open(e){const t=i.values(this.handlers);return n.first(t.map(t=>()=>t.handleURL(e)),void 0,!1).then(e=>e||!1)}registerHandler(e){return this.handlers.add(e),r.toDisposable(()=>this.handlers.delete(e))}}t.AbstractURLService=s}),define(t[179],i([1,0,8]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"open":return this.service.open(i.URI.revive(n))}throw new Error(`Call not found: ${t}`)}}t.URLServiceChannel=n;class r{constructor(e){this.channel=e}open(e){return this.channel.call("open",e.toJSON())}registerHandler(e){throw new Error("Not implemented.")}create(e){throw new Error("Method not implemented.")}}t.URLServiceChannelClient=r;class s{constructor(e){this.handler=e}
listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"handleURL":return this.handler.handleURL(i.URI.revive(n))}throw new Error(`Call not found: ${t}`)}}t.URLHandlerChannel=s;class o{constructor(e){this.channel=e}handleURL(e){return this.channel.call("handleURL",e.toJSON())}}t.URLHandlerChannelClient=o}),define(t[180],i([1,0,8,22,178]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s extends r.AbstractURLService{create(e){const{authority:t,path:r,query:s,fragment:o}=e||{authority:void 0,path:void 0,query:void 0,fragment:void 0};return i.URI.from({scheme:n.default.urlProtocol,authority:t,path:r,query:s,fragment:o})}}t.URLService=s}),define(t[48],i([1,0,5,4,2,3,9]),function(e,t,i,r,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWindowsService=i.createDecorator("windowsService"),t.IWindowService=i.createDecorator("windowService"),t.isWorkspaceToOpen=function(e){return!!e.workspaceUri},t.isFolderToOpen=function(e){
return!!e.folderUri},t.isFileToOpen=function(e){return!!e.fileUri},t.getTitleBarStyle=function(e,t,i=t.isExtensionDevelopment){if(a.isWeb)return"custom";const n=e.getValue("window"),r=!t.isBuilt||i;if(a.isMacintosh&&r)return"native";if(n){if(a.isMacintosh&&!0===n.nativeTabs)return"native";if(a.isMacintosh&&!1===n.nativeFullScreen)return"native";const e=n.titleBarStyle;if("native"===e||"custom"===e)return e}return a.isLinux?"native":"custom"};!function(e){e[e.CLI=0]="CLI",e[e.DOCK=1]="DOCK",e[e.MENU=2]="MENU",e[e.DIALOG=3]="DIALOG",e[e.DESKTOP=4]="DESKTOP",e[e.API=5]="API"}(t.OpenContext||(t.OpenContext={}));!function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.NAVIGATING=2]="NAVIGATING",e[e.READY=3]="READY"}(t.ReadyState||(t.ReadyState={}));let u=class extends c.Disposable{constructor(e){super(),this.disposables=this._register(new c.DisposableStore);r.Event.latch(r.Event.any(e.onWindowOpen,e.onWindowFocus))(this.setActiveWindow,this,this.disposables),
this.firstActiveWindowIdPromise=l.createCancelablePromise(t=>e.getActiveWindowId()),this.firstActiveWindowIdPromise.then(e=>this.activeWindowId="number"==typeof this.activeWindowId?this.activeWindowId:e).finally(this.firstActiveWindowIdPromise=void 0)}setActiveWindow(e){this.firstActiveWindowIdPromise&&(this.firstActiveWindowIdPromise.cancel(),this.firstActiveWindowIdPromise=void 0),this.activeWindowId=e}getActiveClientId(){return n(this,void 0,void 0,function*(){return`window:${this.firstActiveWindowIdPromise?yield this.firstActiveWindowIdPromise:this.activeWindowId}`})}};u=s([o(0,t.IWindowsService)],u),t.ActiveWindowManager=u}),define(t[41],i([1,0,5]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Maximized=0]="Maximized",e[e.Normal=1]="Normal",e[e.Minimized=2]="Minimized",e[e.Fullscreen=3]="Fullscreen"}(t.WindowMode||(t.WindowMode={})),t.IWindowsMainService=i.createDecorator("windowsMainService")}),define(t[183],i([1,0,196,3,41,4,13]),function(e,t,i,n,r,a,c){
"use strict";Object.defineProperty(t,"__esModule",{value:!0});let l=class{constructor(e){this.windowsMainService=e,this.retryCount=0,this.disposables=[];a.Event.fromNodeEventEmitter(c.app,"login",(e,t,i,n,r)=>({event:e,webContents:t,req:i,authInfo:n,cb:r}))(this.onLogin,this,this.disposables)}onLogin({event:t,authInfo:n,cb:r}){if(!n.isProxy)return;if(this.retryCount++>1)return;t.preventDefault();const s={alwaysOnTop:!0,skipTaskbar:!0,resizable:!1,width:450,height:220,show:!0,title:"VS Code",webPreferences:{nodeIntegration:!0,webviewTag:!0}},o=this.windowsMainService.getFocusedWindow();o&&(s.parent=o.win,s.modal=!0);const a=new c.BrowserWindow(s),l=`${e.toUrl("vs/code/electron-browser/proxy/auth.html")}?config=${encodeURIComponent(JSON.stringify({}))}`,u=`${n.host}:${n.port}`,d={title:i.localize(0,null),message:i.localize(1,null,u)},h="promptForCredentials("+JSON.stringify(d)+")",f=()=>r("","");a.on("close",f),a.setMenu(null),a.loadURL(l),a.webContents.executeJavaScript(h,!0).then(({username:e,password:t})=>{
r(e,t),a.removeListener("close",f),a.close()})}dispose(){this.disposables=n.dispose(this.disposables)}};l=s([o(0,r.IWindowsMainService)],l),t.ProxyAuthHandler=l}),define(t[184],i([1,0,102,41,51,3,36,52,128,2,4,66,114,9]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let v=class{constructor(e,t,i){this.windowServer=e,this.options=t,this.windowsService=i,this.registeredWindowIds=new Set,this.reloadingWindowIds=new Set,this.onDidReloadingChange=new f.Emitter}registerWindowDriver(e){return n(this,void 0,void 0,function*(){return this.registeredWindowIds.add(e),this.reloadingWindowIds.delete(e),this.onDidReloadingChange.fire(),this.options})}reloadWindowDriver(e){return n(this,void 0,void 0,function*(){this.reloadingWindowIds.add(e)})}getWindowIds(){return n(this,void 0,void 0,function*(){return this.windowsService.getWindows().map(e=>e.id).filter(e=>this.registeredWindowIds.has(e)&&!this.reloadingWindowIds.has(e))})}capturePage(e){
return n(this,void 0,void 0,function*(){yield this.whenUnfrozen(e);const t=this.windowsService.getWindowById(e);if(!t)throw new Error("Invalid window");const i=t.win.webContents;return(yield new Promise(e=>i.capturePage(e))).toPNG().toString("base64")})}reloadWindow(e){return n(this,void 0,void 0,function*(){yield this.whenUnfrozen(e);const t=this.windowsService.getWindowById(e);if(!t)throw new Error("Invalid window");this.reloadingWindowIds.add(e),this.windowsService.reload(t)})}exitApplication(){return n(this,void 0,void 0,function*(){return this.windowsService.quit()})}dispatchKeybinding(e,t){return n(this,void 0,void 0,function*(){yield this.whenUnfrozen(e);const i=g.KeybindingParser.parseUserBinding(t);for(let t of i)yield this._dispatchKeybinding(e,t)})}_dispatchKeybinding(e,t){return n(this,void 0,void 0,function*(){if(t instanceof p.ScanCodeBinding)throw new Error("ScanCodeBindings not supported");const i=this.windowsService.getWindowById(e);if(!i)throw new Error("Invalid window")
;const n=i.win.webContents,r=new u.SimpleKeybinding(!1,!1,!1,!1,t.keyCode),s=new d.USLayoutResolvedKeybinding(r.toChord(),h.OS).getElectronAccelerator(),o=[];t.ctrlKey&&o.push("ctrl"),t.metaKey&&o.push("meta"),t.shiftKey&&o.push("shift"),t.altKey&&o.push("alt"),n.sendInputEvent({type:"keyDown",keyCode:s,modifiers:o}),function(e){return e<21}(t.keyCode)||n.sendInputEvent({type:"char",keyCode:s,modifiers:o}),n.sendInputEvent({type:"keyUp",keyCode:s,modifiers:o}),yield m.timeout(100)})}click(e,t,i,r){return n(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).click(t,i,r)})}doubleClick(e,t){return n(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).doubleClick(t)})}setValue(e,t,i){return n(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).setValue(t,i)})}getTitle(e){return n(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).getTitle()})}isActiveElement(e,t){return n(this,void 0,void 0,function*(){
return yield(yield this.getWindowDriver(e)).isActiveElement(t)})}getElements(e,t,i){return n(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).getElements(t,i)})}getElementXY(e,t,i,r){return n(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).getElementXY(t,i,r)})}typeInEditor(e,t,i){return n(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).typeInEditor(t,i)})}getTerminalBuffer(e,t){return n(this,void 0,void 0,function*(){return yield(yield this.getWindowDriver(e)).getTerminalBuffer(t)})}writeInTerminal(e,t,i){return n(this,void 0,void 0,function*(){yield(yield this.getWindowDriver(e)).writeInTerminal(t,i)})}getWindowDriver(e){return n(this,void 0,void 0,function*(){yield this.whenUnfrozen(e);const t=`window:${e}`,n=new l.StaticRouter(e=>e===t),r=this.windowServer.getChannel("windowDriver",n);return new i.WindowDriverChannelClient(r)})}whenUnfrozen(e){return n(this,void 0,void 0,function*(){
for(;this.reloadingWindowIds.has(e);)yield f.Event.toPromise(this.onDidReloadingChange.event)})}};v=s([o(2,r.IWindowsMainService)],v),t.Driver=v,t.serve=function(e,t,r,s){return n(this,void 0,void 0,function*(){const n=r.driverVerbose,o=s.createInstance(v,e,{verbose:n}),l=new i.WindowDriverRegistryChannel(o);e.registerChannel("windowDriverRegistry",l);const u=yield a.serve(t),d=new i.DriverChannel(o);return u.registerChannel("driver",d),c.combinedDisposable(u,e)})}}),define(t[185],i([1,0,93,2,11,13,48,16,28,43,22,9,5,45,41,44,78,8,38,24]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b){"use strict";function _(){return new a.MenuItem({type:"separator"})}Object.defineProperty(t,"__esModule",{value:!0});let E=class e{constructor(e,t,i,r,s,o,a,l,u){this.updateService=e,this.configurationService=i,this.windowsMainService=r,this.environmentService=s,this.telemetryService=o,this.historyMainService=a,this.stateService=l,this.lifecycleService=u,this.fallbackMenuHandlers={},
this.menuUpdater=new f.RunOnceScheduler(()=>this.doUpdateMenu(),0),this.menuGC=new f.RunOnceScheduler(()=>{this.oldMenus=[]},1e4),this.menubarMenus=Object.create(null),this.keybindings=Object.create(null),(n.isMacintosh||"native"===c.getTitleBarStyle(this.configurationService,this.environmentService))&&this.restoreCachedMenubarData(),this.addFallbackHandlers(),this.closedLastWindow=!1,this.oldMenus=[],this.install(),this.registerListeners()}restoreCachedMenubarData(){const t=this.stateService.getItem(e.lastKnownMenubarStorageKey);t&&(t.menus&&(this.menubarMenus=t.menus),t.keybindings&&(this.keybindings=t.keybindings))}addFallbackHandlers(){this.fallbackMenuHandlers["workbench.action.files.newUntitledFile"]=(()=>this.windowsMainService.openNewWindow(2)),this.fallbackMenuHandlers["workbench.action.newWindow"]=(()=>this.windowsMainService.openNewWindow(2)),this.fallbackMenuHandlers["workbench.action.files.openFileFolder"]=((e,t,i)=>this.windowsMainService.pickFileFolderAndOpen({
forceNewWindow:this.isOptionClick(i),telemetryExtraData:{from:"menu"}})),this.fallbackMenuHandlers["workbench.action.openWorkspace"]=((e,t,i)=>this.windowsMainService.pickWorkspaceAndOpen({forceNewWindow:this.isOptionClick(i),telemetryExtraData:{from:"menu"}})),this.fallbackMenuHandlers["workbench.action.clearRecentFiles"]=(()=>this.historyMainService.clearRecentlyOpened()),h.default.twitterUrl&&(this.fallbackMenuHandlers["workbench.action.openTwitterUrl"]=(()=>this.openUrl(h.default.twitterUrl,"openTwitterUrl"))),h.default.requestFeatureUrl&&(this.fallbackMenuHandlers["workbench.action.openRequestFeatureUrl"]=(()=>this.openUrl(h.default.requestFeatureUrl,"openUserVoiceUrl"))),h.default.reportIssueUrl&&(this.fallbackMenuHandlers["workbench.action.openIssueReporter"]=(()=>this.openUrl(h.default.reportIssueUrl,"openReportIssues"))),h.default.licenseUrl&&(this.fallbackMenuHandlers["workbench.action.openLicenseUrl"]=(()=>{if(n.language){const e=h.default.licenseUrl.indexOf("?")>0?"&":"?"
;this.openUrl(`${h.default.licenseUrl}${e}lang=${n.language}`,"openLicenseUrl")}else this.openUrl(h.default.licenseUrl,"openLicenseUrl")})),h.default.privacyStatementUrl&&(this.fallbackMenuHandlers["workbench.action.openPrivacyStatementUrl"]=(()=>{if(n.language){const e=h.default.licenseUrl.indexOf("?")>0?"&":"?";this.openUrl(`${h.default.privacyStatementUrl}${e}lang=${n.language}`,"openPrivacyStatement")}else this.openUrl(h.default.privacyStatementUrl,"openPrivacyStatement")}))}registerListeners(){this.lifecycleService.onWillShutdown(()=>this.willShutdown=!0),this.windowsMainService.onWindowsCountChanged(e=>this.onWindowsCountChanged(e))}get currentEnableMenuBarMnemonics(){let e=this.configurationService.getValue("window.enableMenuBarMnemonics");return"boolean"!=typeof e&&(e=!0),e}get currentEnableNativeTabs(){if(!n.isMacintosh)return!1;let e=this.configurationService.getValue("window.nativeTabs");return"boolean"!=typeof e&&(e=!1),e}updateMenu(t,i){this.menubarMenus=t.menus,this.keybindings=t.keybindings,
this.stateService.setItem(e.lastKnownMenubarStorageKey,t),this.scheduleUpdateMenu()}scheduleUpdateMenu(){this.menuUpdater.schedule()}doUpdateMenu(){this.willShutdown||setTimeout(()=>{this.willShutdown||this.install()},10)}onWindowsCountChanged(e){n.isMacintosh&&(0===e.oldCount&&e.newCount>0||e.oldCount>0&&0===e.newCount)&&(this.closedLastWindow=0===e.newCount,this.scheduleUpdateMenu())}install(){const e=a.Menu.getApplicationMenu();if(e&&this.oldMenus.push(e),0===Object.keys(this.menubarMenus).length)return void a.Menu.setApplicationMenu(n.isMacintosh?new a.Menu:null);const t=new a.Menu;let r;if(n.isMacintosh){const e=new a.Menu;r=new a.MenuItem({label:h.default.nameShort,submenu:e}),this.setMacApplicationMenu(e),t.append(r)}if(n.isMacintosh&&!this.appMenuInstalled){this.appMenuInstalled=!0;const e=new a.Menu;e.append(new a.MenuItem({label:this.mnemonicLabel(i.localize(0,null)),click:()=>this.windowsMainService.openNewWindow(1)})),a.app.dock.setMenu(e)}const s=new a.Menu,o=new a.MenuItem({
label:this.mnemonicLabel(i.localize(1,null)),submenu:s});this.setMenuById(s,"File"),t.append(o);const c=new a.Menu,l=new a.MenuItem({label:this.mnemonicLabel(i.localize(2,null)),submenu:c});this.setMenuById(c,"Edit"),t.append(l);const u=new a.Menu,d=new a.MenuItem({label:this.mnemonicLabel(i.localize(3,null)),submenu:u});this.setMenuById(u,"Selection"),t.append(d);const f=new a.Menu,p=new a.MenuItem({label:this.mnemonicLabel(i.localize(4,null)),submenu:f});this.setMenuById(f,"View"),t.append(p);const g=new a.Menu,m=new a.MenuItem({label:this.mnemonicLabel(i.localize(5,null)),submenu:g});this.setMenuById(g,"Go"),t.append(m);const v=new a.Menu,w=new a.MenuItem({label:this.mnemonicLabel(i.localize(6,null)),submenu:v});this.setMenuById(v,"Debug"),t.append(w);const y=new a.Menu,S=new a.MenuItem({label:this.mnemonicLabel(i.localize(7,null)),submenu:y});this.setMenuById(y,"Terminal"),t.append(S);let b;if(this.shouldDrawMenu("Window")){const e=new a.Menu;b=new a.MenuItem({label:this.mnemonicLabel(i.localize(8,null)),
submenu:e,role:"window"}),this.setMacWindowMenu(e)}b&&t.append(b);const _=new a.Menu,E=new a.MenuItem({label:this.mnemonicLabel(i.localize(9,null)),submenu:_,role:"help"});this.setMenuById(_,"Help"),t.append(E),t.items&&t.items.length>0?a.Menu.setApplicationMenu(t):a.Menu.setApplicationMenu(null),this.menuGC.schedule()}setMacApplicationMenu(e){const t=this.createMenuItem(i.localize(10,null,h.default.nameLong),"workbench.action.showAboutDialog"),n=this.getUpdateMenuItems();let r;if(this.shouldDrawMenu("Preferences")){const e=new a.Menu;this.setMenuById(e,"Preferences"),r=new a.MenuItem({label:this.mnemonicLabel(i.localize(11,null)),submenu:e})}const s=new a.Menu,o=new a.MenuItem({label:i.localize(12,null),role:"services",submenu:s}),c=new a.MenuItem({label:i.localize(13,null,h.default.nameLong),role:"hide",accelerator:"Command+H"}),l=new a.MenuItem({label:i.localize(14,null),role:"hideothers",accelerator:"Command+Alt+H"}),u=new a.MenuItem({label:i.localize(15,null),role:"unhide"
}),d=new a.MenuItem(this.likeAction("workbench.action.quit",{label:i.localize(16,null,h.default.nameLong),click:()=>{(0===this.windowsMainService.getWindowCount()||this.windowsMainService.getFocusedWindow()||this.windowsMainService.getLastActiveWindow().isMinimized())&&this.windowsMainService.quit()}})),f=[t];f.push(...n),r&&f.push(...[_(),r]),f.push(...[_(),o,_(),c,l,u,_(),d]),f.forEach(t=>e.append(t))}shouldDrawMenu(e){if(!n.isMacintosh&&"custom"===c.getTitleBarStyle(this.configurationService,this.environmentService))return!1;switch(e){case"File":case"Help":if(n.isMacintosh)return 0===this.windowsMainService.getWindowCount()&&this.closedLastWindow||!!this.menubarMenus&&!!this.menubarMenus[e];case"Window":if(n.isMacintosh)return 0===this.windowsMainService.getWindowCount()&&this.closedLastWindow||!!this.menubarMenus;default:return this.windowsMainService.getWindowCount()>0&&!!this.menubarMenus&&!!this.menubarMenus[e]}}setMenu(e,t){t.forEach(t=>{
if(w.isMenubarMenuItemSeparator(t))e.append(_());else if(w.isMenubarMenuItemSubmenu(t)){const i=new a.Menu,n=new a.MenuItem({label:this.mnemonicLabel(t.label),submenu:i});this.setMenu(i,t.submenu.items),e.append(n)}else w.isMenubarMenuItemUriAction(t)?e.append(this.createOpenRecentMenuItem(t.uri,t.label,t.id)):w.isMenubarMenuItemAction(t)&&("workbench.action.showAboutDialog"===t.id&&this.insertCheckForUpdatesItems(e),n.isMacintosh&&0===this.windowsMainService.getWindowCount()&&this.closedLastWindow?this.fallbackMenuHandlers[t.id]?e.append(new a.MenuItem(this.likeAction(t.id,{label:this.mnemonicLabel(t.label),click:this.fallbackMenuHandlers[t.id]}))):e.append(this.createMenuItem(t.label,t.id,!1,t.checked)):e.append(this.createMenuItem(t.label,t.id,!1!==t.enabled,!!t.checked)))})}setMenuById(e,t){this.menubarMenus&&this.menubarMenus[t]&&this.setMenu(e,this.menubarMenus[t].items)}insertCheckForUpdatesItems(e){const t=this.getUpdateMenuItems();t.length&&(t.forEach(t=>e.append(t)),e.append(_()))}
createOpenRecentMenuItem(e,t,i){const n=y.URI.revive(e),r="openRecentFile"===i?{fileUri:n}:"openRecentWorkspace"===i?{workspaceUri:n}:{folderUri:n};return new a.MenuItem(this.likeAction(i,{label:t,click:(e,t,i)=>{const s=this.isOptionClick(i);this.windowsMainService.open({context:2,cli:this.environmentService.args,urisToOpen:[r],forceNewWindow:s,gotoLineMode:!1}).length>0||this.historyMainService.removeFromRecentlyOpened([n])}},!1))}isOptionClick(e){return!(!e||!(!n.isMacintosh&&(e.ctrlKey||e.shiftKey)||n.isMacintosh&&(e.metaKey||e.altKey)))}createRoleMenuItem(e,t,i){const n={label:this.mnemonicLabel(e),role:i,enabled:!0};return new a.MenuItem(this.withKeybinding(t,n))}setMacWindowMenu(e){const t=new a.MenuItem({label:i.localize(17,null),role:"minimize",accelerator:"Command+M",enabled:this.windowsMainService.getWindowCount()>0}),n=new a.MenuItem({label:i.localize(18,null),role:"zoom",enabled:this.windowsMainService.getWindowCount()>0}),r=new a.MenuItem({label:i.localize(19,null),role:"front",
enabled:this.windowsMainService.getWindowCount()>0}),s=this.createMenuItem(i.localize(20,null),"workbench.action.switchWindow"),o=[];this.currentEnableNativeTabs&&(o.push(_()),o.push(this.createMenuItem(i.localize(21,null),"workbench.action.newWindowTab")),o.push(this.createRoleMenuItem(i.localize(22,null),"workbench.action.showPreviousWindowTab","selectPreviousTab")),o.push(this.createRoleMenuItem(i.localize(23,null),"workbench.action.showNextWindowTab","selectNextTab")),o.push(this.createRoleMenuItem(i.localize(24,null),"workbench.action.moveWindowTabToNewWindow","moveTabToNewWindow")),o.push(this.createRoleMenuItem(i.localize(25,null),"workbench.action.mergeAllWindowTabs","mergeAllWindows"))),[t,n,s,...o,_(),r].forEach(t=>e.append(t))}getUpdateMenuItems(){switch(this.updateService.state.type){case"uninitialized":return[];case"idle":return[new a.MenuItem({label:this.mnemonicLabel(i.localize(26,null)),click:()=>setTimeout(()=>{this.reportMenuActionTelemetry("CheckForUpdate")
;const e=this.windowsMainService.getFocusedWindow(),t=e?{windowId:e.id}:null;this.updateService.checkForUpdates(t)},0)})];case"checking for updates":return[new a.MenuItem({label:i.localize(27,null),enabled:!1})];case"available for download":return[new a.MenuItem({label:this.mnemonicLabel(i.localize(28,null)),click:()=>{this.updateService.downloadUpdate()}})];case"downloading":return[new a.MenuItem({label:i.localize(29,null),enabled:!1})];case"downloaded":return[new a.MenuItem({label:this.mnemonicLabel(i.localize(30,null)),click:()=>{this.reportMenuActionTelemetry("InstallUpdate"),this.updateService.applyUpdate()}})];case"updating":return[new a.MenuItem({label:i.localize(31,null),enabled:!1})];case"ready":return[new a.MenuItem({label:this.mnemonicLabel(i.localize(32,null)),click:()=>{this.reportMenuActionTelemetry("RestartToUpdate"),this.updateService.quitAndInstall()}})]}}static _menuItemIsTriggeredViaKeybinding(e,t){if(!t)return!1
;let i=/ctrl/.test(t),n=/shift/.test(t),r=/alt/.test(t),s=/cmd/.test(t)||/super/.test(t);return!!(i||n||r||s)&&(i===e.ctrlKey&&n===e.shiftKey&&r===e.altKey&&s===e.metaKey)}createMenuItem(t,i,r,s){const o=this.mnemonicLabel(t),c="function"==typeof i?i:(t,n,r)=>{const s=t?t.userSettingsLabel:null;let o=i;Array.isArray(i)&&(o=this.isOptionClick(r)?i[1]:i[0]),s&&e._menuItemIsTriggeredViaKeybinding(r,s)?this.runActionInRenderer({type:"keybinding",userSettingsLabel:s}):this.runActionInRenderer({type:"commandId",commandId:o})},l="boolean"==typeof r?r:this.windowsMainService.getWindowCount()>0,u="boolean"==typeof s&&s,d={label:o,click:c,enabled:l};u&&(d.type="checkbox",d.checked=u);let h;return"string"==typeof i?h=i:Array.isArray(i)&&(h=i[0]),n.isMacintosh&&("editor.action.clipboardCutAction"===h?d.role="cut":"editor.action.clipboardCopyAction"===h?d.role="copy":"editor.action.clipboardPasteAction"===h&&(d.role="paste"),"undo"===h?d.click=this.makeContextAwareClickHandler(c,{inDevTools:e=>e.undo(),
inNoWindow:()=>a.Menu.sendActionToFirstResponder("undo:")}):"redo"===h?d.click=this.makeContextAwareClickHandler(c,{inDevTools:e=>e.redo(),inNoWindow:()=>a.Menu.sendActionToFirstResponder("redo:")}):"editor.action.selectAll"===h&&(d.click=this.makeContextAwareClickHandler(c,{inDevTools:e=>e.selectAll(),inNoWindow:()=>a.Menu.sendActionToFirstResponder("selectAll:")}))),new a.MenuItem(this.withKeybinding(h,d))}makeContextAwareClickHandler(e,t){return()=>{const i=this.windowsMainService.getFocusedWindow();return i?i.win.webContents.isDevToolsFocused()?t.inDevTools(i.win.webContents.devToolsWebContents):void e():t.inNoWindow()}}runActionInRenderer(e){let t=this.windowsMainService.getFocusedWindow();if(!t){const e=this.windowsMainService.getLastActiveWindow();e&&e.isMinimized()&&(t=e)}if(t){if(n.isMacintosh&&!this.environmentService.isBuilt&&!t.isReady&&("commandId"===e.type&&"workbench.action.toggleDevTools"===e.commandId||"commandId"!==e.type&&"alt+cmd+i"===e.userSettingsLabel))return
;"commandId"===e.type?this.windowsMainService.sendToFocused("vscode:runAction",{id:e.commandId,from:"menu"}):this.windowsMainService.sendToFocused("vscode:runKeybinding",{userSettingsLabel:e.userSettingsLabel})}}withKeybinding(e,t){const i="string"==typeof e?this.keybindings[e]:void 0;if(i&&i.label){if(!1!==i.isNative)t.accelerator=i.label,t.userSettingsLabel=i.userSettingsLabel;else if("string"==typeof t.label){const e=t.label.indexOf("[");t.label=e>=0?`${t.label.substr(0,e)} [${i.label}]`:`${t.label} [${i.label}]`}}else t.accelerator=void 0;return t}likeAction(e,t,i=!t.accelerator){i&&(t=this.withKeybinding(e,t));const n=t.click;return t.click=((t,i,r)=>{this.reportMenuActionTelemetry(e),n&&n(t,i,r)}),t}openUrl(e,t){a.shell.openExternal(e),this.reportMenuActionTelemetry(t)}reportMenuActionTelemetry(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e,from:"menu"})}mnemonicLabel(e){return g.mnemonicMenuLabel(e,!this.currentEnableMenuBarMnemonics)}}
;E.lastKnownMenubarStorageKey="lastKnownMenubarData",E=s([o(0,d.IUpdateService),o(1,p.IInstantiationService),o(2,l.IConfigurationService),o(3,m.IWindowsMainService),o(4,r.IEnvironmentService),o(5,u.ITelemetryService),o(6,v.IHistoryMainService),o(7,S.IStateService),o(8,b.ILifecycleService)],E),t.Menubar=E}),define(t[186],i([1,0,185,7,5]),function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let a=class{constructor(e,t){this.instantiationService=e,this.logService=t,this._menubar=this.instantiationService.createInstance(i.Menubar)}updateMenubar(e,t){return this.logService.trace("menubarService#updateMenubar",e),this._menubar&&this._menubar.updateMenu(t,e),Promise.resolve(void 0)}};a=s([o(0,r.IInstantiationService),o(1,n.ILogService)],a),t.MenubarService=a}),define(t[187],i([1,0,4,53,22,13,8,3,41,2,25]),function(e,t,i,n,r,a,c,l,u,d,h){"use strict";function f(e){try{return c.URI.parse(e)}catch(e){return null}}Object.defineProperty(t,"__esModule",{value:!0});let p=class{
constructor(e,t,n){this.urlService=t,this.disposables=[];const s=global.getOpenUrls()||[],o=[..."string"==typeof e?[e]:e,...s],c=h.coalesce(o.map(f)),l=()=>c.forEach(e=>{e&&t.open(e)});d.isWindows&&a.app.setAsDefaultProtocolClient(r.default.urlProtocol,process.execPath,["--open-url","--"]);const u=i.Event.map(i.Event.fromNodeEventEmitter(a.app,"open-url",(e,t)=>({event:e,url:t})),({event:e,url:t})=>(e.preventDefault(),t));i.Event.filter(i.Event.map(u,f),e=>!!e)(this.urlService.open,this.urlService,this.disposables);n.getWindows().filter(e=>e.isReady).length>0?l():i.Event.once(n.onWindowReady)(l)}dispose(){this.disposables=l.dispose(this.disposables)}};p=s([o(1,n.IURLService),o(2,u.IWindowsMainService)],p),t.ElectronURLListener=p}),define(t[188],i([1,0,97,33,3,15,8,22,11,13,4,53,24,41,44,23,45,2,7]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let _=class extends a.Disposable{constructor(e,t,i,n,r,s,o){super(),this.sharedProcess=e,
this.windowsMainService=t,this.environmentService=i,this.lifecycleService=r,this.historyService=s,this.logService=o,this.disposables=this._register(new a.DisposableStore),this.onWindowOpen=f.Event.filter(f.Event.fromNodeEventEmitter(h.app,"browser-window-created",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),this.onWindowBlur=f.Event.filter(f.Event.fromNodeEventEmitter(h.app,"browser-window-blur",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),this.onWindowMaximize=f.Event.filter(f.Event.fromNodeEventEmitter(h.app,"browser-window-maximize",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),this.onWindowUnmaximize=f.Event.filter(f.Event.fromNodeEventEmitter(h.app,"browser-window-unmaximize",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e)),
this.onWindowFocus=f.Event.any(f.Event.map(f.Event.filter(f.Event.map(this.windowsMainService.onWindowsCountChanged,()=>this.windowsMainService.getLastActiveWindow()),e=>!!e),e=>e.id),f.Event.filter(f.Event.fromNodeEventEmitter(h.app,"browser-window-focus",(e,t)=>t.id),e=>!!this.windowsMainService.getWindowById(e))),this.onRecentlyOpenedChange=this.historyService.onRecentlyOpenedChange,n.registerHandler(this),f.Event.latch(f.Event.any(this.onWindowOpen,this.onWindowFocus))(e=>this._activeWindowId=e,null,this.disposables)}pickFileFolderAndOpen(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickFileFolderAndOpen"),this.windowsMainService.pickFileFolderAndOpen(e)})}pickFileAndOpen(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickFileAndOpen"),this.windowsMainService.pickFileAndOpen(e)})}pickFolderAndOpen(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickFolderAndOpen"),
this.windowsMainService.pickFolderAndOpen(e)})}pickWorkspaceAndOpen(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#pickWorkspaceAndOpen"),this.windowsMainService.pickWorkspaceAndOpen(e)})}showMessageBox(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#showMessageBox",e),this.withWindow(e,e=>this.windowsMainService.showMessageBox(t,e),()=>this.windowsMainService.showMessageBox(t))})}showSaveDialog(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#showSaveDialog",e),this.withWindow(e,e=>this.windowsMainService.showSaveDialog(t,e),()=>this.windowsMainService.showSaveDialog(t))})}showOpenDialog(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#showOpenDialog",e),this.withWindow(e,e=>this.windowsMainService.showOpenDialog(t,e),()=>this.windowsMainService.showOpenDialog(t))})}reloadWindow(e,t){return n(this,void 0,void 0,function*(){
return this.logService.trace("windowsService#reloadWindow",e),this.withWindow(e,e=>this.windowsMainService.reload(e,t))})}openDevTools(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#openDevTools",e),this.withWindow(e,e=>e.win.webContents.openDevTools(t))})}toggleDevTools(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#toggleDevTools",e),this.withWindow(e,e=>{const t=e.win.webContents;S.isMacintosh&&e.hasHiddenTitleBarStyle()&&!e.isFullScreen()&&!t.isDevToolsOpened()?t.openDevTools({mode:"undocked"}):t.toggleDevTools()})})}updateTouchBar(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#updateTouchBar",e),this.withWindow(e,e=>e.updateTouchBar(t))})}closeWorkspace(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#closeWorkspace",e),this.withWindow(e,e=>this.windowsMainService.closeWorkspace(e))})}enterWorkspace(e,t){
return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#enterWorkspace",e),this.withWindow(e,e=>this.windowsMainService.enterWorkspace(e,t))})}toggleFullScreen(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#toggleFullScreen",e),this.withWindow(e,e=>e.toggleFullScreen())})}setRepresentedFilename(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#setRepresentedFilename",e),this.withWindow(e,e=>e.setRepresentedFilename(t))})}addRecentlyOpened(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#addRecentlyOpened"),this.historyService.addRecentlyOpened(e)})}removeFromRecentlyOpened(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#removeFromRecentlyOpened"),this.historyService.removeFromRecentlyOpened(e)})}clearRecentlyOpened(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#clearRecentlyOpened"),
this.historyService.clearRecentlyOpened()})}getRecentlyOpened(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#getRecentlyOpened",e),this.withWindow(e,e=>this.historyService.getRecentlyOpened(e.config.workspace,e.config.folderUri,e.config.filesToOpenOrCreate),()=>this.historyService.getRecentlyOpened())})}newWindowTab(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#newWindowTab"),this.windowsMainService.openNewTabbedWindow(5)})}showPreviousWindowTab(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#showPreviousWindowTab"),h.Menu.sendActionToFirstResponder("selectPreviousTab:")})}showNextWindowTab(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#showNextWindowTab"),h.Menu.sendActionToFirstResponder("selectNextTab:")})}moveWindowTabToNewWindow(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#moveWindowTabToNewWindow"),
h.Menu.sendActionToFirstResponder("moveTabToNewWindow:")})}mergeAllWindowTabs(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#mergeAllWindowTabs"),h.Menu.sendActionToFirstResponder("mergeAllWindows:")})}toggleWindowTabsBar(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#toggleWindowTabsBar"),h.Menu.sendActionToFirstResponder("toggleTabBar:")})}focusWindow(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#focusWindow",e),S.isMacintosh?this.withWindow(e,e=>e.win.show()):this.withWindow(e,e=>e.win.focus())})}closeWindow(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#closeWindow",e),this.withWindow(e,e=>e.win.close())})}isFocused(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#isFocused",e),this.withWindow(e,e=>e.win.isFocused(),()=>!1)})}isMaximized(e){return n(this,void 0,void 0,function*(){
return this.logService.trace("windowsService#isMaximized",e),this.withWindow(e,e=>e.win.isMaximized(),()=>!1)})}maximizeWindow(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#maximizeWindow",e),this.withWindow(e,e=>e.win.maximize())})}unmaximizeWindow(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#unmaximizeWindow",e),this.withWindow(e,e=>e.win.unmaximize())})}minimizeWindow(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#minimizeWindow",e),this.withWindow(e,e=>e.win.minimize())})}onWindowTitleDoubleClick(e){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#onWindowTitleDoubleClick",e),this.withWindow(e,e=>e.onWindowTitleDoubleClick())})}setDocumentEdited(e,t){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#setDocumentEdited",e),this.withWindow(e,e=>{e.win.isDocumentEdited()!==t&&e.win.setDocumentEdited(t)})})}
openWindow(e,t,i){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#openWindow"),t&&t.length&&this.windowsMainService.open({context:5,contextWindowId:e,urisToOpen:t,cli:i.args?Object.assign({},this.environmentService.args,i.args):this.environmentService.args,forceNewWindow:i.forceNewWindow,forceReuseWindow:i.forceReuseWindow,diffMode:i.diffMode,addMode:i.addMode,gotoLineMode:i.gotoLineMode,noRecentEntry:i.noRecentEntry,waitMarkerFileURI:i.waitMarkerFileURI})})}openNewWindow(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#openNewWindow "+JSON.stringify(e)),this.windowsMainService.openNewWindow(5,e)})}openExtensionDevelopmentHostWindow(e,t){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#openExtensionDevelopmentHostWindow "+JSON.stringify(e)),e.extensionDevelopmentPath&&this.windowsMainService.openExtensionDevelopmentHostWindow(e.extensionDevelopmentPath,{context:5,cli:e,userEnv:Object.keys(t).length>0?t:void 0})})}
getWindows(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#getWindows");return this.windowsMainService.getWindows().map(e=>({id:e.id,workspace:e.openedWorkspace,folderUri:e.openedFolderUri,title:e.win.getTitle(),filename:e.getRepresentedFilename()}))})}getWindowCount(){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#getWindowCount"),this.windowsMainService.getWindows().length})}log(e,t){return n(this,void 0,void 0,function*(){let i=console.log;switch(e){case"error":i=console.error;break;case"warn":i=console.warn;break;case"info":i=console.info}i.call(console,...t)})}showItemInFolder(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#showItemInFolder"),e.scheme===w.Schemas.file&&h.shell.showItemInFolder(e.fsPath)})}getActiveWindowId(){return n(this,void 0,void 0,function*(){return this._activeWindowId})}openExternal(e){return n(this,void 0,void 0,function*(){
return this.logService.trace("windowsService#openExternal"),h.shell.openExternal(e),!0})}startCrashReporter(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#startCrashReporter"),h.crashReporter.start(e)})}quit(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#quit"),this.windowsMainService.quit()})}relaunch(e){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#relaunch"),this.lifecycleService.relaunch(e)})}whenSharedProcessReady(){return n(this,void 0,void 0,function*(){return this.logService.trace("windowsService#whenSharedProcessReady"),this.sharedProcess.whenReady()})}toggleSharedProcess(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#toggleSharedProcess"),this.sharedProcess.toggle()})}openAboutDialog(){return n(this,void 0,void 0,function*(){this.logService.trace("windowsService#openAboutDialog");let e=h.app.getVersion();u.default.target&&(e=`${e} (${u.default.target} setup)`)
;const t="linux"===process.platform&&process.env.SNAP&&process.env.SNAP_REVISION,n=i.localize(0,null,e,u.default.commit||"Unknown",u.default.date||"Unknown",process.versions.electron,process.versions.chrome,process.versions.node,process.versions.v8,`${r.type()} ${r.arch()} ${r.release()}${t?" snap":""}`),s=i.localize(1,null),o=y.mnemonicButtonLabel(i.localize(2,null));let a;(a=S.isLinux?[o,s]:[s,o])[(yield this.windowsMainService.showMessageBox({title:u.default.nameLong,type:"info",message:u.default.nameLong,detail:`\n${n}`,buttons:a,noLink:!0,defaultId:a.indexOf(s),cancelId:a.indexOf(s)},this.windowsMainService.getFocusedWindow()||this.windowsMainService.getLastActiveWindow())).button]===o&&h.clipboard.writeText(n)})}handleURL(e){return n(this,void 0,void 0,function*(){return!(e.authority!==w.Schemas.file||!e.path)&&(this.openFileForURI({fileUri:l.URI.file(e.fsPath)}),!0)})}openFileForURI(e){const t=c.assign(Object.create(null),this.environmentService.args),i=[e];this.windowsMainService.open({context:5,
cli:t,urisToOpen:i,gotoLineMode:!0})}resolveProxy(e,t){return n(this,void 0,void 0,function*(){return new Promise(i=>{const n=this.windowsMainService.getWindowById(e);n?n.win.webContents.session.resolveProxy(t,e=>{i(e)}):i()})})}withWindow(e,t,i){const n=this.windowsMainService.getWindowById(e);return n?t(n):i?i():void 0}};_=s([o(1,m.IWindowsMainService),o(2,d.IEnvironmentService),o(3,p.IURLService),o(4,g.ILifecycleService),o(5,v.IHistoryMainService),o(6,b.ILogService)],_),t.WindowsService=_}),define(t[26],i([1,0,5,98,8,2,6,21,112,42,23,45,32,67]),function(e,t,i,n,r,s,o,a,c,l,u,d,h,f){"use strict";function p(e){return g(e)||m(e)}function g(e){return e&&"object"==typeof e&&"string"==typeof e.path&&(!e.name||"string"==typeof e.name)}function m(e){return e&&"object"==typeof e&&"string"==typeof e.uri&&(!e.name||"string"==typeof e.name)}function v(e){return e instanceof r.URI}function w(e,t,i,n=!s.isWindows){if(e.scheme!==i.scheme)return{name:t,uri:e.toString(!0)};let r
;if(a.isEqualOrParent(e,i))r=a.relativePath(i,e)||".",s.isWindows&&e.scheme===u.Schemas.file&&!n&&(r=r.replace(/\//g,"\\"));else if(e.scheme===u.Schemas.file)r=e.fsPath,s.isWindows&&(r=d.normalizeDriveLetter(r),n&&(r=h.toSlashes(r)));else{if(!a.isEqualAuthority(e.authority,i.authority))return{name:t,uri:e.toString(!0)};r=e.path}return{name:t,path:r}}function y(e,t,i){let n=function(e,t){let i=l.parse(t);Array.isArray(i.folders)&&(i.folders=i.folders.filter(e=>p(e)));if(!Array.isArray(i.folders))throw new Error(`${e} looks like an invalid workspace file.`);return i}(t,e);const o=a.dirname(t),u=a.dirname(i),d=[],h=S(n.folders);for(const e of n.folders){let t=g(e)?a.resolvePath(o,e.path):r.URI.parse(e.uri);d.push(w(t,e.name,u,h))}const m={insertSpaces:!1,tabSize:4,eol:s.isLinux||s.isMacintosh?"\n":"\r\n"},v=c.setProperty(e,["folders"],d,m);let y=c.applyEdits(e,v);return n.remoteAuthority===f.getRemoteAuthority(i)&&(y=c.applyEdits(y,c.removeProperty(y,["remoteAuthority"],m))),y}function S(e){if(s.isWindows){
for(const t of e)if(g(t)&&t.path.indexOf(_)>=0)return!0;return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.IWorkspacesMainService=i.createDecorator("workspacesMainService"),t.IWorkspacesService=i.createDecorator("workspacesService"),t.WORKSPACE_EXTENSION="code-workspace",t.WORKSPACE_FILTER=[{name:n.localize(0,null),extensions:[t.WORKSPACE_EXTENSION]}],t.UNTITLED_WORKSPACE_NAME="workspace.json",t.reviveWorkspaceIdentifier=function(e){return{id:e.id,configPath:r.URI.revive(e.configPath)}},t.isStoredWorkspaceFolder=p,t.isRawFileWorkspaceFolder=g,t.isRawUriWorkspaceFolder=m,t.isSingleFolderWorkspaceIdentifier=v,t.isWorkspaceIdentifier=function(e){const t=e;return t&&"string"==typeof t.id&&t.configPath instanceof r.URI},t.toWorkspaceIdentifier=function(e){return e.configuration?{configPath:e.configuration,id:e.id}:1===e.folders.length?e.folders[0].uri:void 0},t.isSingleFolderWorkspaceInitializationPayload=function(e){return v(e.folder)};const b="."+t.WORKSPACE_EXTENSION
;t.hasWorkspaceFileExtension=function(e){return("string"==typeof e?o.extname(e):a.extname(e))===b};const _="/";t.getStoredWorkspaceFolder=w,t.rewriteWorkspaceFileForNewLocation=y,t.useSlashForPath=S}),define(t[190],i([1,0,2,32,26,21]),function(e,t,i,n,r,s){"use strict";function o({windows:e,newWindow:t,context:i,fileUri:n,localWorkspaceResolver:r}){if(!t&&n&&(4===i||0===i||1===i)){const t=function(e,t,i){for(const n of e){const e=n.openedWorkspace;if(e){const r=i(e);if(r){if(r.folders.some(e=>s.isEqualOrParent(t,e.uri)))return n}else if(s.isEqualOrParent(t,e.configPath))return n}}const n=e.filter(e=>e.openedFolderUri&&s.isEqualOrParent(t,e.openedFolderUri));if(n.length)return n.sort((e,t)=>-(e.openedFolderUri.path.length-t.openedFolderUri.path.length))[0];return null}(e,n,r);if(t)return t}return t?void 0:a(e)}function a(e){const t=Math.max.apply(Math,e.map(e=>e.lastFocusTime));return e.filter(e=>e.lastFocusTime===t)[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.findBestWindowOrFolderForFile=o,
t.getLastActiveWindow=a,t.findWindowOnWorkspace=function(e,t){if(r.isSingleFolderWorkspaceIdentifier(t)){for(const i of e)if(r.isSingleFolderWorkspaceIdentifier(t)&&i.openedFolderUri&&s.isEqual(i.openedFolderUri,t))return i}else if(r.isWorkspaceIdentifier(t))for(const i of e)if(i.openedWorkspace&&i.openedWorkspace.id===t.id)return i;return null},t.findWindowOnExtensionDevelopmentPath=function(e,t){const r=e=>Array.isArray(t)?t.some(t=>n.isEqual(t,e,!i.isLinux)):!!t&&n.isEqual(t,e,!i.isLinux);for(const t of e)if(t.extensionDevelopmentPath)if(Array.isArray(t.extensionDevelopmentPath)){if(t.extensionDevelopmentPath.some(e=>r(e)))return t}else if(t.extensionDevelopmentPath&&r(t.extensionDevelopmentPath))return t;return null},t.findWindowOnWorkspaceOrFolderUri=function(e,t){if(!t)return null;for(const i of e){if(i.openedWorkspace&&s.isEqual(i.openedWorkspace.configPath,t))return i;if(i.openedFolderUri&&s.isEqual(i.openedFolderUri,t))return i}return null}}),
define(t[191],i([1,0,20,61,6,2,17,25,11,16,30,7,26,8,21,32,23]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let S=class{constructor(e,t,i){this.configurationService=t,this.logService=i,this.backupHome=e.backupHome.fsPath,this.workspacesJsonPath=e.backupWorkspacesPath}initialize(){return n(this,void 0,void 0,function*(){let e;try{e=JSON.parse(yield l.readFile(this.workspacesJsonPath,"utf8"))}catch(t){e=Object.create(null)}e.emptyWorkspaceInfos?this.emptyWorkspaces=yield this.validateEmptyWorkspaces(e.emptyWorkspaceInfos):Array.isArray(e.emptyWorkspaces)?this.emptyWorkspaces=yield this.validateEmptyWorkspaces(e.emptyWorkspaces.map(e=>({backupFolder:e}))):this.emptyWorkspaces=[];let t=[];try{Array.isArray(e.rootURIWorkspaces)?t=e.rootURIWorkspaces.map(e=>({workspace:{id:e.id,configPath:m.URI.parse(e.configURIPath)},remoteAuthority:e.remoteAuthority})):Array.isArray(e.rootWorkspaces)&&(t=e.rootWorkspaces.map(e=>({workspace:{id:e.id,
configPath:m.URI.file(e.configPath)}})))}catch(e){}this.rootWorkspaces=yield this.validateWorkspaces(t);let i=[];try{if(Array.isArray(e.folderURIWorkspaces))i=e.folderURIWorkspaces.map(e=>m.URI.parse(e));else if(Array.isArray(e.folderWorkspaces)){i=[];for(const t of e.folderWorkspaces){const e=this.getLegacyFolderHash(t),n=m.URI.file(t),r=this.getFolderHash(n);r!==e&&(yield this.moveBackupFolder(this.getBackupPath(r),this.getBackupPath(e))),i.push(n)}}}catch(e){}this.folderWorkspaces=yield this.validateFolders(i),yield this.save()})}getWorkspaceBackups(){return this.isHotExitOnExitAndWindowClose()?[]:this.rootWorkspaces.slice(0)}getFolderBackupPaths(){return this.isHotExitOnExitAndWindowClose()?[]:this.folderWorkspaces.slice(0)}isHotExitEnabled(){return this.getHotExitConfig()!==f.HotExitConfiguration.OFF}isHotExitOnExitAndWindowClose(){return this.getHotExitConfig()===f.HotExitConfiguration.ON_EXIT_AND_WINDOW_CLOSE}getHotExitConfig(){const e=this.configurationService.getValue()
;return e&&e.files&&e.files.hotExit||f.HotExitConfiguration.ON_EXIT}getEmptyWindowBackupPaths(){return this.emptyWorkspaces.slice(0)}registerWorkspaceBackupSync(e,t){this.rootWorkspaces.some(t=>e.workspace.id===t.workspace.id)||(this.rootWorkspaces.push(e),this.saveSync());const i=this.getBackupPath(e.workspace.id);return t&&this.moveBackupFolderSync(i,t),i}moveBackupFolderSync(e,t){if(i.existsSync(e)&&this.convertToEmptyWindowBackupSync(e),i.existsSync(t))try{i.renameSync(t,e)}catch(e){this.logService.error(`Backup: Could not move backup folder to new location: ${e.toString()}`)}}moveBackupFolder(e,t){return n(this,void 0,void 0,function*(){if((yield l.exists(e))&&(yield this.convertToEmptyWindowBackup(e)),yield l.exists(t))try{yield l.rename(t,e)}catch(e){this.logService.error(`Backup: Could not move backup folder to new location: ${e.toString()}`)}})}unregisterWorkspaceBackupSync(e){const t=e.id;let i=u.firstIndex(this.rootWorkspaces,e=>e.workspace.id===t);-1!==i&&(this.rootWorkspaces.splice(i,1),
this.saveSync())}registerFolderBackupSync(e){return this.folderWorkspaces.some(t=>v.isEqual(e,t))||(this.folderWorkspaces.push(e),this.saveSync()),this.getBackupPath(this.getFolderHash(e))}unregisterFolderBackupSync(e){let t=u.firstIndex(this.folderWorkspaces,t=>v.isEqual(e,t));-1!==t&&(this.folderWorkspaces.splice(t,1),this.saveSync())}registerEmptyWindowBackupSync(e,t){return e||(e=this.getRandomEmptyWindowId()),this.emptyWorkspaces.some(t=>!!t.backupFolder&&w.isEqual(t.backupFolder,e,!c.isLinux))||(this.emptyWorkspaces.push({backupFolder:e,remoteAuthority:t}),this.saveSync()),this.getBackupPath(e)}unregisterEmptyWindowBackupSync(e){let t=u.firstIndex(this.emptyWorkspaces,t=>!!t.backupFolder&&w.isEqual(t.backupFolder,e,!c.isLinux));-1!==t&&(this.emptyWorkspaces.splice(t,1),this.saveSync())}getBackupPath(e){return a.join(this.backupHome,e)}validateWorkspaces(e){return n(this,void 0,void 0,function*(){if(!Array.isArray(e))return[];const t=new Set,i=[];for(let n of e){const e=n.workspace
;if(!g.isWorkspaceIdentifier(e))return[];if(!t.has(e.id)){t.add(e.id);const r=this.getBackupPath(e.id);(yield this.hasBackups(r))?e.configPath.scheme!==y.Schemas.file||(yield l.exists(e.configPath.fsPath))?i.push(n):yield this.convertToEmptyWindowBackup(r):yield this.deleteStaleBackup(r)}}return i})}validateFolders(e){return n(this,void 0,void 0,function*(){if(!Array.isArray(e))return[];const t=[],i=new Set;for(let n of e){const e=v.getComparisonKey(n);if(!i.has(e)){i.add(e);const r=this.getBackupPath(this.getFolderHash(n));(yield this.hasBackups(r))?n.scheme!==y.Schemas.file||(yield l.exists(n.fsPath))?t.push(n):yield this.convertToEmptyWindowBackup(r):yield this.deleteStaleBackup(r)}}return t})}validateEmptyWorkspaces(e){return n(this,void 0,void 0,function*(){if(!Array.isArray(e))return[];const t=[],i=new Set;for(let n of e){const e=n.backupFolder;if("string"!=typeof e)return[];if(!i.has(e)){i.add(e);const r=this.getBackupPath(e);(yield this.hasBackups(r))?t.push(n):yield this.deleteStaleBackup(r)}}
return t})}deleteStaleBackup(e){return n(this,void 0,void 0,function*(){try{(yield l.exists(e))&&(yield l.rimraf(e,l.RimRafMode.MOVE))}catch(e){this.logService.error(`Backup: Could not delete stale backup: ${e.toString()}`)}})}convertToEmptyWindowBackup(e){return n(this,void 0,void 0,function*(){let t=this.getRandomEmptyWindowId();for(;this.emptyWorkspaces.some(e=>!!e.backupFolder&&w.isEqual(e.backupFolder,t,c.isLinux));)t=this.getRandomEmptyWindowId();const i=this.getBackupPath(t);try{yield l.rename(e,i)}catch(e){return this.logService.error(`Backup: Could not rename backup folder: ${e.toString()}`),!1}return this.emptyWorkspaces.push({backupFolder:t}),!0})}convertToEmptyWindowBackupSync(e){let t=this.getRandomEmptyWindowId();for(;this.emptyWorkspaces.some(e=>!!e.backupFolder&&w.isEqual(e.backupFolder,t,c.isLinux));)t=this.getRandomEmptyWindowId();const n=this.getBackupPath(t);try{i.renameSync(e,n)}catch(e){return this.logService.error(`Backup: Could not rename backup folder: ${e.toString()}`),!1}
return this.emptyWorkspaces.push({backupFolder:t}),!0}hasBackups(e){return n(this,void 0,void 0,function*(){try{const t=yield l.readdir(e);for(const i of t)try{if((yield l.readdir(a.join(e,i))).length>0)return!0}catch(e){}}catch(e){}return!1})}saveSync(){try{l.writeFileSync(this.workspacesJsonPath,JSON.stringify(this.serializeBackups()))}catch(e){this.logService.error(`Backup: Could not save workspaces.json: ${e.toString()}`)}}save(){return n(this,void 0,void 0,function*(){try{yield l.writeFile(this.workspacesJsonPath,JSON.stringify(this.serializeBackups()))}catch(e){this.logService.error(`Backup: Could not save workspaces.json: ${e.toString()}`)}})}serializeBackups(){return{rootURIWorkspaces:this.rootWorkspaces.map(e=>({id:e.workspace.id,configURIPath:e.workspace.configPath.toString(),remoteAuthority:e.remoteAuthority})),folderURIWorkspaces:this.folderWorkspaces.map(e=>e.toString()),emptyWorkspaceInfos:this.emptyWorkspaces,emptyWorkspaces:this.emptyWorkspaces.map(e=>e.backupFolder)}}getRandomEmptyWindowId(){
return(Date.now()+Math.round(1e3*Math.random())).toString()}getFolderHash(e){let t;return t=e.scheme===y.Schemas.file?c.isLinux?e.fsPath:e.fsPath.toLowerCase():v.hasToIgnoreCase(e)?e.toString().toLowerCase():e.toString(),r.createHash("md5").update(t).digest("hex")}getLegacyFolderHash(e){return r.createHash("md5").update(c.isLinux?e:e.toLowerCase()).digest("hex")}};S=s([o(0,d.IEnvironmentService),o(1,h.IConfigurationService),o(2,p.ILogService)],S),t.BackupMainService=S}),define(t[192],i([1,0,5,26,92,21,14]),function(e,t,i,n,r,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getSimpleWorkspaceLabel=function(e,t){if(n.isSingleFolderWorkspaceIdentifier(e))return s.basename(e);if(s.isEqualOrParent(e.configPath,t))return r.localize(0,null);let i=s.basename(e.configPath);return o.endsWith(i,n.WORKSPACE_EXTENSION)&&(i=i.substr(0,i.length-n.WORKSPACE_EXTENSION.length-1)),r.localize(1,null,i)},t.ILabelService=i.createDecorator("label")}),
define(t[193],i([1,0,90,25,38,13,7,45,4,2,26,44,9,21,8,23,11,192,122,17,24]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,E){"use strict";function C(e){return p.isRecentFolder(e)?e.folderUri:p.isRecentFile(e)?e.fileUri:e.workspace.configPath}function k(e,t){return r.firstIndex(e,e=>p.isRecentWorkspace(e)&&e.workspace.id===t.id)}function I(e,t){return r.firstIndex(e,e=>p.isRecentFolder(e)&&m.isEqual(e.folderUri,t))}function P(e,t){return r.firstIndex(e,e=>m.isEqual(e.fileUri,t))}Object.defineProperty(t,"__esModule",{value:!0});let M=class e{constructor(e,t,i,n,r){this.stateService=e,this.logService=t,this.workspacesMainService=i,this.environmentService=n,this._onRecentlyOpenedChange=new d.Emitter,this.onRecentlyOpenedChange=this._onRecentlyOpenedChange.event,this.macOSRecentDocumentsUpdater=new g.ThrottledDelayer(800),r.when(3).then(()=>this.handleWindowsJumpList())}handleWindowsJumpList(){h.isWindows&&(this.updateWindowsJumpList(),this.onRecentlyOpenedChange(()=>this.updateWindowsJumpList()))}
addRecentlyOpened(t){const i=[],n=[];for(let r of t)if(p.isRecentWorkspace(r))this.workspacesMainService.isUntitledWorkspace(r.workspace)||-1!==k(i,r.workspace)||i.push(r);else if(p.isRecentFolder(r))-1===I(i,r.folderUri)&&i.push(r);else{const t=P(n,r.fileUri)>=0,i=r.fileUri.scheme===w.Schemas.file&&e.COMMON_FILES_FILTER.indexOf(m.basename(r.fileUri))>=0;t||i||(n.push(r),h.isWindows&&r.fileUri.scheme===w.Schemas.file&&c.app.addRecentDocument(r.fileUri.fsPath))}this.addEntriesFromStorage(i,n),i.length>e.MAX_TOTAL_RECENT_ENTRIES&&(i.length=e.MAX_TOTAL_RECENT_ENTRIES),n.length>e.MAX_TOTAL_RECENT_ENTRIES&&(n.length=e.MAX_TOTAL_RECENT_ENTRIES),this.saveRecentlyOpened({workspaces:i,files:n}),this._onRecentlyOpenedChange.fire(),h.isMacintosh&&this.macOSRecentDocumentsUpdater.trigger(()=>this.updateMacOSRecentDocuments())}removeFromRecentlyOpened(e){const t=t=>{const i=C(t);for(const t of e)if(m.isEqual(t,i))return!1;return!0},i=this.getRecentlyOpened(),n=i.workspaces.filter(t),r=i.files.filter(t)
;n.length===i.workspaces.length&&r.length===i.files.length||(this.saveRecentlyOpened({files:r,workspaces:n}),this._onRecentlyOpenedChange.fire(),h.isMacintosh&&this.macOSRecentDocumentsUpdater.trigger(()=>this.updateMacOSRecentDocuments()))}updateMacOSRecentDocuments(){return n(this,void 0,void 0,function*(){if(!h.isMacintosh)return;c.app.clearRecentDocuments();const t=this.getRecentlyOpened(),i=[];let n=0;for(let r=0;r<t.workspaces.length&&n<e.MAX_MACOS_DOCK_RECENT_WORKSPACES;r++){const e=C(t.workspaces[r]);if(e.scheme===w.Schemas.file){const t=m.originalFSPath(e);(yield _.exists(t))&&(i.push(t),n++)}}const r=[];for(let s=0;s<t.files.length&&n<e.MAX_MACOS_DOCK_RECENT_ENTRIES_TOTAL;s++){const o=C(t.files[s]);if(o.scheme===w.Schemas.file){const t=m.originalFSPath(o);if(-1!==e.COMMON_FILES_FILTER.indexOf(m.basename(o))||-1!==i.indexOf(t))continue;(yield _.exists(t))&&(r.push(t),n++)}}r.reverse().forEach(e=>c.app.addRecentDocument(e)),i.reverse().forEach(e=>c.app.addRecentDocument(e))})}clearRecentlyOpened(){
this.saveRecentlyOpened({workspaces:[],files:[]}),c.app.clearRecentDocuments(),this._onRecentlyOpenedChange.fire()}getRecentlyOpened(e,t,i){const n=[],r=[];if(e&&!this.workspacesMainService.isUntitledWorkspace(e)&&n.push({workspace:e}),t&&n.push({folderUri:t}),i)for(let e of i){const t=e.fileUri;t&&-1===P(r,t)&&r.push({fileUri:t})}return this.addEntriesFromStorage(n,r),{workspaces:n,files:r}}addEntriesFromStorage(e,t){let i=this.getRecentlyOpenedFromStorage();for(let t of i.workspaces){let i=p.isRecentFolder(t)?I(e,t.folderUri):k(e,t.workspace);i>=0?e[i].label=e[i].label||t.label:e.push(t)}for(let e of i.files){let i=P(t,e.fileUri);i>=0?t[i].label=t[i].label||e.label:t.push(e)}}getRecentlyOpenedFromStorage(){const t=this.stateService.getItem(e.recentlyOpenedStorageKey);return b.restoreRecentlyOpened(t,this.logService)}saveRecentlyOpened(t){const i=b.toStoreData(t);this.stateService.setItem(e.recentlyOpenedStorageKey,i)}updateWindowsJumpList(){if(!h.isWindows)return;const e=[];if(e.push({type:"tasks",items:[{
type:"task",title:i.localize(0,null),description:i.localize(1,null),program:process.execPath,args:"-n",iconPath:process.execPath,iconIndex:0}]}),this.getRecentlyOpened().workspaces.length>0){let t=[];for(let e of c.app.getJumpListSettings().removedItems){const i=e.args;if(i){const e=/^--(folder|file)-uri\s+"([^"]+)"$/.exec(i);e&&t.push(v.URI.parse(e[2]))}}this.removeFromRecentlyOpened(t),e.push({type:"custom",name:i.localize(2,null),items:r.coalesce(this.getRecentlyOpened().workspaces.slice(0,7).map(e=>{const t=p.isRecentWorkspace(e)?e.workspace:e.folderUri,n=e.label||S.getSimpleWorkspaceLabel(t,this.environmentService.untitledWorkspacesHome);let r,s;return f.isSingleFolderWorkspaceIdentifier(t)?(r=i.localize(3,null,u.getBaseLabel(t),u.getPathLabel(m.dirname(t),this.environmentService)),s=`--folder-uri "${t.toString()}"`):(r=i.localize(4,null,u.getBaseLabel(t.configPath),u.getPathLabel(m.dirname(t.configPath),this.environmentService)),s=`--file-uri "${t.configPath.toString()}"`),{type:"task",title:n,
description:r,program:process.execPath,args:s,iconPath:"explorer.exe",iconIndex:0}}))})}e.push({type:"recent"});try{c.app.setJumpList(e)}catch(e){this.logService.warn("#setJumpList",e)}}};M.MAX_TOTAL_RECENT_ENTRIES=100,M.MAX_MACOS_DOCK_RECENT_WORKSPACES=7,M.MAX_MACOS_DOCK_RECENT_ENTRIES_TOTAL=10,M.COMMON_FILES_FILTER=["COMMIT_EDITMSG","MERGE_MSG"],M.recentlyOpenedStorageKey="openedPathsList",M=s([o(0,a.IStateService),o(1,l.ILogService),o(2,f.IWorkspacesMainService),o(3,y.IEnvironmentService),o(4,E.ILifecycleService)],M),t.HistoryMainService=M}),define(t[194],i([1,0,4,48,26,8,44]),function(e,t,i,n,r,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class a{constructor(e){this.service=e,this.onWindowOpen=i.Event.buffer(e.onWindowOpen,!0),this.onWindowFocus=i.Event.buffer(e.onWindowFocus,!0),this.onWindowBlur=i.Event.buffer(e.onWindowBlur,!0),this.onWindowMaximize=i.Event.buffer(e.onWindowMaximize,!0),this.onWindowUnmaximize=i.Event.buffer(e.onWindowUnmaximize,!0),
this.onRecentlyOpenedChange=i.Event.buffer(e.onRecentlyOpenedChange,!0)}listen(e,t){switch(t){case"onWindowOpen":return this.onWindowOpen;case"onWindowFocus":return this.onWindowFocus;case"onWindowBlur":return this.onWindowBlur;case"onWindowMaximize":return this.onWindowMaximize;case"onWindowUnmaximize":return this.onWindowUnmaximize;case"onRecentlyOpenedChange":return this.onRecentlyOpenedChange}throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"pickFileFolderAndOpen":return this.service.pickFileFolderAndOpen(i);case"pickFileAndOpen":return this.service.pickFileAndOpen(i);case"pickFolderAndOpen":return this.service.pickFolderAndOpen(i);case"pickWorkspaceAndOpen":return this.service.pickWorkspaceAndOpen(i);case"showMessageBox":return this.service.showMessageBox(i[0],i[1]);case"showSaveDialog":return this.service.showSaveDialog(i[0],i[1]);case"showOpenDialog":return this.service.showOpenDialog(i[0],i[1]);case"reloadWindow":return this.service.reloadWindow(i[0],i[1]);case"openDevTools":
return this.service.openDevTools(i[0],i[1]);case"toggleDevTools":return this.service.toggleDevTools(i);case"closeWorkspace":return this.service.closeWorkspace(i);case"enterWorkspace":return this.service.enterWorkspace(i[0],s.URI.revive(i[1]));case"toggleFullScreen":return this.service.toggleFullScreen(i);case"setRepresentedFilename":return this.service.setRepresentedFilename(i[0],i[1]);case"addRecentlyOpened":return this.service.addRecentlyOpened(i.map(e=>(o.isRecentFile(e)?e.fileUri=s.URI.revive(e.fileUri):o.isRecentFolder(e)?e.folderUri=s.URI.revive(e.folderUri):e.workspace=r.reviveWorkspaceIdentifier(e.workspace),e)));case"removeFromRecentlyOpened":return this.service.removeFromRecentlyOpened(i.map(s.URI.revive));case"clearRecentlyOpened":return this.service.clearRecentlyOpened();case"newWindowTab":return this.service.newWindowTab();case"showPreviousWindowTab":return this.service.showPreviousWindowTab();case"showNextWindowTab":return this.service.showNextWindowTab();case"moveWindowTabToNewWindow":
return this.service.moveWindowTabToNewWindow();case"mergeAllWindowTabs":return this.service.mergeAllWindowTabs();case"toggleWindowTabsBar":return this.service.toggleWindowTabsBar();case"updateTouchBar":return this.service.updateTouchBar(i[0],i[1]);case"getRecentlyOpened":return this.service.getRecentlyOpened(i);case"focusWindow":return this.service.focusWindow(i);case"closeWindow":return this.service.closeWindow(i);case"isFocused":return this.service.isFocused(i);case"isMaximized":return this.service.isMaximized(i);case"maximizeWindow":return this.service.maximizeWindow(i);case"unmaximizeWindow":return this.service.unmaximizeWindow(i);case"minimizeWindow":return this.service.minimizeWindow(i);case"onWindowTitleDoubleClick":return this.service.onWindowTitleDoubleClick(i);case"setDocumentEdited":return this.service.setDocumentEdited(i[0],i[1]);case"openWindow":{const e=i[1],t=i[2];return e.forEach(e=>{
n.isWorkspaceToOpen(e)?e.workspaceUri=s.URI.revive(e.workspaceUri):n.isFolderToOpen(e)?e.folderUri=s.URI.revive(e.folderUri):e.fileUri=s.URI.revive(e.fileUri)}),t.waitMarkerFileURI=t.waitMarkerFileURI&&s.URI.revive(t.waitMarkerFileURI),this.service.openWindow(i[0],e,t)}case"openNewWindow":return this.service.openNewWindow(i);case"openExtensionDevelopmentHostWindow":return this.service.openExtensionDevelopmentHostWindow(i[0],i[1]);case"getWindows":return this.service.getWindows();case"getWindowCount":return this.service.getWindowCount();case"relaunch":return this.service.relaunch(i[0]);case"whenSharedProcessReady":return this.service.whenSharedProcessReady();case"toggleSharedProcess":return this.service.toggleSharedProcess();case"quit":return this.service.quit();case"log":return this.service.log(i[0],i[1]);case"showItemInFolder":return this.service.showItemInFolder(s.URI.revive(i));case"getActiveWindowId":return this.service.getActiveWindowId();case"openExternal":return this.service.openExternal(i)
;case"startCrashReporter":return this.service.startCrashReporter(i);case"openAboutDialog":return this.service.openAboutDialog();case"resolveProxy":return this.service.resolveProxy(i[0],i[1])}throw new Error(`Call not found: ${t}`)}}t.WindowsChannel=a}),define(t[195],i([1,0,8,21,5,27,26]),function(e,t,i,n,r,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWorkspaceContextService=r.createDecorator("contextService");!function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"}(t.WorkbenchState||(t.WorkbenchState={}));!function(e){e.isIWorkspace=function(e){return e&&"object"==typeof e&&"string"==typeof e.id&&Array.isArray(e.folders)}}(t.IWorkspace||(t.IWorkspace={}));!function(e){e.isIWorkspaceFolder=function(e){return e&&"object"==typeof e&&i.URI.isUri(e.uri)&&"string"==typeof e.name&&"function"==typeof e.toResource}}(t.IWorkspaceFolder||(t.IWorkspaceFolder={}));class a{constructor(e,t=[],i=null){this._id=e,this._configuration=i,
this._foldersMap=s.TernarySearchTree.forPaths(),this.folders=t}update(e){this._id=e.id,this._configuration=e.configuration,this.folders=e.folders}get folders(){return this._folders}set folders(e){this._folders=e,this.updateFoldersMap()}get id(){return this._id}get configuration(){return this._configuration}set configuration(e){this._configuration=e}getFolder(e){return e?this._foldersMap.findSubstr(e.with({scheme:e.scheme,authority:e.authority,path:e.path}).toString())||null:null}updateFoldersMap(){this._foldersMap=s.TernarySearchTree.forPaths();for(const e of this.folders)this._foldersMap.set(e.uri.toString(),e)}toJSON(){return{id:this.id,folders:this.folders,configuration:this.configuration}}}t.Workspace=a;class c{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return n.joinPath(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}t.WorkspaceFolder=c,t.toWorkspaceFolder=function(e){return new c({uri:e,index:0,name:n.basenameOrAuthority(e)},{
uri:e.toString()})},t.toWorkspaceFolders=function(e,t){let r=[],s=new Set;const a=n.dirname(t);for(let t of e){let e=null;if(o.isRawFileWorkspaceFolder(t))t.path&&(e=n.resolvePath(a,t.path));else if(o.isRawUriWorkspaceFolder(t))try{"/"!==(e=i.URI.parse(t.uri)).path[0]&&(e=e.with({path:"/"+e.path}))}catch(e){console.warn(e)}if(e){let i=n.getComparisonKey(e);if(!s.has(i)){s.add(i);const o=t.name||n.basenameOrAuthority(e);r.push(new c({uri:e,name:o,index:r.length},t))}}}return r}}),define(t[80],i([1,0,26,11,6,17,20,2,4,7,61,42,195,23,3,21]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w){"use strict";function y(e){return{configPath:e,id:function(e){let t=e.scheme===m.Schemas.file?w.originalFSPath(e):e.toString();return u.isLinux||(t=t.toLowerCase()),f.createHash("md5").update(t).digest("hex")}(e)}}Object.defineProperty(t,"__esModule",{value:!0});let S=class extends v.Disposable{constructor(e,t){super(),this.environmentService=e,this.logService=t,this._onUntitledWorkspaceDeleted=this._register(new d.Emitter),
this.onUntitledWorkspaceDeleted=this._onUntitledWorkspaceDeleted.event,this.untitledWorkspacesHome=e.untitledWorkspacesHome}resolveLocalWorkspaceSync(e){if(!this.isWorkspacePath(e))return null;if(e.scheme!==m.Schemas.file)return null;let t;try{t=l.readFileSync(e.fsPath,"utf8")}catch(e){return null}return this.doResolveWorkspace(e,t)}isWorkspacePath(e){return this.isInsideWorkspacesHome(e)||i.hasWorkspaceFileExtension(e)}doResolveWorkspace(e,t){try{const i=this.doParseStoredWorkspace(e,t),n=y(e);return{id:n.id,configPath:n.configPath,folders:g.toWorkspaceFolders(i.folders,n.configPath),remoteAuthority:i.remoteAuthority}}catch(e){this.logService.warn(e.toString())}return null}doParseStoredWorkspace(e,t){let n=p.parse(t);if(Array.isArray(n.folders)&&(n.folders=n.folders.filter(e=>i.isStoredWorkspaceFolder(e))),!Array.isArray(n.folders))throw new Error(`${e.toString()} looks like an invalid workspace file.`);return n}isInsideWorkspacesHome(e){
return w.isEqualOrParent(e,this.environmentService.untitledWorkspacesHome)}createUntitledWorkspace(e,t){return n(this,void 0,void 0,function*(){const{workspace:i,storedWorkspace:n}=this.newUntitledWorkspace(e,t),r=i.configPath.fsPath;return yield c.mkdirp(a.dirname(r)),yield c.writeFile(r,JSON.stringify(n,null,"\t")),i})}createUntitledWorkspaceSync(e,t){const{workspace:i,storedWorkspace:n}=this.newUntitledWorkspace(e,t),r=i.configPath.fsPath,s=a.dirname(r);if(!l.existsSync(s)){const e=a.dirname(s);l.existsSync(e)||l.mkdirSync(e),l.mkdirSync(s)}return c.writeFileSync(r,JSON.stringify(n,null,"\t")),i}newUntitledWorkspace(e=[],t){const n=(Date.now()+Math.round(1e3*Math.random())).toString(),r=w.joinPath(this.untitledWorkspacesHome,n),s=w.joinPath(r,i.UNTITLED_WORKSPACE_NAME),o=[];for(const t of e)o.push(i.getStoredWorkspaceFolder(t.uri,t.name,r));return{workspace:y(s),storedWorkspace:{folders:o,remoteAuthority:t}}}getWorkspaceIdentifier(e){return Promise.resolve(y(e))}isUntitledWorkspace(e){
return this.isInsideWorkspacesHome(e.configPath)}deleteUntitledWorkspaceSync(e){this.isUntitledWorkspace(e)&&(this.doDeleteUntitledWorkspaceSync(e),this._onUntitledWorkspaceDeleted.fire(e))}deleteUntitledWorkspace(e){return this.deleteUntitledWorkspaceSync(e),Promise.resolve()}doDeleteUntitledWorkspaceSync(e){const t=w.originalFSPath(e.configPath);try{c.rimrafSync(a.dirname(t));const i=a.join(this.environmentService.workspaceStorageHome,e.id);l.existsSync(i)&&c.writeFileSync(a.join(i,"obsolete"),"")}catch(e){this.logService.warn(`Unable to delete untitled workspace ${t} (${e}).`)}}getUntitledWorkspacesSync(){let e=[];try{const t=c.readdirSync(this.untitledWorkspacesHome.fsPath).map(e=>w.joinPath(this.untitledWorkspacesHome,e,i.UNTITLED_WORKSPACE_NAME));for(const i of t){const t=y(i),n=this.resolveLocalWorkspaceSync(i);n?e.push({workspace:t,remoteAuthority:n.remoteAuthority}):this.doDeleteUntitledWorkspaceSync(t)}}catch(e){
e&&"ENOENT"!==e.code&&this.logService.warn(`Unable to read folders in ${this.untitledWorkspacesHome} (${e}).`)}return e}};S=s([o(0,r.IEnvironmentService),o(1,h.ILogService)],S),t.WorkspacesMainService=S,t.getWorkspaceIdentifier=y}),define(t[197],i([1,0,8]),function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"createUntitledWorkspace":{const e=n[0],t=n[1];let r=void 0;return Array.isArray(e)&&(r=e.map(e=>({uri:i.URI.revive(e.uri),name:e.name}))),this.service.createUntitledWorkspace(r,t)}case"deleteUntitledWorkspace":{const e=n;return this.service.deleteUntitledWorkspace({id:e.id,configPath:i.URI.revive(e.configPath)})}case"getWorkspaceIdentifier":return this.service.getWorkspaceIdentifier(i.URI.revive(n))}throw new Error(`Call not found: ${t}`)}}t.WorkspacesChannel=n}),define(t[40],i([1,0,205,33,84,6,17]),function(e,t,i,n,r,s,o){"use strict";function a(e){let t=""
;return e.args&&(t=Array.isArray(e.args)?` <${e.args.join("> <")}>`:` <${e.args}>`),e.alias?`-${e.alias} --${e.id}${t}`:`--${e.id}${t}`}function c(e,t){let i=e.map(a),n=Math.max.apply(null,i.map(e=>e.length))+2+1;if(t-n<25)return e.reduce((e,t,n)=>e.concat([`  ${i[n]}`,`      ${t.description}`]),[]);let r=t-n-1,s=[];return e.forEach((e,t)=>{let o=i[t],a=function(e,t){let i=[];for(;e.length;){let n=e.length<t?e.length:e.lastIndexOf(" ",t),r=e.slice(0,n).trim();e=e.slice(n),i.push(r)}return i}(e.description,r),c=l(n-o.length-2);s.push("  "+o+c+a[0]);for(let e=1;e<a.length;e++)s.push(l(n)+a[e])}),s}function l(e){return" ".repeat(e)}Object.defineProperty(t,"__esModule",{value:!0});const u={o:r.localize(0,null),e:r.localize(1,null),t:r.localize(2,null)};t.options=[{id:"diff",type:"boolean",cat:"o",alias:"d",args:["file","file"],description:r.localize(3,null)},{id:"add",type:"boolean",cat:"o",alias:"a",args:"folder",description:r.localize(4,null)},{id:"goto",type:"boolean",cat:"o",alias:"g",
args:"file:line[:character]",description:r.localize(5,null)},{id:"new-window",type:"boolean",cat:"o",alias:"n",description:r.localize(6,null)},{id:"reuse-window",type:"boolean",cat:"o",alias:"r",description:r.localize(7,null)},{id:"wait",type:"boolean",cat:"o",alias:"w",description:r.localize(8,null)},{id:"locale",type:"string",cat:"o",args:"locale",description:r.localize(9,null)},{id:"user-data-dir",type:"string",cat:"o",args:"dir",description:r.localize(10,null)},{id:"version",type:"boolean",cat:"o",alias:"v",description:r.localize(11,null)},{id:"help",type:"boolean",cat:"o",alias:"h",description:r.localize(12,null)},{id:"telemetry",type:"boolean",cat:"o",description:r.localize(13,null)},{id:"folder-uri",type:"string",cat:"o",args:"uri",description:r.localize(14,null)},{id:"file-uri",type:"string",cat:"o",args:"uri",description:r.localize(15,null)},{id:"extensions-dir",type:"string",deprecates:"extensionHomePath",cat:"e",args:"dir",description:r.localize(16,null)},{id:"list-extensions",type:"boolean",
cat:"e",description:r.localize(17,null)},{id:"show-versions",type:"boolean",cat:"e",description:r.localize(18,null)},{id:"category",type:"string",cat:"e",description:r.localize(19,null)},{id:"install-extension",type:"string",cat:"e",args:"extension-id | path-to-vsix",description:r.localize(20,null)},{id:"uninstall-extension",type:"string",cat:"e",args:"extension-id",description:r.localize(21,null)},{id:"enable-proposed-api",type:"string",cat:"e",args:"extension-id",description:r.localize(22,null)},{id:"verbose",type:"boolean",cat:"t",description:r.localize(23,null)},{id:"log",type:"string",cat:"t",args:"level",description:r.localize(24,null)},{id:"status",type:"boolean",alias:"s",cat:"t",description:r.localize(25,null)},{id:"prof-startup",type:"boolean",cat:"t",description:r.localize(26,null)},{id:"disable-extensions",type:"boolean",deprecates:"disableExtensions",cat:"t",description:r.localize(27,null)},{id:"disable-extension",type:"string",cat:"t",args:"extension-id",description:r.localize(28,null)},{
id:"inspect-extensions",type:"string",deprecates:"debugPluginHost",args:"port",cat:"t",description:r.localize(29,null)},{id:"inspect-brk-extensions",type:"string",deprecates:"debugBrkPluginHost",args:"port",cat:"t",description:r.localize(30,null)},{id:"disable-gpu",type:"boolean",cat:"t",description:r.localize(31,null)},{id:"max-memory",type:"string",cat:"t",description:r.localize(32,null)},{id:"remote",type:"string"},{id:"locate-extension",type:"string"},{id:"extensionDevelopmentPath",type:"string"},{id:"extensionTestsPath",type:"string"},{id:"extension-development-confirm-save",type:"boolean"},{id:"debugId",type:"string"},{id:"inspect-search",type:"string",deprecates:"debugSearch"},{id:"inspect-brk-search",type:"string",deprecates:"debugBrkSearch"},{id:"export-default-configuration",type:"string"},{id:"install-source",type:"string"},{id:"driver",type:"string"},{id:"logExtensionHostCommunication",type:"boolean"},{id:"skip-getting-started",type:"boolean"},{id:"skip-release-notes",type:"boolean"},{
id:"sticky-quickopen",type:"boolean"},{id:"disable-restore-windows",type:"boolean"},{id:"disable-telemetry",type:"boolean"},{id:"disable-updates",type:"boolean"},{id:"disable-crash-reporter",type:"boolean"},{id:"skip-add-to-recently-opened",type:"boolean"},{id:"unity-launch",type:"boolean"},{id:"open-url",type:"boolean"},{id:"file-write",type:"boolean"},{id:"file-chmod",type:"boolean"},{id:"driver-verbose",type:"boolean"},{id:"force",type:"boolean"},{id:"trace-category-filter",type:"string"},{id:"trace-options",type:"string"},{id:"_",type:"string"},{id:"js-flags",type:"string"},{id:"nolazy",type:"boolean"}],t.parseArgs=function(e,n=(e=>!0)){const r={},s=[],o=[];for(let e of t.options)n(e)&&e.alias&&(r[e.id]=e.alias),"string"===e.type?(s.push(e.id),e.deprecates&&s.push(e.deprecates)):"boolean"===e.type&&(o.push(e.id),e.deprecates&&o.push(e.deprecates));const a=i(e,{string:s,boolean:o,alias:r});for(const e of t.options)e.alias&&delete a[e.alias],
e.deprecates&&a.hasOwnProperty(e.deprecates)&&!a[e.id]&&(a[e.id]=a[e.deprecates],delete a[e.deprecates]);return a._=a._.filter(e=>e.length>0),a},t.formatOptions=c,t.buildHelpMessage=function(e,i,s,o=(e=>!0),a=!0){const l=process.stdout.isTTY&&process.stdout.columns||80;let d=[`${e} ${s}`];d.push(""),d.push(`${r.localize(33,null)}: ${i} [${r.localize(34,null)}][${r.localize(35,null)}...]`),d.push(""),a&&("win32"===n.platform()?d.push(r.localize(36,null,i)):d.push(r.localize(37,null,i)),d.push(""));for(let e in u){const i=e;let n=t.options.filter(e=>!!e.description&&e.cat===i&&o(e));n.length&&(d.push(u[i]),d.push(...c(n,l)),d.push(""))}return d.join("\n")},t.buildVersionMessage=function(e,t){return`${e||r.localize(38,null)}\n${t||r.localize(39,null)}\n${process.arch}`},t.asArray=function(e){return e?Array.isArray(e)?e:[e]:[]},t.hasArgs=function(e){return!(!e||Array.isArray(e)&&!e.length)},t.addArg=function(e,...t){const i=e.indexOf("--");return-1===i?e.push(...t):e.splice(i,0,...t),e},
t.createWaitMarkerFile=function(e){const t=s.join(n.tmpdir(),Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10));try{return o.writeFileSync(t,""),e&&console.log(`Marker file for --wait created: ${t}`),t}catch(t){return void(e&&console.error(`Failed to create marker file for --wait: ${t}`))}}}),define(t[200],i([1,0,6,15,198,8,13,11,7,16,40,22,48,3,2,26,57,203,161,56,14,9,30,49]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,E,C,k){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultWindowState=function(e=1){return{width:1024,height:768,mode:e}};let I=class s extends g.Disposable{constructor(e,t,i,n,r,s,o,a){super(),this.logService=t,this.environmentService=i,this.fileService=n,this.configurationService=r,this.themeMainService=s,this.workspacesMainService=o,this.backupMainService=a,this.touchBarGroups=[],this._lastFocusTime=-1,this._readyState=0,this.whenReadyCallbacks=[],this.createBrowserWindow(e),this.onConfigurationUpdated(),this.createTouchBar(),
this.handleMarketplaceRequests(),this.registerListeners()}createBrowserWindow(e){const[t,n]=this.restoreWindowState(e.state);this.windowState=t;const r=0===this.windowState.mode||3===this.windowState.mode,o={width:this.windowState.width,height:this.windowState.height,x:this.windowState.x,y:this.windowState.y,backgroundColor:this.themeMainService.getBackgroundColor(),minWidth:s.MIN_WIDTH,minHeight:s.MIN_HEIGHT,show:!r,title:f.default.nameLong,webPreferences:{backgroundThrottling:!1,nodeIntegration:!0,nodeIntegrationInWorker:!1,webviewTag:!0}};m.isLinux&&(o.icon=i.join(this.environmentService.appRoot,"resources/linux/code.png"));const a=this.configurationService.getValue("window");m.isMacintosh&&!this.useNativeFullScreen()&&(o.fullscreenable=!1),m.isMacintosh&&(o.acceptFirstMouse=!0,a&&!1===a.clickThroughInactive&&(o.acceptFirstMouse=!1));const l=m.isMacintosh&&a&&!0===a.nativeTabs;l&&(o.tabbingIdentifier=f.default.nameShort)
;const u="custom"===p.getTitleBarStyle(this.configurationService,this.environmentService,!!e.extensionDevelopmentPath);u&&(o.titleBarStyle="hidden",this.hiddenTitleBarStyle=!0,m.isMacintosh||(o.frame=!1)),this._win=new c.BrowserWindow(o),this._id=this._win.id,m.isMacintosh&&u&&this._win.setSheetOffset(22),!m.isMacintosh||!n||l&&1!==c.BrowserWindow.getAllWindows().length||[this.windowState.width,this.windowState.height,this.windowState.x,this.windowState.y].every(e=>"number"==typeof e)&&this._win.setBounds({width:this.windowState.width,height:this.windowState.height,x:this.windowState.x,y:this.windowState.y}),r&&(this._win.maximize(),3===this.windowState.mode&&this.setFullScreen(!0),this._win.isVisible()||this._win.show()),this._lastFocusTime=Date.now()}hasHiddenTitleBarStyle(){return this.hiddenTitleBarStyle}get isExtensionDevelopmentHost(){return!!this.config.extensionDevelopmentPath}get isExtensionTestHost(){return!!this.config.extensionTestsPath}get config(){return this.currentConfig}get id(){
return this._id}get win(){return this._win}setRepresentedFilename(e){m.isMacintosh?this.win.setRepresentedFilename(e):this.representedFilename=e}getRepresentedFilename(){return m.isMacintosh?this.win.getRepresentedFilename():this.representedFilename}focus(){this._win&&(this._win.isMinimized()&&this._win.restore(),this._win.focus())}get lastFocusTime(){return this._lastFocusTime}get backupPath(){return this.currentConfig?this.currentConfig.backupPath:void 0}get openedWorkspace(){return this.currentConfig?this.currentConfig.workspace:void 0}get openedFolderUri(){return this.currentConfig?this.currentConfig.folderUri:void 0}get remoteAuthority(){return this.currentConfig?this.currentConfig.remoteAuthority:void 0}setReady(){for(this._readyState=3;this.whenReadyCallbacks.length;)this.whenReadyCallbacks.pop()(this)}ready(){return new Promise(e=>{if(this.isReady)return e(this);this.whenReadyCallbacks.push(e)})}get isReady(){return 3===this._readyState}handleMarketplaceRequests(){
this.marketplaceHeadersPromise=S.resolveMarketplaceHeaders(k.default.version,this.environmentService,this.fileService);this._win.webContents.session.webRequest.onBeforeSendHeaders({urls:["https://marketplace.visualstudio.com/*","https://*.vsassets.io/*"]},(e,t)=>{this.marketplaceHeadersPromise.then(i=>{const r=n.assign(e.requestHeaders,i);this.configurationService.getValue("extensions.disableExperimentalAzureSearch")||(r.Cookie=`${r.Cookie?r.Cookie+";":""}EnableExternalSearchForVSCode=true`),t({cancel:!1,requestHeaders:r})})})}registerListeners(){if(this._win.webContents.session.webRequest.onBeforeRequest(null,(e,t)=>{if(e.url.indexOf(".svg")>0){const i=a.URI.parse(e.url);if(i&&!i.scheme.match(/file/i)&&_.endsWith(i.path,".svg"))return t({cancel:!0})}return t({})}),this._win.webContents.session.webRequest.onHeadersReceived(null,(e,t)=>{const i=e.responseHeaders,n=i["content-type"]||i["Content-Type"];return t(n&&Array.isArray(n)&&n.some(e=>e.toLowerCase().indexOf("image/svg")>=0)?{cancel:!0}:{cancel:!1,
responseHeaders:i})}),this._win.webContents.on("did-finish-load",()=>{this._readyState=1,this.pendingLoadConfig&&(this.currentConfig=this.pendingLoadConfig,this.pendingLoadConfig=void 0)}),this._win.on("focus",()=>{this._lastFocusTime=Date.now()}),m.isMacintosh){const e=this._register(new E.RunOnceScheduler(()=>{this._win&&!this.useNativeFullScreen()&&this.isFullScreen()&&(this.setFullScreen(!1),this.setFullScreen(!0))},100)),t=()=>e.schedule();c.screen.on("display-metrics-changed",t),this._register(g.toDisposable(()=>c.screen.removeListener("display-metrics-changed",t))),c.screen.on("display-added",t),this._register(g.toDisposable(()=>c.screen.removeListener("display-added",t))),c.screen.on("display-removed",t),this._register(g.toDisposable(()=>c.screen.removeListener("display-removed",t)))}this._win.on("maximize",e=>{this.currentConfig&&(this.currentConfig.maximized=!0),c.app.emit("browser-window-maximize",e,this._win)}),this._win.on("unmaximize",e=>{this.currentConfig&&(this.currentConfig.maximized=!1),
c.app.emit("browser-window-unmaximize",e,this._win)}),this._win.on("enter-full-screen",()=>{this.sendWhenReady("vscode:enterFullScreen")}),this._win.on("leave-full-screen",()=>{this.sendWhenReady("vscode:leaveFullScreen")}),this._win.webContents.on("did-fail-load",(e,t,i,n,r)=>{this.logService.warn("[electron event]: fail to load, ",i)}),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationUpdated())),this._register(this.workspacesMainService.onUntitledWorkspaceDeleted(e=>this.onUntitledWorkspaceDeleted(e)))}onUntitledWorkspaceDeleted(e){this.openedWorkspace&&this.openedWorkspace.id===e.id&&(this.currentConfig.workspace=void 0)}onConfigurationUpdated(){const e=this.getMenuBarVisibility();e!==this.currentMenuBarVisibility&&(this.currentMenuBarVisibility=e,this.setMenuBarVisibility(e))}addTabbedWindow(e){m.isMacintosh&&this._win.addTabbedWindow(e.win)}load(e,t,i){0===this._readyState?this.currentConfig=e:(this.pendingLoadConfig=e,this._readyState=2);const r=n.assign({},e)
;void 0!==i&&(r["disable-extensions"]=i),m.isMacintosh&&this._win.isDocumentEdited()&&(t&&this.backupMainService.isHotExitEnabled()||this._win.setDocumentEdited(!1)),t||(this.getRepresentedFilename()&&this.setRepresentedFilename(""),this._win.setTitle(f.default.nameLong)),y.mark("main:loadWindow"),this._win.loadURL(this.getUrl(r)),this.environmentService.isBuilt||this.environmentService.extensionTestsLocationURI||(this.showTimeoutHandle=setTimeout(()=>{!this._win||this._win.isVisible()||this._win.isMinimized()||(this._win.show(),this._win.focus(),this._win.webContents.openDevTools())},1e4))}reload(e,t){const i=e||n.mixin({},this.currentConfig);delete i.filesToOpenOrCreate,delete i.filesToDiff,delete i.filesToWait,this.isExtensionDevelopmentHost&&t&&(i.verbose=t.verbose,i["inspect-extensions"]=t["inspect-extensions"],i["inspect-brk-extensions"]=t["inspect-brk-extensions"],i.debugId=t.debugId,i["extensions-dir"]=t["extensions-dir"]),i.isInitialStartup=!1;const r=t?t["disable-extensions"]:void 0
;this.load(i,!0,r)}getUrl(e){e.windowId=this._win.id,e.logLevel=this.logService.getLevel();const t=this.configurationService.getValue("window"),r=t&&t.zoomLevel;"number"==typeof r&&(e.zoomLevel=r),e.fullscreen=this.isFullScreen();let o=!0;t&&!1===t.autoDetectHighContrast&&(o=!1),e.highContrast=m.isWindows&&o&&c.systemPreferences.isInvertedColorScheme(),e.accessibilitySupport=c.app.isAccessibilitySupportEnabled(),e.maximized=this._win.isMaximized(),e.frameless=this.hasHiddenTitleBarStyle()&&!m.isMacintosh,e.perfEntries=y.exportEntries(),e.partsSplashPath=i.join(this.environmentService.userDataPath,"rapid_render.json");const a=h.parseArgs(process.argv),l=n.assign(a,e);for(const e in l){const t=l[e];void 0!==t&&null!==t&&""!==t&&!1!==t||delete l[e]}let u=this.doGetUrl(l);return u.length>s.MAX_URL_LENGTH&&(delete l.userEnv,this.logService.warn("Application URL exceeds maximum of 2MB and was shortened."),
(u=this.doGetUrl(l)).length>s.MAX_URL_LENGTH&&this.logService.error("Application URL exceeds maximum of 2MB and cannot be loaded.")),u}doGetUrl(t){return`${e.toUrl("vs/code/electron-browser/workbench/workbench.html")}?config=${encodeURIComponent(JSON.stringify(t))}`}serializeWindowState(){if(!this._win)return t.defaultWindowState();if(this.isFullScreen()){const e=c.screen.getDisplayMatching(this.getBounds()),i=t.defaultWindowState();return{mode:3,display:e?e.id:void 0,width:this.windowState.width||i.width,height:this.windowState.height||i.height,x:this.windowState.x||0,y:this.windowState.y||0}}const e=Object.create(null);let i;if(i=!m.isMacintosh&&this._win.isMaximized()?0:1,e.mode=0===i?0:1,1===i||0===i){let t;t=1===i?this.getBounds():this._win.getNormalBounds(),e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height}return e}restoreWindowState(e){let i=!1;if(e)try{const t=c.screen.getAllDisplays();i=t.length>1,e=this.validateWindowState(e,t)}catch(e){
this.logService.warn(`Unexpected error validating window state: ${e}\n${e.stack}`)}return[e||t.defaultWindowState(),i]}validateWindowState(e,i){if("number"!=typeof e.x||"number"!=typeof e.y||"number"!=typeof e.width||"number"!=typeof e.height)return;if(e.width<=0||e.height<=0)return;if(1===i.length){const t=this.getWorkingArea(i[0]);return t&&(e.x<t.x&&(e.x=t.x),e.y<t.y&&(e.y=t.y),e.x>t.x+t.width&&(e.x=t.x),e.y>t.y+t.height&&(e.y=t.y),e.width>t.width&&(e.width=t.width),e.height>t.height&&(e.height=t.height)),e}if(e.display&&3===e.mode){const n=i.filter(t=>t.id===e.display)[0];if(n&&n.bounds&&"number"==typeof n.bounds.x&&"number"==typeof n.bounds.y){const e=t.defaultWindowState(3);return e.x=n.bounds.x,e.y=n.bounds.y,e}}const n={x:e.x,y:e.y,width:e.width,height:e.height},r=c.screen.getDisplayMatching(n),s=this.getWorkingArea(r);return r&&s&&n.x<s.x+s.width&&n.y<s.y+s.height&&n.x+n.width>s.x&&n.y+n.height>s.y?e:void 0}getWorkingArea(e){
return e.workArea.width>0&&e.workArea.height>0?e.workArea:e.bounds.width>0&&e.bounds.height>0?e.bounds:void 0}getBounds(){const e=this._win.getPosition(),t=this._win.getSize();return{x:e[0],y:e[1],width:t[0],height:t[1]}}toggleFullScreen(){this.setFullScreen(!this.isFullScreen())}setFullScreen(e){this.useNativeFullScreen()?this.setNativeFullScreen(e):this.setSimpleFullScreen(e),this.sendWhenReady(e?"vscode:enterFullScreen":"vscode:leaveFullScreen"),this.setMenuBarVisibility(this.currentMenuBarVisibility,!1)}isFullScreen(){return this._win.isFullScreen()||this._win.isSimpleFullScreen()}setNativeFullScreen(e){this._win.isSimpleFullScreen()&&this._win.setSimpleFullScreen(!1),this._win.setFullScreen(e)}setSimpleFullScreen(e){this._win.isFullScreen()&&this._win.setFullScreen(!1),this._win.setSimpleFullScreen(e),this._win.webContents.focus()}useNativeFullScreen(){const e=this.configurationService.getValue("window");return!e||"boolean"!=typeof e.nativeFullScreen||(!!e.nativeTabs||!1!==e.nativeFullScreen)}
isMinimized(){return this._win.isMinimized()}getMenuBarVisibility(){const e=this.configurationService.getValue("window");if(!e||!e.menuBarVisibility)return"default";let t=e.menuBarVisibility;return["visible","toggle","hidden"].indexOf(t)<0&&(t="default"),t}setMenuBarVisibility(e,t=!0){m.isMacintosh||("toggle"===e&&t&&this.send("vscode:showInfoMessage",r.localize(0,null)),"hidden"===e?setTimeout(()=>{this.doSetMenuBarVisibility(e)}):this.doSetMenuBarVisibility(e))}doSetMenuBarVisibility(e){const t=this.isFullScreen();switch(e){case"default":this._win.setMenuBarVisibility(!t),this._win.setAutoHideMenuBar(t);break;case"visible":this._win.setMenuBarVisibility(!0),this._win.setAutoHideMenuBar(!1);break;case"toggle":this._win.setMenuBarVisibility(!1),this._win.setAutoHideMenuBar(!0);break;case"hidden":this._win.setMenuBarVisibility(!1),this._win.setAutoHideMenuBar(!1)}}onWindowTitleDoubleClick(){if(m.isMacintosh){switch(c.systemPreferences.getUserDefault("AppleActionOnDoubleClick","string")){case"Minimize":
this.win.minimize();break;case"None":break;case"Maximize":default:this.win.isMaximized()?this.win.unmaximize():this.win.maximize()}}else this.win.isMaximized()?this.win.unmaximize():this.win.maximize()}close(){this._win&&this._win.close()}sendWhenReady(e,...t){this.isReady?this.send(e,...t):this.ready().then(()=>this.send(e,...t))}send(e,...t){this._win&&this._win.webContents.send(e,...t)}updateTouchBar(e){m.isMacintosh&&this.touchBarGroups.forEach((t,i)=>{const n=e[i];t.segments=this.createTouchBarGroupSegments(n)})}createTouchBar(){if(m.isMacintosh){for(let e=0;e<10;e++){const e=this.createTouchBarGroup();this.touchBarGroups.push(e)}this._win.setTouchBar(new c.TouchBar({items:this.touchBarGroups}))}}createTouchBarGroup(e=[]){const t=this.createTouchBarGroupSegments(e),i=new c.TouchBar.TouchBarSegmentedControl({segments:t,mode:"buttons",segmentStyle:"automatic",change:e=>{this.sendWhenReady("vscode:runAction",{id:i.segments[e].id,from:"touchbar"})}});return i}createTouchBarGroupSegments(e=[]){
return e.map(e=>{let t;e.iconLocation&&"file"===e.iconLocation.dark.scheme&&(t=c.nativeImage.createFromPath(a.URI.revive(e.iconLocation.dark).fsPath)).isEmpty()&&(t=void 0);let i;return i="string"==typeof e.title?e.title:e.title.value,{id:e.id,label:t?void 0:i,icon:t}})}dispose(){super.dispose(),this.showTimeoutHandle&&clearTimeout(this.showTimeoutHandle),this._win=null}};I.MIN_WIDTH=200,I.MIN_HEIGHT=120,I.MAX_URL_LENGTH=2097152,I=s([o(1,u.ILogService),o(2,l.IEnvironmentService),o(3,C.IFileService),o(4,d.IConfigurationService),o(5,b.IThemeMainService),o(6,v.IWorkspacesMainService),o(7,w.IBackupMainService)],I),t.CodeWindow=I}),define(t[202],i([1,0,20,6,199,25,15,57,11,38,200,40,13,76,24,16,7,48,190,4,22,28,44,2,26,5,45,23,55,8,9,17,21,67,154,80,50,3]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,E,C,k,I,P,M,A,D,O,W,L,R,F,T,x,U,N,B){"use strict";function j(e){return!!e.folderUri}function z(e){return!!e.workspace}function $(e){
return S.isWorkspaceToOpen(e)?e.workspaceUri:S.isFolderToOpen(e)?e.folderUri:e.fileUri}Object.defineProperty(t,"__esModule",{value:!0});var K;!function(e){e[e.UNRESPONSIVE=1]="UNRESPONSIVE",e[e.CRASHED=2]="CRASHED"}(K||(K={}));let q=class t extends B.Disposable{constructor(e,i,n,r,s,o,a,c,l,u,d,h){super(),this.machineId=e,this.initialUserEnv=i,this.logService=n,this.stateService=r,this.environmentService=s,this.lifecycleService=o,this.backupMainService=a,this.telemetryService=c,this.configurationService=l,this.historyMainService=u,this.workspacesMainService=d,this.instantiationService=h,this._onWindowReady=this._register(new _.Emitter),this.onWindowReady=this._onWindowReady.event,this._onWindowClose=this._register(new _.Emitter),this.onWindowClose=this._onWindowClose.event,this._onWindowLoad=this._register(new _.Emitter),this.onWindowLoad=this._onWindowLoad.event,this._onWindowsCountChanged=this._register(new _.Emitter),this.onWindowsCountChanged=this._onWindowsCountChanged.event
;const f=this.stateService.getItem(t.windowsStateStorageKey);this.windowsState=x.restoreWindowsState(f),Array.isArray(this.windowsState.openedWindows)||(this.windowsState.openedWindows=[]),this.dialogs=new H(r,this),this.workspacesManager=new V(d,a,this),this.lifecycleService.when(2).then(()=>this.registerListeners()),this.lifecycleService.when(3).then(()=>this.installWindowsMutex())}installWindowsMutex(){if(I.isWindows)try{const t=new(0,e.__$__nodeRequire("windows-mutex").Mutex)(E.default.win32MutexName);N.once(this.lifecycleService.onWillShutdown)(()=>t.release())}catch(e){this.logService.error(e)}}registerListeners(){g.ipcMain.on("vscode:workbenchReady",(e,t)=>{this.logService.trace("IPC#vscode-workbenchReady");const i=this.getWindowById(t);i&&(i.setReady(),this._onWindowReady.fire(i))}),I.isWindows&&g.systemPreferences.on("inverted-color-scheme-changed",()=>{g.systemPreferences.isInvertedColorScheme()?this.sendToAll("vscode:enterHighContrast"):this.sendToAll("vscode:leaveHighContrast")}),
this.lifecycleService.onBeforeWindowClose(e=>this.onBeforeWindowClose(e)),this.lifecycleService.onBeforeShutdown(()=>this.onBeforeShutdown()),this.onWindowsCountChanged(e=>{e.newCount-e.oldCount>0&&(this.lastClosedWindowState=void 0)})}onBeforeShutdown(){const e={openedWindows:[],lastPluginDevelopmentHostWindow:this.windowsState.lastPluginDevelopmentHostWindow,lastActiveWindow:this.lastClosedWindowState};if(!e.lastActiveWindow){let i=this.getLastActiveWindow();i&&!i.isExtensionDevelopmentHost||(i=t.WINDOWS.filter(e=>!e.isExtensionDevelopmentHost)[0]),i&&(e.lastActiveWindow=this.toWindowState(i))}const i=t.WINDOWS.filter(e=>e.isExtensionDevelopmentHost&&!e.isExtensionTestHost)[0];i&&(e.lastPluginDevelopmentHostWindow=this.toWindowState(i)),this.getWindowCount()>1&&(e.openedWindows=t.WINDOWS.filter(e=>!e.isExtensionDevelopmentHost).map(e=>this.toWindowState(e))),this.stateService.setItem(t.windowsStateStorageKey,x.getWindowsStateStoreData(e))}onBeforeWindowClose(e){if(this.lifecycleService.quitRequested)return
;const t=this.toWindowState(e);e.isExtensionDevelopmentHost&&!e.isExtensionTestHost?this.windowsState.lastPluginDevelopmentHostWindow=t:e.isExtensionDevelopmentHost||!e.openedWorkspace&&!e.openedFolderUri||this.windowsState.openedWindows.forEach(i=>{const n=e.openedWorkspace&&i.workspace&&i.workspace.id===e.openedWorkspace.id,r=e.openedFolderUri&&i.folderUri&&F.isEqual(i.folderUri,e.openedFolderUri);(n||r)&&(i.uiState=t.uiState)}),1===this.getWindowCount()&&(this.lastClosedWindowState=t)}toWindowState(e){return{workspace:e.openedWorkspace,folderUri:e.openedFolderUri,backupPath:e.backupPath,remoteAuthority:e.remoteAuthority,uiState:e.serializeWindowState()}}open(e){this.logService.trace("windowsManager#open"),e=this.validateOpenConfig(e);const t=this.getPathsToOpen(e),n=[],s=[],o=[],a=[];let c,l=0;for(const i of t)j(i)?e.addMode?n.push(i):s.push(i):z(i)?o.push(i):i.fileUri?(c||(c={filesToOpenOrCreate:[],filesToDiff:[],remoteAuthority:i.remoteAuthority}),c.filesToOpenOrCreate.push(i)):i.backupPath?a.push({
backupFolder:r.basename(i.backupPath),remoteAuthority:i.remoteAuthority}):l++;c&&e.diffMode&&2===c.filesToOpenOrCreate.length&&(c.filesToDiff=c.filesToOpenOrCreate,c.filesToOpenOrCreate=[]),c&&e.waitMarkerFileURI&&(c.filesToWait={paths:[...c.filesToDiff,...c.filesToOpenOrCreate],waitMarkerFileUri:e.waitMarkerFileURI});let u=[],d=[];if(!e.initialStartup||e.cli.extensionDevelopmentPath||e.cli["disable-restore-windows"])a.length=0;else{let e=this.backupMainService.getFolderBackupPaths();n.push(...e.map(e=>({folderUri:e,remoteAuhority:T.getRemoteAuthority(e),isRestored:!0}))),d=[...this.backupMainService.getWorkspaceBackups(),...this.workspacesMainService.getUntitledWorkspacesSync()],o.push(...d),a.push(...this.backupMainService.getEmptyWindowBackupPaths())}const h=this.doOpen(e,o,s,a,l,c,n);if(h.length>1){let t=!0,i=!0;if(this.windowsState.lastActiveWindow&&!e.forceEmpty&&!p.hasArgs(e.cli._)&&!p.hasArgs(e.cli["file-uri"])&&!p.hasArgs(e.cli["folder-uri"])&&!(e.urisToOpen&&e.urisToOpen.length)){
const e=h.filter(e=>e.backupPath===this.windowsState.lastActiveWindow.backupPath);e.length&&(e[0].focus(),t=!1,i=!1)}if(t)for(let e=h.length-1;e>=0;e--){const t=h[e];if(!(t.openedWorkspace&&d.some(e=>e.workspace.id===t.openedWorkspace.id)||t.openedFolderUri&&u.some(e=>F.isEqual(e,t.openedFolderUri))||t.backupPath&&a.some(e=>e.backupFolder===r.basename(t.backupPath)))){t.focus(),i=!1;break}}i&&h[h.length-1].focus()}if(!h.some(e=>e.isExtensionDevelopmentHost)&&!e.diffMode&&!e.noRecentEntry){const e=[];for(let i of t)i.workspace?e.push({label:i.label,workspace:i.workspace}):i.folderUri?e.push({label:i.label,folderUri:i.folderUri}):i.fileUri&&e.push({label:i.label,fileUri:i.fileUri});this.historyMainService.addRecentlyOpened(e)}const f=e.waitMarkerFileURI;return 0===e.context&&f&&1===h.length&&h[0]&&this.waitForWindowCloseOrLoad(h[0].id).then(()=>i.unlink(f.fsPath,e=>void 0)),h}validateOpenConfig(e){return!e.addMode||!e.initialStartup&&this.getLastActiveWindow()||(e.addMode=!1),e}doOpen(e,i,n,r,s,o,a){const l=[]
;let{openFolderInNewWindow:u,openFilesInNewWindow:d}=this.shouldOpenNewWindow(e);if(!e.initialStartup&&a.length>0){const e=a[0].remoteAuthority,t=this.getLastActiveWindowForAuthority(e);t&&l.push(this.doAddFoldersToExistingWindow(t,a.map(e=>e.folderUri)))}if(0===n.length+i.length+r.length&&o){const r=o.filesToOpenOrCreate[0]||o.filesToDiff[0],s=t.WINDOWS.filter(e=>e.remoteAuthority===o.remoteAuthority),a=b.findBestWindowOrFolderForFile({windows:s,newWindow:d,context:e.context,fileUri:r&&r.fileUri,localWorkspaceResolver:e=>e.configPath.scheme===D.Schemas.file?this.workspacesMainService.resolveLocalWorkspaceSync(e.configPath):null});a instanceof f.CodeWindow?a.openedWorkspace?i.push({workspace:a.openedWorkspace,remoteAuthority:a.remoteAuthority}):a.openedFolderUri?n.push({folderUri:a.openedFolderUri,remoteAuthority:a.remoteAuthority}):(l.push(this.doOpenFilesInExistingWindow(e,a,o)),o=void 0):(l.push(this.openInBrowserWindow({userEnv:e.userEnv,cli:e.cli,initialStartup:e.initialStartup,fileInputs:o,
forceNewWindow:!0,remoteAuthority:o.remoteAuthority,forceNewTabbedWindow:e.forceNewTabbedWindow})),o=void 0)}const h=c.distinct(i,e=>e.workspace.id);if(h.length>0){const i=c.coalesce(h.map(e=>b.findWindowOnWorkspace(t.WINDOWS,e.workspace)));if(i.length>0){const t=i[0],n=o&&o.remoteAuthority===t.remoteAuthority?o:void 0;l.push(this.doOpenFilesInExistingWindow(e,t,n)),n&&(o=void 0),u=!0}h.forEach(t=>{if(i.some(e=>e.openedWorkspace.id===t.workspace.id))return;const n=t.remoteAuthority,r=o&&o.remoteAuthority===n?o:void 0;l.push(this.doOpenFolderOrWorkspace(e,t,u,r)),r&&(o=void 0),u=!0})}const p=c.distinct(n,e=>F.getComparisonKey(e.folderUri));if(p.length>0){const i=c.coalesce(p.map(e=>b.findWindowOnWorkspace(t.WINDOWS,e.folderUri)));if(i.length>0){const t=i[0],n=o&&o.remoteAuthority===t.remoteAuthority?o:void 0;l.push(this.doOpenFilesInExistingWindow(e,t,n)),n&&(o=void 0),u=!0}p.forEach(t=>{if(i.some(e=>F.isEqual(e.openedFolderUri,t.folderUri)))return;const n=t.remoteAuthority,r=o&&o.remoteAuthority===n?o:void 0
;l.push(this.doOpenFolderOrWorkspace(e,t,u,r)),r&&(o=void 0),u=!0})}const g=c.distinct(r,e=>e.backupFolder);if(g.length>0&&g.forEach(t=>{const i=t.remoteAuthority,n=o&&o.remoteAuthority===i?o:void 0;l.push(this.openInBrowserWindow({userEnv:e.userEnv,cli:e.cli,initialStartup:e.initialStartup,fileInputs:n,remoteAuthority:i,forceNewWindow:!0,forceNewTabbedWindow:e.forceNewTabbedWindow,emptyWindowBackupInfo:t})),n&&(o=void 0),u=!0}),0===l.length||o){o&&!s&&s++;const t=o?o.remoteAuthority:e.cli&&e.cli.remote||void 0;for(let i=0;i<s;i++)l.push(this.openInBrowserWindow({userEnv:e.userEnv,cli:e.cli,initialStartup:e.initialStartup,remoteAuthority:t,forceNewWindow:u,forceNewTabbedWindow:e.forceNewTabbedWindow,fileInputs:o})),o=void 0,u=!0}return c.distinct(l)}doOpenFilesInExistingWindow(e,t,i){t.focus();const n={};return i&&(n.filesToOpenOrCreate=i.filesToOpenOrCreate,n.filesToDiff=i.filesToDiff,n.filesToWait=i.filesToWait),e.userEnv&&(n.termProgram=e.userEnv.TERM_PROGRAM),t.sendWhenReady("vscode:openFiles",n),t}
doAddFoldersToExistingWindow(e,t){return e.focus(),e.sendWhenReady("vscode:addFolders",{foldersToAdd:t}),e}doOpenFolderOrWorkspace(e,t,i,n,r){i||r||"number"!=typeof e.contextWindowId||(r=this.getWindowById(e.contextWindowId));return this.openInBrowserWindow({userEnv:e.userEnv,cli:e.cli,initialStartup:e.initialStartup,workspace:t.workspace,folderUri:t.folderUri,fileInputs:n,remoteAuthority:t.remoteAuthority,forceNewWindow:i,forceNewTabbedWindow:e.forceNewTabbedWindow,windowToUse:r})}getPathsToOpen(e){let t,i=!1;if(e.urisToOpen&&e.urisToOpen.length>0?(t=this.doExtractPathsFromAPI(e),i=!0):e.forceEmpty?t=[Object.create(null)]:p.hasArgs(e.cli._)||p.hasArgs(e.cli["folder-uri"])||p.hasArgs(e.cli["file-uri"])?(t=this.doExtractPathsFromCLI(e.cli),i=!0):t=this.doGetWindowsFromLastSession(),!e.addMode&&i){const e=t.filter(e=>!!e.folderUri);if(e.length>1){const i=e[0].remoteAuthority;if(e.every(e=>e.remoteAuthority===i)){const n=this.workspacesMainService.createUntitledWorkspaceSync(e.map(e=>({uri:e.folderUri})))
;t.push({workspace:n,remoteAuthority:i}),t=t.filter(e=>!e.folderUri)}}}return t}doExtractPathsFromAPI(e){const t=[],i={gotoLineMode:e.gotoLineMode};for(const n of e.urisToOpen||[]){if(!n)continue;const e=this.parseUri(n,i);if(e)e.label=n.label,t.push(e);else{const e=$(n);let t,i;e.scheme===D.Schemas.file?(t=a.localize(0,null),i=a.localize(1,null,e.fsPath)):(t=a.localize(2,null),i=a.localize(3,null,e.toString()));const r={title:E.default.nameLong,type:"info",buttons:[a.localize(4,null)],message:t,detail:i,noLink:!0};this.dialogs.showMessageBox(r,this.getFocusedWindow())}}return t}doExtractPathsFromCLI(e){const t=[],i={ignoreFileNotFound:!0,gotoLineMode:e.goto,remoteAuthority:e.remote||void 0},n=p.asArray(e["folder-uri"]);for(let e of n){const n=this.argToUri(e);if(n){const e=this.parseUri({folderUri:n},i);e&&t.push(e)}}const r=p.asArray(e["file-uri"]);for(let e of r){const n=this.argToUri(e);if(n){const r=this.parseUri(P.hasWorkspaceFileExtension(e)?{workspaceUri:n}:{fileUri:n},i);r&&t.push(r)}}
const s=p.asArray(e._);for(let e of s){const n=this.parsePath(e,i);n&&t.push(n)}return t.length?t:[Object.create(null)]}doGetWindowsFromLastSession(){const e=this.getRestoreWindowsSetting();switch(e){case"none":return[Object.create(null)];case"one":case"all":case"folders":const t=[];"one"!==e&&t.push(...this.windowsState.openedWindows),this.windowsState.lastActiveWindow&&t.push(this.windowsState.lastActiveWindow);const i=[];for(const n of t)if(n.workspace){const e=this.parseUri({workspaceUri:n.workspace.configPath},{remoteAuthority:n.remoteAuthority});e&&e.workspace&&i.push(e)}else if(n.folderUri){const e=this.parseUri({folderUri:n.folderUri},{remoteAuthority:n.remoteAuthority});e&&e.folderUri&&i.push(e)}else"folders"!==e&&n.backupPath&&!n.remoteAuthority&&i.push({backupPath:n.backupPath,remoteAuthority:n.remoteAuthority});if(i.length>0)return i}return[Object.create(null)]}getRestoreWindowsSetting(){let e;if(this.lifecycleService.wasRestarted)e="all";else{const t=this.configurationService.getValue("window")
;e=t&&t.restoreWindows||"one",-1===["all","folders","one","none"].indexOf(e)&&(e="one")}return e}argToUri(e){try{const t=W.URI.parse(e);return t.scheme?t:void this.logService.error(`Invalid URI input string, scheme missing: ${e}`)}catch(t){this.logService.error(`Invalid URI input string: ${e}, ${t.message}`)}}parseUri(e,t={}){if(!e)return;let i=$(e);if(i.scheme===D.Schemas.file)return this.parsePath(i.fsPath,t,S.isFileToOpen(e));const n=t.remoteAuthority||T.getRemoteAuthority(i);if(i=F.normalizePath(i),F.hasTrailingPathSeparator(i)&&(i=F.removeTrailingPathSeparator(i)),S.isFileToOpen(e)){if(t.gotoLineMode){const e=m.parseLineAndColumnAware(i.path);return{fileUri:i.with({path:e.path}),lineNumber:e.line,columnNumber:e.column,remoteAuthority:n}}return{fileUri:i,remoteAuthority:n}}return S.isWorkspaceToOpen(e)?{workspace:U.getWorkspaceIdentifier(i),remoteAuthority:n}:{folderUri:i,remoteAuthority:n}}parsePath(e,t,n){if(!e)return;let s,o;if(t.gotoLineMode){const t=m.parseLineAndColumnAware(e);s=t.line,o=t.column,
e=t.path}const a=t.remoteAuthority,c=r.normalize(e);try{const e=i.statSync(c);if(e.isFile()){if(!n){const e=this.workspacesMainService.resolveLocalWorkspaceSync(W.URI.file(c));if(e)return{workspace:{id:e.id,configPath:e.configPath},remoteAuthority:e.remoteAuthority,exists:!0}}return{fileUri:W.URI.file(c),lineNumber:s,columnNumber:o,remoteAuthority:a,exists:!0}}if(e.isDirectory())return{folderUri:W.URI.file(c),remoteAuthority:a,exists:!0}}catch(e){const i=W.URI.file(c);if(this.historyMainService.removeFromRecentlyOpened([i]),t&&t.ignoreFileNotFound)return{fileUri:i,remoteAuthority:a,exists:!1}}}shouldOpenNewWindow(e){const t=this.configurationService.getValue("window"),i=t&&t.openFoldersInNewWindow||"default",n=t&&t.openFilesInNewWindow||"off";let r=(e.preferNewWindow||e.forceNewWindow)&&!e.forceReuseWindow;e.forceNewWindow||e.forceReuseWindow||"on"!==i&&"off"!==i||(r="on"===i);let s=!1
;return e.forceNewWindow||e.forceReuseWindow?s=!!e.forceNewWindow&&!e.forceReuseWindow:(I.isMacintosh?1===e.context&&(s=!0):3===e.context||2===e.context||e.userEnv&&"vscode"===e.userEnv.TERM_PROGRAM||(s=!0),e.cli.extensionDevelopmentPath||"on"!==n&&"off"!==n||(s="on"===n)),{openFolderInNewWindow:!!r,openFilesInNewWindow:s}}openExtensionDevelopmentHostWindow(e,i){const n=b.findWindowOnExtensionDevelopmentPath(t.WINDOWS,e);if(n)return this.reload(n,i.cli),void n.focus();let r=p.asArray(i.cli["folder-uri"]),s=p.asArray(i.cli["file-uri"]),o=i.cli._;if(!(o.length||r.length||s.length||i.cli.extensionTestsPath)){const e=this.windowsState.lastPluginDevelopmentHostWindow,t=e&&(e.workspace||e.folderUri);t&&(P.isSingleFolderWorkspaceIdentifier(t)?t.scheme===D.Schemas.file?o=[t.fsPath]:r=[t.toString()]:t.configPath.scheme===D.Schemas.file?o=[F.originalFSPath(t.configPath)]:s=[t.configPath.toString()])}Array.isArray(e)||(e=[e]);let a="";for(let t of e)if(t.match(/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/)){const e=W.URI.parse(t)
;e.scheme===D.Schemas.vscodeRemote&&(a?e.authority!==a&&this.logService.error("more than one extension development path authority"):a=e.authority)}o=o.filter(e=>{const i=W.URI.file(e);return!b.findWindowOnWorkspaceOrFolderUri(t.WINDOWS,i)&&i.authority===a}),r=r.filter(e=>{const i=this.argToUri(e);return!b.findWindowOnWorkspaceOrFolderUri(t.WINDOWS,i)&&(!!i&&i.authority===a)}),s=s.filter(e=>{const i=this.argToUri(e);return!b.findWindowOnWorkspaceOrFolderUri(t.WINDOWS,i)&&(!!i&&i.authority===a)}),i.cli._=o,i.cli["folder-uri"]=r,i.cli["file-uri"]=s;const c=!o.length&&!r.length&&!s.length;c&&a&&(i.cli.remote=a);const l={context:i.context,cli:i.cli,forceNewWindow:!0,forceEmpty:c,userEnv:i.userEnv,noRecentEntry:!0,waitMarkerFileURI:i.waitMarkerFileURI};this.open(l)}openInBrowserWindow(e){const i=l.mixin({},e.cli);i.appRoot=this.environmentService.appRoot,i.machineId=this.machineId,i.nodeCachedDataDir=this.environmentService.nodeCachedDataDir,i.mainPid=process.pid,i.execPath=process.execPath,
i.userEnv=l.assign({},this.initialUserEnv,e.userEnv||{}),i.isInitialStartup=e.initialStartup,i.workspace=e.workspace,i.folderUri=e.folderUri,i.remoteAuthority=e.remoteAuthority;const n=e.fileInputs;n&&(i.filesToOpenOrCreate=n.filesToOpenOrCreate,i.filesToDiff=n.filesToDiff,i.filesToWait=n.filesToWait),e.emptyWindowBackupInfo&&(i.backupPath=r.join(this.environmentService.backupHome.fsPath,e.emptyWindowBackupInfo.backupFolder));let s;if(e.forceNewWindow||e.forceNewTabbedWindow||(s=e.windowToUse||this.getLastActiveWindow())&&s.focus(),s){const e=s.config;!i.extensionDevelopmentPath&&e&&e.extensionDevelopmentPath&&(i.extensionDevelopmentPath=e.extensionDevelopmentPath,i.verbose=e.verbose,i["inspect-brk-extensions"]=e["inspect-brk-extensions"],i.debugId=e.debugId,i["inspect-extensions"]=e["inspect-extensions"],i["extensions-dir"]=e["extensions-dir"])}else{const n=this.configurationService.getValue("window"),r=this.getNewWindowState(i);let o
;if(o=r.hasDefaultState?n&&n.newWindowDimensions&&["fullscreen","inherit"].indexOf(n.newWindowDimensions)>=0:this.lifecycleService.wasRestarted||n&&n.restoreFullscreen,3!==r.mode||o||(r.mode=1),s=this.instantiationService.createInstance(f.CodeWindow,{state:r,extensionDevelopmentPath:i.extensionDevelopmentPath,isExtensionTestHost:!!i.extensionTestsPath}),e.forceNewTabbedWindow){const e=this.getLastActiveWindow();e&&e.addTabbedWindow(s)}t.WINDOWS.push(s),this._onWindowsCountChanged.fire({oldCount:t.WINDOWS.length-1,newCount:t.WINDOWS.length}),s.win.webContents.removeAllListeners("devtools-reload-page"),s.win.webContents.on("devtools-reload-page",()=>this.reload(s)),s.win.webContents.on("crashed",()=>this.onWindowError(s,2)),s.win.on("unresponsive",()=>this.onWindowError(s,1)),s.win.on("closed",()=>this.onWindowClosed(s)),this.lifecycleService.registerWindow(s)}return s.isReady?this.lifecycleService.unload(s,4).then(t=>{t||this.doOpenInBrowserWindow(s,i,e)}):this.doOpenInBrowserWindow(s,i,e),s}
doOpenInBrowserWindow(e,t,i){if(!t.extensionDevelopmentPath)if(t.workspace)t.backupPath=this.backupMainService.registerWorkspaceBackupSync({workspace:t.workspace,remoteAuthority:t.remoteAuthority});else if(t.folderUri)t.backupPath=this.backupMainService.registerFolderBackupSync(t.folderUri);else{const e=i.emptyWindowBackupInfo&&i.emptyWindowBackupInfo.backupFolder;t.backupPath=this.backupMainService.registerEmptyWindowBackupSync(e,t.remoteAuthority)}e.load(t),this._onWindowLoad.fire(e.id)}getNewWindowState(e){const t=this.getLastActiveWindow();if(!e.extensionTestsPath){if(e.extensionDevelopmentPath&&this.windowsState.lastPluginDevelopmentHostWindow)return this.windowsState.lastPluginDevelopmentHostWindow.uiState;const i=e.workspace;if(i){const e=this.windowsState.openedWindows.filter(e=>e.workspace&&e.workspace.id===i.id).map(e=>e.uiState);if(e.length)return e[0]}if(e.folderUri){const t=this.windowsState.openedWindows.filter(t=>t.folderUri&&F.isEqual(t.folderUri,e.folderUri)).map(e=>e.uiState)
;if(t.length)return t[0]}else if(e.backupPath){const t=this.windowsState.openedWindows.filter(t=>t.backupPath===e.backupPath).map(e=>e.uiState);if(t.length)return t[0]}const n=this.lastClosedWindowState||this.windowsState.lastActiveWindow;if(!t&&n)return n.uiState}let i;const n=g.screen.getAllDisplays();if(1===n.length)i=n[0];else{if(I.isMacintosh){const e=g.screen.getCursorScreenPoint();i=g.screen.getDisplayNearestPoint(e)}!i&&t&&(i=g.screen.getDisplayMatching(t.getBounds())),i||(i=g.screen.getPrimaryDisplay()||n[0])}let r=f.defaultWindowState();r.x=Math.round(i.bounds.x+i.bounds.width/2-r.width/2),r.y=Math.round(i.bounds.y+i.bounds.height/2-r.height/2);const s=this.configurationService.getValue("window");let o=!0;if(s&&s.newWindowDimensions)if("maximized"===s.newWindowDimensions)r.mode=0,o=!1;else if("fullscreen"===s.newWindowDimensions)r.mode=3,o=!1;else if("inherit"===s.newWindowDimensions&&t){const e=t.serializeWindowState();3===e.mode?r.mode=3:r=e,o=!1}return o&&(r=this.ensureNoOverlap(r)),
r.hasDefaultState=!0,r}ensureNoOverlap(e){if(0===t.WINDOWS.length)return e;e.x="number"==typeof e.x?e.x:0,e.y="number"==typeof e.y?e.y:0;const i=t.WINDOWS.map(e=>e.getBounds());for(;i.some(t=>t.x===e.x||t.y===e.y);)e.x+=30,e.y+=30;return e}reload(e,t){return n(this,void 0,void 0,function*(){(yield this.lifecycleService.unload(e,3))||e.reload(void 0,t)})}closeWorkspace(e){this.openInBrowserWindow({cli:this.environmentService.args,windowToUse:e,remoteAuthority:e.remoteAuthority})}enterWorkspace(e,t){return n(this,void 0,void 0,function*(){const i=yield this.workspacesManager.enterWorkspace(e,t);return i?this.doEnterWorkspace(e,i):void 0})}doEnterWorkspace(e,t){return this.historyMainService.addRecentlyOpened([{workspace:t.workspace}]),this._onWindowReady.fire(e),t}focusLastActive(e,t){const i=this.getLastActiveWindow();return i?(i.focus(),i):this.open({context:t,cli:e,forceEmpty:!0})[0]}getLastActiveWindow(){return b.getLastActiveWindow(t.WINDOWS)}getLastActiveWindowForAuthority(e){
return b.getLastActiveWindow(t.WINDOWS.filter(t=>t.remoteAuthority===e))}openNewWindow(e,t){let i=this.environmentService.args;const n=t&&t.remoteAuthority||void 0;i&&i.remote!==n&&(i=Object.assign({},i,{remote:n}));const r=t&&t.reuseWindow,s=!r;return this.open({context:e,cli:i,forceEmpty:!0,forceNewWindow:s,forceReuseWindow:r})}openNewTabbedWindow(e){return this.open({context:e,cli:this.environmentService.args,forceNewTabbedWindow:!0,forceEmpty:!0})}waitForWindowCloseOrLoad(e){return new Promise(t=>{function i(i){i===e&&(n.dispose(),r.dispose(),t())}const n=this.onWindowClose(e=>i(e)),r=this.onWindowLoad(e=>i(e))})}sendToFocused(e,...t){const i=this.getFocusedWindow()||this.getLastActiveWindow();i&&i.sendWhenReady(e,...t)}sendToAll(e,i,n){t.WINDOWS.forEach(t=>{n&&n.indexOf(t.id)>=0||t.sendWhenReady(e,i)})}getFocusedWindow(){const e=g.BrowserWindow.getFocusedWindow();if(e)return this.getWindowById(e.id)}getWindowById(e){const i=t.WINDOWS.filter(t=>t.id===e);if(i&&1===i.length)return i[0]}getWindows(){
return t.WINDOWS}getWindowCount(){return t.WINDOWS.length}onWindowError(e,t){if(this.logService.error(2===t?"[VS Code]: render process crashed!":"[VS Code]: detected unresponsive"),this.telemetryService.publicLog2("windowerror",{type:t}),1===t){if(e.isExtensionDevelopmentHost||e.isExtensionTestHost||e.win&&e.win.webContents&&e.win.webContents.isDevToolsOpened())return;this.dialogs.showMessageBox({title:E.default.nameLong,type:"warning",buttons:[A.mnemonicButtonLabel(a.localize(5,null)),A.mnemonicButtonLabel(a.localize(6,null)),A.mnemonicButtonLabel(a.localize(7,null))],message:a.localize(8,null),detail:a.localize(9,null),noLink:!0},e).then(t=>{e.win&&(0===t.button?e.reload():2===t.button&&(this.onBeforeWindowClose(e),e.win.destroy()))})}else this.dialogs.showMessageBox({title:E.default.nameLong,type:"warning",buttons:[A.mnemonicButtonLabel(a.localize(10,null)),A.mnemonicButtonLabel(a.localize(11,null))],message:a.localize(12,null),detail:a.localize(13,null),noLink:!0},e).then(t=>{
e.win&&(0===t.button?e.reload():1===t.button&&(this.onBeforeWindowClose(e),e.win.destroy()))})}onWindowClosed(e){e.dispose();const i=t.WINDOWS.indexOf(e);t.WINDOWS.splice(i,1),this._onWindowsCountChanged.fire({oldCount:t.WINDOWS.length+1,newCount:t.WINDOWS.length}),this._onWindowClose.fire(e.id)}pickFileFolderAndOpen(e){return n(this,void 0,void 0,function*(){const t=a.localize(14,null),i=yield this.dialogs.pick(Object.assign({},e,{pickFolders:!0,pickFiles:!0,title:t}));if(i){this.sendPickerTelemetry(i,e.telemetryEventName||"openFileFolder",e.telemetryExtraData);const t=yield Promise.all(i.map(e=>n(this,void 0,void 0,function*(){return(yield R.dirExists(e))?{folderUri:W.URI.file(e)}:{fileUri:W.URI.file(e)}})));this.open({context:3,contextWindowId:e.windowId,cli:this.environmentService.args,urisToOpen:t,forceNewWindow:e.forceNewWindow})}})}pickFolderAndOpen(e){return n(this,void 0,void 0,function*(){const t=a.localize(15,null),i=yield this.dialogs.pick(Object.assign({},e,{pickFolders:!0,title:t}))
;i&&(this.sendPickerTelemetry(i,e.telemetryEventName||"openFolder",e.telemetryExtraData),this.open({context:3,contextWindowId:e.windowId,cli:this.environmentService.args,urisToOpen:i.map(e=>({folderUri:W.URI.file(e)})),forceNewWindow:e.forceNewWindow}))})}pickFileAndOpen(e){return n(this,void 0,void 0,function*(){const t=a.localize(16,null),i=yield this.dialogs.pick(Object.assign({},e,{pickFiles:!0,title:t}));i&&(this.sendPickerTelemetry(i,e.telemetryEventName||"openFile",e.telemetryExtraData),this.open({context:3,contextWindowId:e.windowId,cli:this.environmentService.args,urisToOpen:i.map(e=>({fileUri:W.URI.file(e)})),forceNewWindow:e.forceNewWindow}))})}pickWorkspaceAndOpen(e){return n(this,void 0,void 0,function*(){const t=a.localize(17,null),i=A.mnemonicButtonLabel(a.localize(18,null)),n=P.WORKSPACE_FILTER,r=yield this.dialogs.pick(Object.assign({},e,{pickFiles:!0,title:t,filters:n,buttonLabel:i}));r&&(this.sendPickerTelemetry(r,e.telemetryEventName||"openWorkspace",e.telemetryExtraData),this.open({
context:3,contextWindowId:e.windowId,cli:this.environmentService.args,urisToOpen:r.map(e=>({workspaceUri:W.URI.file(e)})),forceNewWindow:e.forceNewWindow}))})}sendPickerTelemetry(e,t,i){const n=e?e.length:0;this.telemetryService.publicLog(t,Object.assign({},i,{outcome:n?"success":"canceled",numberOfPaths:n}))}showMessageBox(e,t){return this.dialogs.showMessageBox(e,t)}showSaveDialog(e,t){return this.dialogs.showSaveDialog(e,t)}showOpenDialog(e,t){return this.dialogs.showOpenDialog(e,t)}quit(){const e=this.getFocusedWindow();e&&e.isExtensionDevelopmentHost&&this.getWindowCount()>1?e.win.close():setTimeout(()=>{this.lifecycleService.quit()},10)}};q.windowsStateStorageKey="windowsState",q.WINDOWS=[],q=s([o(2,y.ILogService),o(3,h.IStateService),o(4,d.IEnvironmentService),o(5,v.ILifecycleService),o(6,u.IBackupMainService),o(7,C.ITelemetryService),o(8,w.IConfigurationService),o(9,k.IHistoryMainService),o(10,P.IWorkspacesMainService),o(11,M.IInstantiationService)],q),t.WindowsManager=q;class H{constructor(e,t){
this.stateService=e,this.windowsMainService=t,this.mapWindowToDialogQueue=new Map,this.noWindowDialogQueue=new L.Queue}pick(e){return n(this,void 0,void 0,function*(){const t={title:e.title,buttonLabel:e.buttonLabel,filters:e.filters};t.defaultPath=e.defaultPath||this.stateService.getItem(H.workingDirPickerStorageKey),"boolean"!=typeof e.pickFiles&&"boolean"!=typeof e.pickFolders||(t.properties=void 0,e.pickFiles&&e.pickFolders&&(t.properties=["multiSelections","openDirectory","openFile","createDirectory"])),t.properties||(t.properties=["multiSelections",e.pickFolders?"openDirectory":"openFile","createDirectory"]),I.isMacintosh&&t.properties.push("treatPackageAsDirectory");const i=("number"==typeof e.windowId?this.windowsMainService.getWindowById(e.windowId):void 0)||this.windowsMainService.getFocusedWindow(),n=yield this.showOpenDialog(t,i);if(n&&n.length>0)return this.stateService.setItem(H.workingDirPickerStorageKey,r.dirname(n[0])),n})}getDialogQueue(e){if(!e)return this.noWindowDialogQueue
;let t=this.mapWindowToDialogQueue.get(e.id);return t||(t=new L.Queue,this.mapWindowToDialogQueue.set(e.id,t)),t}showMessageBox(e,t){return this.getDialogQueue(t).queue(()=>new Promise(i=>{const n=(e,t)=>{i({button:e,checkboxChecked:t})};t?g.dialog.showMessageBox(t.win,e,n):g.dialog.showMessageBox(e,n)}))}showSaveDialog(e,t){return this.getDialogQueue(t).queue(()=>new Promise(i=>{const n=e=>{i(function(e){return e&&I.isMacintosh&&(e=O.normalizeNFC(e)),e}(e))};t?g.dialog.showSaveDialog(t.win,e,n):g.dialog.showSaveDialog(e,n)}))}showOpenDialog(e,t){return this.getDialogQueue(t).queue(()=>new Promise(i=>{let n=Promise.resolve();e.defaultPath&&(n=R.exists(e.defaultPath).then(t=>{t||(e.defaultPath=void 0)})),n.then(()=>{const n=e=>{i(function(e){return e&&e.length>0&&I.isMacintosh&&(e=e.map(e=>O.normalizeNFC(e))),e}(e))};t?g.dialog.showOpenDialog(t.win,e,n):g.dialog.showOpenDialog(e,n)})}))}}H.workingDirPickerStorageKey="pickerWorkingDir";class V{constructor(e,t,i){this.workspacesMainService=e,
this.backupMainService=t,this.windowsMainService=i}enterWorkspace(e,t){return n(this,void 0,void 0,function*(){if(!e||!e.win||!e.isReady)return null;return(yield this.isValidTargetWorkspacePath(e,t))?this.doOpenWorkspace(e,U.getWorkspaceIdentifier(t)):null})}isValidTargetWorkspacePath(e,t){return n(this,void 0,void 0,function*(){if(!t)return!0;if(e.openedWorkspace&&F.isEqual(e.openedWorkspace.configPath,t))return!1;if(b.findWindowOnWorkspace(this.windowsMainService.getWindows(),U.getWorkspaceIdentifier(t))){const e={title:E.default.nameLong,type:"info",buttons:[a.localize(19,null)],message:a.localize(20,null,F.basename(t)),detail:a.localize(21,null),noLink:!0};return yield this.windowsMainService.showMessageBox(e,this.windowsMainService.getFocusedWindow()),!1}return!0})}doOpenWorkspace(e,t){e.focus();let i;return e.config.extensionDevelopmentPath||(i=this.backupMainService.registerWorkspaceBackupSync({workspace:t,remoteAuthority:e.remoteAuthority},e.config.backupPath)),
e.openedWorkspace&&this.workspacesMainService.isUntitledWorkspace(e.openedWorkspace)&&this.workspacesMainService.deleteUntitledWorkspaceSync(e.openedWorkspace),e.config.folderUri=void 0,e.config.workspace=t,e.config.backupPath=i,{workspace:t,backupPath:i}}}}),define(t[201],i([1,0,204,25,85,30,40]),function(e,t,i,n,r,s,o){"use strict";function a(e){return e.goto&&e._.forEach(e=>i(/^(\w:)?[^:]+(:\d*){0,2}$/.test(e),r.localize(0,null))),e["max-memory"]&&i(parseInt(e["max-memory"])>=s.MIN_MAX_MEMORY_SIZE_MB,`The max-memory argument cannot be specified lower than ${s.MIN_MAX_MEMORY_SIZE_MB} MB.`),e}function c(e){const t=n.firstIndex(e,e=>!/^-/.test(e));if(t>-1)return[...e.slice(0,t),...e.slice(t+1)]}Object.defineProperty(t,"__esModule",{value:!0}),t.parseMainProcessArgv=function(e){let[,...t]=e;return process.env.VSCODE_DEV&&(t=c(t)||[]),a(o.parseArgs(t))},t.parseCLIProcessArgv=function(e){let[,,...t]=e;return process.env.VSCODE_DEV&&(t=c(t)||[]),a(o.parseArgs(t))}}),
define(t[63],i([1,0,7,53,2,11,5,41,17,26,16,8,13,40,25]),function(e,t,i,n,r,a,c,l,u,d,h,f,p,g,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ID="launchService",t.ILaunchService=c.createDecorator(t.ID);class v{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,i){switch(t){case"start":const{args:e,userEnv:n}=i;return this.service.start(e,n);case"get-main-process-id":return this.service.getMainProcessId();case"get-main-process-info":return this.service.getMainProcessInfo();case"get-logs-path":return this.service.getLogsPath();case"get-remote-diagnostics":return this.service.getRemoteDiagnostics(i)}throw new Error(`Call not found: ${t}`)}}t.LaunchChannel=v;class w{constructor(e){this.channel=e}start(e,t){return this.channel.call("start",{args:e,userEnv:t})}getMainProcessId(){return this.channel.call("get-main-process-id",null)}getMainProcessInfo(){return this.channel.call("get-main-process-info",null)}getLogsPath(){
return this.channel.call("get-logs-path",null)}getRemoteDiagnostics(e){return this.channel.call("get-remote-diagnostics",e)}}t.LaunchChannelClient=w;let y=class{constructor(e,t,i,n,r,s){this.logService=e,this.windowsMainService=t,this.urlService=i,this.workspacesMainService=n,this.environmentService=r,this.configurationService=s}start(e,t){this.logService.trace("Received data from other instance: ",e,t);const i=function(e){return e["open-url"]&&e._urls&&e._urls.length>0?m.coalesce(e._urls.map(e=>{try{return f.URI.parse(e)}catch(e){return null}})):[]}(e);if(i.length){let e=Promise.resolve(null);if(0===this.windowsMainService.getWindowCount()){e=this.windowsMainService.openNewWindow(4)[0].ready()}return e.then(()=>{for(const e of i)this.urlService.open(e)}),Promise.resolve(void 0)}return this.startOpenWindow(e,t)}startOpenWindow(e,t){const i=t.VSCODE_CLI?0:4;let n=[];const s=e.wait&&e.waitMarkerFilePath?f.URI.file(e.waitMarkerFilePath):void 0
;if(e.extensionDevelopmentPath)this.windowsMainService.openExtensionDevelopmentHostWindow(e.extensionDevelopmentPath,{context:i,cli:e,userEnv:t,waitMarkerFileURI:s});else if(g.hasArgs(e._)||g.hasArgs(e["folder-uri"])||g.hasArgs(e["file-uri"]))n=this.windowsMainService.open({context:i,cli:e,userEnv:t,forceNewWindow:e["new-window"],preferNewWindow:!e["reuse-window"]&&!e.wait,forceReuseWindow:e["reuse-window"],diffMode:e.diff,addMode:e.add,noRecentEntry:!!e["skip-add-to-recently-opened"],waitMarkerFileURI:s,gotoLineMode:e.goto});else{let o=!1;if(e["new-window"]||e["unity-launch"])o=!0;else if(e["reuse-window"])o=!1;else{const e=this.configurationService.getValue("window");switch(e&&e.openWithoutArgumentsInNewWindow||"default"){case"on":o=!0;break;case"off":o=!1;break;default:o=!r.isMacintosh}}n=o?this.windowsMainService.open({context:i,cli:e,userEnv:t,forceNewWindow:!0,forceEmpty:!0,waitMarkerFileURI:s}):[this.windowsMainService.focusLastActive(e,i)]}
return s&&1===n.length&&n[0]?Promise.race([this.windowsMainService.waitForWindowCloseOrLoad(n[0].id),u.whenDeleted(s.fsPath)]).then(()=>void 0,()=>void 0):Promise.resolve(void 0)}getMainProcessId(){return this.logService.trace("Received request for process ID from other instance."),Promise.resolve(process.pid)}getMainProcessInfo(){this.logService.trace("Received request for main process info from other instance.");const e=[];return p.BrowserWindow.getAllWindows().forEach(t=>{const i=this.windowsMainService.getWindowById(t.id);i?e.push(this.codeWindowToInfo(i)):e.push(this.browserWindowToInfo(t))}),Promise.resolve({mainPID:process.pid,mainArguments:process.argv.slice(1),windows:e,screenReader:p.app.isAccessibilitySupportEnabled(),gpuFeatureStatus:p.app.getGPUFeatureStatus()})}getLogsPath(){return this.logService.trace("Received request for logs path from other instance."),Promise.resolve(this.environmentService.logsPath)}getRemoteDiagnostics(e){
const t=this.windowsMainService.getWindows().map(t=>new Promise((i,n)=>{if(t.remoteAuthority){const n=`vscode:getDiagnosticInfoResponse${t.id}`,r={includeProcesses:e.includeProcesses,folders:e.includeWorkspaceMetadata?this.getFolderURIs(t):void 0};t.sendWhenReady("vscode:getDiagnosticInfo",{replyChannel:n,args:r}),p.ipcMain.once(n,(e,n)=>{n||i({hostName:t.remoteAuthority,errorMessage:`Unable to resolve connection to '${t.remoteAuthority}'.`}),i(n)}),setTimeout(()=>{i({hostName:t.remoteAuthority,errorMessage:`Fetching remote diagnostics for '${t.remoteAuthority}' timed out.`})},5e3)}else i()}));return Promise.all(t).then(e=>e.filter(e=>!!e))}getFolderURIs(e){const t=[];if(e.openedFolderUri)t.push(e.openedFolderUri);else if(e.openedWorkspace){const i=e.openedWorkspace.configPath,n=this.workspacesMainService.resolveLocalWorkspaceSync(i);if(n){n.folders.forEach(e=>{t.push(e.uri)})}}return t}codeWindowToInfo(e){const t=this.getFolderURIs(e);return this.browserWindowToInfo(e.win,t,e.remoteAuthority)}
browserWindowToInfo(e,t=[],i){return{pid:e.webContents.getOSProcessId(),title:e.getTitle(),folderURIs:t,remoteAuthority:i}}};y=s([o(0,i.ILogService),o(1,l.IWindowsMainService),o(2,n.IURLService),o(3,d.IWorkspacesMainService),o(4,a.IEnvironmentService),o(5,h.IConfigurationService)],y),t.LaunchService=y}),define(t[145],i([1,0,91,15,40,13,63,64,72,11,2,7,48,69]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m){"use strict";function v(t,i){const n=a.parseArgs(process.argv),s=r.assign(n,i);for(const e of Object.keys(s)){const t=e;void 0!==s[t]&&null!==s[t]&&""!==s[t]||delete s[t]}return`${e.toUrl(t)}?config=${encodeURIComponent(JSON.stringify(s))}`}Object.defineProperty(t,"__esModule",{value:!0});let w=class{constructor(e,t,i,n,r,s,o){this.machineId=e,this.userEnv=t,this.environmentService=i,this.launchService=n,this.logService=r,this.diagnosticsService=s,this.windowsService=o,this._issueWindow=null,this._issueParentWindow=null,this._processExplorerWindow=null,this._processExplorerParentWindow=null,this.registerListeners()}
registerListeners(){c.ipcMain.on("vscode:issueSystemInfoRequest",e=>n(this,void 0,void 0,function*(){Promise.all([this.launchService.getMainProcessInfo(),this.launchService.getRemoteDiagnostics({includeProcesses:!1,includeWorkspaceMetadata:!1})]).then(t=>{const[i,n]=t;this.diagnosticsService.getSystemInfo(i,n).then(t=>{e.sender.send("vscode:issueSystemInfoResponse",t)})})})),c.ipcMain.on("vscode:listProcesses",e=>n(this,void 0,void 0,function*(){const t=[];try{const e=yield this.launchService.getMainProcessId();t.push({name:i.localize(0,null),rootProcess:yield m.listProcesses(e)}),(yield this.launchService.getRemoteDiagnostics({includeProcesses:!0})).forEach(e=>{u.isRemoteDiagnosticError(e)?t.push({name:e.hostName,rootProcess:e}):e.processes&&t.push({name:e.hostName,rootProcess:e.processes})})}catch(e){this.logService.error(`Listing processes failed: ${e}`)}e.sender.send("vscode:listProcessesResponse",t)})),c.ipcMain.on("vscode:issueReporterClipboard",e=>{const t={message:i.localize(1,null),type:"warning",
buttons:[i.localize(2,null),i.localize(3,null)]};this._issueWindow&&c.dialog.showMessageBox(this._issueWindow,t,t=>{e.sender.send("vscode:issueReporterClipboardResponse",0===t)})}),c.ipcMain.on("vscode:issuePerformanceInfoRequest",e=>{this.getPerformanceInfo().then(t=>{e.sender.send("vscode:issuePerformanceInfoResponse",t)})}),c.ipcMain.on("vscode:issueReporterConfirmClose",()=>{const e={message:i.localize(4,null),type:"warning",buttons:[i.localize(5,null),i.localize(6,null)]};this._issueWindow&&c.dialog.showMessageBox(this._issueWindow,e,e=>{0===e&&this._issueWindow&&(this._issueWindow.destroy(),this._issueWindow=null)})}),c.ipcMain.on("vscode:workbenchCommand",(e,t)=>{const{id:i,from:n,args:r}=t;let s;switch(n){case"issueReporter":s=this._issueParentWindow;break;case"processExplorer":s=this._processExplorerParentWindow;break;default:throw new Error(`Unexpected command source: ${n}`)}s&&s.webContents.send("vscode:runAction",{id:i,from:n,args:r})}),c.ipcMain.on("vscode:openExternal",(e,t)=>{
this.windowsService.openExternal(t)}),c.ipcMain.on("vscode:closeIssueReporter",e=>{this._issueWindow&&this._issueWindow.close()}),c.ipcMain.on("windowsInfoRequest",e=>{this.launchService.getMainProcessInfo().then(t=>{e.sender.send("vscode:windowsInfoResponse",t.windows)})})}openReporter(e){return new Promise(t=>{if(!this._issueWindow&&(this._issueParentWindow=c.BrowserWindow.getFocusedWindow(),this._issueParentWindow)){const t=this.getWindowPosition(this._issueParentWindow,700,800);this._issueWindow=new c.BrowserWindow({fullscreen:!1,width:t.width,height:t.height,minWidth:300,minHeight:200,x:t.x,y:t.y,title:i.localize(7,null),backgroundColor:e.styles.backgroundColor||"#1E1E1E"}),this._issueWindow.setMenuBarVisibility(!1);this.logService.trace("issueService#openReporter: opening issue reporter"),this._issueWindow.loadURL(this.getIssueReporterPath(e,{})),this._issueWindow.on("close",()=>this._issueWindow=null),this._issueParentWindow.on("closed",()=>{this._issueWindow&&(this._issueWindow.close(),
this._issueWindow=null)})}this._issueWindow&&this._issueWindow.focus()})}openProcessExplorer(e){return new Promise(t=>{if(!this._processExplorerWindow&&(this._processExplorerParentWindow=c.BrowserWindow.getFocusedWindow(),this._processExplorerParentWindow)){const t=this.getWindowPosition(this._processExplorerParentWindow,800,300);this._processExplorerWindow=new c.BrowserWindow({skipTaskbar:!0,resizable:!0,fullscreen:!1,width:t.width,height:t.height,minWidth:300,minHeight:200,x:t.x,y:t.y,backgroundColor:e.styles.backgroundColor,title:i.localize(8,null)}),this._processExplorerWindow.setMenuBarVisibility(!1);const n={appRoot:this.environmentService.appRoot,nodeCachedDataDir:this.environmentService.nodeCachedDataDir,windowId:this._processExplorerWindow.id,userEnv:this.userEnv,machineId:this.machineId,data:e};this._processExplorerWindow.loadURL(v("vs/code/electron-browser/processExplorer/processExplorer.html",n)),this._processExplorerWindow.on("close",()=>this._processExplorerWindow=null),
this._processExplorerParentWindow.on("close",()=>{this._processExplorerWindow&&(this._processExplorerWindow.close(),this._processExplorerWindow=null)})}this._processExplorerWindow&&this._processExplorerWindow.focus()})}getSystemStatus(){return n(this,void 0,void 0,function*(){return Promise.all([this.launchService.getMainProcessInfo(),this.launchService.getRemoteDiagnostics({includeProcesses:!1,includeWorkspaceMetadata:!1})]).then(e=>{const[t,i]=e;return this.diagnosticsService.getDiagnostics(t,i)})})}getWindowPosition(e,t,i){let n;const r=c.screen.getAllDisplays();if(1===r.length)n=r[0];else{if(f.isMacintosh){const e=c.screen.getCursorScreenPoint();n=c.screen.getDisplayNearestPoint(e)}!n&&e&&(n=c.screen.getDisplayMatching(e.getBounds())),n||(n=c.screen.getPrimaryDisplay()||r[0])}const s={width:t,height:i},o=n.bounds;return s.x=o.x+o.width/2-s.width/2,s.y=o.y+o.height/2-s.height/2,o.width>0&&o.height>0&&(s.x<o.x&&(s.x=o.x),s.y<o.y&&(s.y=o.y),s.x>o.x+o.width&&(s.x=o.x),s.y>o.y+o.height&&(s.y=o.y),
s.width>o.width&&(s.width=o.width),s.height>o.height&&(s.height=o.height)),s}getPerformanceInfo(){return new Promise((e,t)=>n(this,void 0,void 0,function*(){Promise.all([this.launchService.getMainProcessInfo(),this.launchService.getRemoteDiagnostics({includeProcesses:!0,includeWorkspaceMetadata:!0})]).then(i=>{const[n,r]=i;this.diagnosticsService.getPerformanceInfo(n,r).then(t=>{e(t)}).catch(e=>{this.logService.warn("issueService#getPerformanceInfo ",e.message),t(e)})})}))}getIssueReporterPath(e,t){if(!this._issueWindow)throw new Error("Issue window has been disposed");return v("vs/code/electron-browser/issue/issueReporter.html",{appRoot:this.environmentService.appRoot,nodeCachedDataDir:this.environmentService.nodeCachedDataDir,windowId:this._issueWindow.id,machineId:this.machineId,userEnv:this.userEnv,data:e,features:t})}};w=s([o(2,h.IEnvironmentService),o(3,l.ILaunchService),o(4,p.ILogService),o(5,d.IDiagnosticsService),o(6,g.IWindowsService)],w),t.IssueService=w}),
define(t[169],i([1,0,13,2,202,48,194,188,24,159,43,176,142,51,168,63,5,62,59,7,38,11,16,53,179,28,164,166,163,165,36,22,49,183,3,41,44,8,197,26,75,174,172,171,125,126,145,134,18,187,184,78,186,137,40,9,123,33,6,189,23,173,158,162,14,191,57,193,180,80,20,65,72,131,30,132,99]),function(e,t,i,r,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,E,C,k,I,P,M,A,D,O,W,L,R,F,T,x,U,N,B,j,z,$,K,q,H,V,G,Y,Q,X,J,Z,ee,te,ie,ne,re,se,oe,ae,ce,le,ue,de,he,fe,pe,ge,me,ve,we,ye,Se,be,_e,Ee,Ce,ke){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let Ie=class t extends x.Disposable{constructor(e,t,i,n,r,s,o,a){super(),this.mainIpcServer=e,this.userEnv=t,this.instantiationService=i,this.logService=n,this.environmentService=r,this.lifecycleService=s,this.configurationService=o,this.stateService=a,this.registerListeners()}registerListeners(){X.setUnexpectedErrorHandler(e=>this.onUnexpectedError(e)),process.on("uncaughtException",e=>this.onUnexpectedError(e)),process.on("unhandledRejection",e=>X.onUnexpectedError(e)),
this.lifecycleService.onWillShutdown(()=>this.dispose()),se.registerContextMenuListener(),i.app.on("accessibility-support-changed",(e,t)=>{this.windowsMainService&&this.windowsMainService.sendToAll("vscode:accessibilitySupportChanged",t)}),i.app.on("activate",(e,t)=>{this.logService.trace("App#activate"),!t&&this.windowsMainService&&this.windowsMainService.openNewWindow(1)}),i.app.on("remote-require",(e,t,i)=>{this.logService.trace("App#on(remote-require): prevented"),e.preventDefault()}),i.app.on("remote-get-global",(e,t,i)=>{this.logService.trace(`App#on(remote-get-global): prevented on ${i}`),e.preventDefault()}),i.app.on("remote-get-builtin",(e,t,i)=>{this.logService.trace(`App#on(remote-get-builtin): prevented on ${i}`),"clipboard"!==i&&e.preventDefault()}),i.app.on("remote-get-current-window",e=>{this.logService.trace("App#on(remote-get-current-window): prevented"),e.preventDefault()}),i.app.on("remote-get-current-web-contents",e=>{
this.environmentService.args.driver||(this.logService.trace("App#on(remote-get-current-web-contents): prevented"),e.preventDefault())}),i.app.on("web-contents-created",(e,t)=>{t.on("will-attach-webview",(e,t,i)=>{const n=e=>{if(!e)return!1;if("data:text/html;charset=utf-8,%3C%21DOCTYPE%20html%3E%0D%0A%3Chtml%20lang%3D%22en%22%20style%3D%22width%3A%20100%25%3B%20height%3A%20100%25%22%3E%0D%0A%3Chead%3E%0D%0A%09%3Ctitle%3EVirtual%20Document%3C%2Ftitle%3E%0D%0A%3C%2Fhead%3E%0D%0A%3Cbody%20style%3D%22margin%3A%200%3B%20overflow%3A%20hidden%3B%20width%3A%20100%25%3B%20height%3A%20100%25%22%3E%0D%0A%3C%2Fbody%3E%0D%0A%3C%2Fhtml%3E"===e)return!0;const t=B.URI.parse(e).fsPath.toLowerCase(),i=B.URI.file(this.environmentService.appRoot).fsPath.toLowerCase();return fe.startsWith(t,i+ae.sep)};delete t.preload,t.nodeIntegration=!1,n(i.src)&&n(t.preloadURL)||(delete t.preloadUrl,this.logService.error("webContents#web-contents-created: Prevented webview attach"),e.preventDefault())}),t.on("will-navigate",e=>{
this.logService.error("webContents#will-navigate: Prevented webcontent navigation"),e.preventDefault()}),t.on("new-window",(e,t)=>{e.preventDefault(),i.shell.openExternal(t)})});let t=[],r=null;i.app.on("open-file",(e,i)=>{this.logService.trace("App#open-file: ",i),e.preventDefault(),t.push(this.getURIToOpenFromPathSync(i)),null!==r&&(clearTimeout(r),r=null),r=setTimeout(()=>{this.windowsMainService&&(this.windowsMainService.open({context:1,cli:this.environmentService.args,urisToOpen:t,gotoLineMode:!1,preferNewWindow:!0}),t=[],r=null)},100)}),i.app.on("new-window-for-tab",()=>{this.windowsMainService&&this.windowsMainService.openNewWindow(4)}),i.ipcMain.on("vscode:exit",(e,t)=>{this.logService.trace("IPC#vscode:exit",t),this.dispose(),this.lifecycleService.kill(t)}),i.ipcMain.on("vscode:fetchShellEnv",e=>n(this,void 0,void 0,function*(){const t=e.sender;try{const e=yield h.getShellEnvironment(this.logService,this.environmentService);t.isDestroyed()||t.send("vscode:acceptShellEnv",e)}catch(e){
t.isDestroyed()||t.send("vscode:acceptShellEnv",{}),this.logService.error("Error fetching shell env",e)}})),i.ipcMain.on("vscode:toggleDevTools",e=>e.sender.toggleDevTools()),i.ipcMain.on("vscode:openDevTools",e=>e.sender.openDevTools()),i.ipcMain.on("vscode:reloadWindow",e=>e.sender.reload()),(()=>n(this,void 0,void 0,function*(){yield this.lifecycleService.when(3),i.powerMonitor.on("resume",()=>{this.windowsMainService&&this.windowsMainService.sendToAll("vscode:osResume",void 0)});(yield new Promise((t,i)=>{e(["native-keymap"],t,i)})).onDidChangeKeyboardLayout(()=>{this.windowsMainService&&this.windowsMainService.sendToAll("vscode:keyboardLayoutChanged",!1)})}))()}onUnexpectedError(e){if(e){const t={message:e.message,stack:e.stack};this.windowsMainService&&this.windowsMainService.sendToFocused("vscode:reportError",JSON.stringify(t))}this.logService.error(`[uncaught exception in main]: ${e}`),e.stack&&this.logService.error(e.stack)}startup(){return n(this,void 0,void 0,function*(){
this.logService.debug("Starting VS Code"),this.logService.debug(`from: ${this.environmentService.appRoot}`),this.logService.debug("args:",this.environmentService.args),r.isWindows&&R.default.win32AppUserModelId&&i.app.setAppUserModelId(R.default.win32AppUserModelId);try{r.isMacintosh&&!0===this.configurationService.getValue("window.nativeTabs")&&!i.systemPreferences.getUserDefault("NSUseImprovedLayoutPass","boolean")&&i.systemPreferences.setUserDefault("NSUseImprovedLayoutPass","boolean",!0)}catch(e){this.logService.error(e)}const e=new g.Server;this.logService.trace("Resolving machine identifier...");const{machineId:t,trueMachineId:s}=yield this.resolveMachineId();this.logService.trace(`Resolved machine identifier: ${t} (trueMachineId: ${s})`);const o=this.instantiationService.createInstance(v.SharedProcess,t,this.userEnv),a=o.whenReady().then(()=>m.connect(this.environmentService.sharedIPCHandle,"main"));this.lifecycleService.when(3).then(()=>{
this._register(new re.RunOnceScheduler(()=>n(this,void 0,void 0,function*(){const e=yield h.getShellEnvironment(this.logService,this.environmentService);o.spawn(e)}),3e3)).schedule()});const c=yield this.createServices(t,s,o,a);if(this.environmentService.driverHandle){const t=yield Z.serve(e,this.environmentService.driverHandle,this.environmentService,c);this.logService.info("Driver started at:",this.environmentService.driverHandle),this._register(t)}const l=c.createInstance(T.ProxyAuthHandler);this._register(l);const u=c.invokeFunction(t=>this.openFirstWindow(t,e,a));this.afterWindowOpen(),this.environmentService.args.trace&&this.stopTracingEventually(u)})}resolveMachineId(){return n(this,void 0,void 0,function*(){let e=this.stateService.getItem(t.MACHINE_ID_KEY);e||(e=yield $.getMachineId(),this.stateService.setItem(t.MACHINE_ID_KEY,e));let i
;return r.isMacintosh&&"6c9d2bc8f91b89624add29c0abeae7fb42bf539fa1cdb2e3e57cd668fa9bcead"===e&&((i=this.stateService.getItem(t.TRUE_MACHINE_ID_KEY))||(i=yield $.getMachineId(),this.stateService.setItem(t.TRUE_MACHINE_ID_KEY,i))),{machineId:e,trueMachineId:i}})}createServices(e,t,i,r){return n(this,void 0,void 0,function*(){const n=new S.ServiceCollection,s=this._register(new _e.FileService(this.logService));n.set(Ee.IFileService,s);const o=this._register(new Ce.DiskFileSystemProvider(this.logService));switch(s.registerProvider(le.Schemas.file,o),process.platform){case"win32":n.set(f.IUpdateService,new b.SyncDescriptor(K.Win32UpdateService));break;case"linux":process.env.SNAP&&process.env.SNAP_REVISION?n.set(f.IUpdateService,new b.SyncDescriptor(ue.SnapUpdateService,[process.env.SNAP,process.env.SNAP_REVISION])):n.set(f.IUpdateService,new b.SyncDescriptor(q.LinuxUpdateService));break;case"darwin":n.set(f.IUpdateService,new b.SyncDescriptor(H.DarwinUpdateService))}
n.set(U.IWindowsMainService,new b.SyncDescriptor(a.WindowsManager,[e,this.userEnv])),n.set(c.IWindowsService,new b.SyncDescriptor(u.WindowsService,[i])),n.set(w.ILaunchService,new b.SyncDescriptor(w.LaunchService));const l=L.getDelayedChannel(r.then(e=>e.getChannel("diagnostics")));n.set(be.IDiagnosticsService,new b.SyncDescriptor(Se.DiagnosticsService,[l])),n.set(V.IIssueService,new b.SyncDescriptor(Y.IssueService,[e,this.userEnv])),n.set(ee.IMenubarService,new b.SyncDescriptor(te.MenubarService));const d=new de.StorageMainService(this.logService,this.environmentService);n.set(de.IStorageMainService,d),this.lifecycleService.onWillShutdown(e=>e.join(d.close()));const h=new pe.BackupMainService(this.environmentService,this.configurationService,this.logService);if(n.set(ge.IBackupMainService,h),n.set(N.IHistoryMainService,new b.SyncDescriptor(me.HistoryMainService)),n.set(I.IURLService,new b.SyncDescriptor(ve.URLService)),n.set(z.IWorkspacesMainService,new b.SyncDescriptor(we.WorkspacesMainService)),
this.environmentService.isExtensionDevelopment||this.environmentService.args["disable-telemetry"]||!R.default.enableTelemetry)n.set(M.ITelemetryService,A.NullTelemetryService);else{const i=L.getDelayedChannel(r.then(e=>e.getChannel("telemetryAppender"))),s={appender:A.combinedAppender(new D.TelemetryAppenderClient(i),new A.LogAppender(this.logService)),commonProperties:W.resolveCommonProperties(R.default.commit,F.default.version,e,R.default.msftInternalDomains,this.environmentService.installSourcePath),piiPaths:this.environmentService.extensionsPath?[this.environmentService.appRoot,this.environmentService.extensionsPath]:[this.environmentService.appRoot],trueMachineId:t};n.set(M.ITelemetryService,new b.SyncDescriptor(O.TelemetryService,[s]))}return yield h.initialize(),this.instantiationService.createChild(n)})}stopTracingEventually(e){this.logService.info("Tracing: waiting for windows to get ready...");let t=!1;const n=e=>{t||(t=!0,
i.contentTracing.stopRecording(ae.join(oe.homedir(),`${R.default.applicationName}-${Math.random().toString(16).slice(-4)}.trace.txt`),t=>{e?this.logService.info(`Tracing: data recorded (after 30s timeout) to ${t}`):this.windowsMainService&&this.windowsMainService.showMessageBox({type:"info",message:ce.localize(0,null),detail:ce.localize(1,null,t),buttons:[ce.localize(2,null)]},this.windowsMainService.getLastActiveWindow())}))},r=setTimeout(()=>n(!0),3e4);Promise.all(e.map(e=>e.ready())).then(()=>{clearTimeout(r),n(!1)})}openFirstWindow(e,t,i){const s=e.get(w.ILaunchService),o=new w.LaunchChannel(s);this.mainIpcServer.registerChannel("launch",o);const a=e.get(f.IUpdateService),u=new p.UpdateChannel(a);t.registerChannel("update",u);const d=e.get(V.IIssueService),h=new G.IssueChannel(d);t.registerChannel("issue",h);const g=e.get(z.IWorkspacesMainService),m=new j.WorkspacesChannel(g);t.registerChannel("workspaces",m);const v=e.get(c.IWindowsService),y=new l.WindowsChannel(v);t.registerChannel("windows",y),
i.then(e=>e.registerChannel("windows",y));const S=e.get(ee.IMenubarService),b=new ie.MenubarChannel(S);t.registerChannel("menubar",b);const E=e.get(I.IURLService),k=new P.URLServiceChannel(E);t.registerChannel("url",k);const M=e.get(de.IStorageMainService),A=this._register(new he.GlobalStorageDatabaseChannel(this.logService,M));t.registerChannel("storage",A);const D=new Q.LogLevelSetterChannel(e.get(_.ILogService));t.registerChannel("loglevel",D),i.then(e=>e.registerChannel("loglevel",D)),t.registerChannel(ke.ExtensionHostDebugBroadcastChannel.ChannelName,new ke.ExtensionHostDebugBroadcastChannel),this.lifecycleService.phase=2;const O=this.windowsMainService=e.get(U.IWindowsMainService),W=new c.ActiveWindowManager(v),R=new L.StaticRouter(e=>W.getActiveClientId().then(t=>e===t)),F=t.getChannel("urlHandler",R),T=new P.URLHandlerChannelClient(F);if(r.isMacintosh){const t=e.get(C.IEnvironmentService);E.registerHandler({handleURL(e){return n(this,void 0,void 0,function*(){if(0===O.getWindowCount()){
const i=Object.assign({},t.args),[n]=O.open({context:5,cli:i,forceEmpty:!0,gotoLineMode:!0});return yield n.ready(),E.open(e)}return!1})}})}E.registerHandler(T);const x=this.environmentService.args,N=x["open-url"]?x._urls:[],$=new J.ElectronURLListener(N||[],E,O);this._register($);const K=global.macOpenFiles,q=process.env.VSCODE_CLI?0:4,H=ne.hasArgs(x._),Y=ne.hasArgs(x["folder-uri"]),X=ne.hasArgs(x["file-uri"]),Z=!0===x["skip-add-to-recently-opened"],te=x.wait&&x.waitMarkerFilePath?B.URI.file(x.waitMarkerFilePath):void 0;return!x["new-window"]||H||Y||X?!K||!K.length||H||Y||X?O.open({context:q,cli:x,forceNewWindow:x["new-window"]||!H&&x["unity-launch"],diffMode:x.diff,noRecentEntry:Z,waitMarkerFileURI:te,gotoLineMode:x.goto,initialStartup:!0}):O.open({context:1,cli:x,urisToOpen:K.map(e=>this.getURIToOpenFromPathSync(e)),noRecentEntry:Z,waitMarkerFileURI:te,gotoLineMode:!1,initialStartup:!0}):O.open({context:q,cli:x,forceNewWindow:!0,forceEmpty:!0,noRecentEntry:Z,waitMarkerFileURI:te,initialStartup:!0})}
getURIToOpenFromPathSync(e){try{if(ye.statSync(e).isDirectory())return{folderUri:B.URI.file(e)};if(z.hasWorkspaceFileExtension(e))return{workspaceUri:B.URI.file(e)}}catch(e){}return{fileUri:B.URI.file(e)}}afterWindowOpen(){this.lifecycleService.phase=3,this.handleRemoteAuthorities()}handleRemoteAuthorities(){i.protocol.registerHttpProtocol(le.Schemas.vscodeRemoteResource,(e,t)=>{t({url:e.url.replace(/^vscode-remote-resource:/,"http:"),method:e.method})})}};Ie.MACHINE_ID_KEY="telemetry.machineId",Ie.TRUE_MACHINE_ID_KEY="telemetry.trueMachineId",Ie=s([o(2,y.IInstantiationService),o(3,_.ILogService),o(4,C.IEnvironmentService),o(5,d.ILifecycleService),o(6,k.IConfigurationService),o(7,E.IStateService)],Ie),t.CodeApplication=Ie}),define(t[155],i([1,0,209,151,3,15,19,18,150,16,7,31]),function(e,t,i,r,a,c,l,u,d,h,f,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let g=class extends a.Disposable{constructor(e,t){super(),this.logService=t,this.configure(e.getValue()),
this._register(e.onDidChangeConfiguration(()=>this.configure(e.getValue()),this))}configure(e){this.proxyUrl=e.http&&e.http.proxy,this.strictSSL=!(!e.http||!e.http.proxyStrictSSL),this.authorization=e.http&&e.http.proxyAuthorization}request(e,t){return n(this,void 0,void 0,function*(){this.logService.trace("RequestService#request",e.url);const{proxyUrl:i,strictSSL:n}=this,r=e.agent?e.agent:yield d.getProxyAgent(e.url||"",{proxyUrl:i,strictSSL:n});return e.agent=r,e.strictSSL=n,this.authorization&&(e.headers=c.assign(e.headers||{},{"Proxy-Authorization":this.authorization})),this._request(e,t)})}getNodeRequest(t){return n(this,void 0,void 0,function*(){return("https:"===r.parse(t.url).protocol?yield new Promise((t,i)=>{e(["https"],t,i)}):yield new Promise((t,i)=>{e(["http"],t,i)})).request})}_request(e,t){return new Promise((s,o)=>n(this,void 0,void 0,function*(){let n;const a=r.parse(e.url),d=e.getRawRequest?e.getRawRequest(e):yield this.getNodeRequest(e),h={hostname:a.hostname,
port:a.port?parseInt(a.port):"https:"===a.protocol?443:80,protocol:a.protocol,path:a.path,method:e.type||"GET",headers:e.headers,agent:e.agent,rejectUnauthorized:!l.isBoolean(e.strictSSL)||e.strictSSL};e.user&&e.password&&(h.auth=e.user+":"+e.password),(n=d(h,n=>{const r=l.isNumber(e.followRedirects)?e.followRedirects:3;if(n.statusCode&&n.statusCode>=300&&n.statusCode<400&&r>0&&n.headers.location)this._request(c.assign({},e,{url:n.headers.location,followRedirects:r-1}),t).then(s,o);else{let e=n;"gzip"===n.headers["content-encoding"]&&(e=e.pipe(i.createGunzip())),s({res:n,stream:p.toVSBufferReadableStream(e)})}})).on("error",o),e.timeout&&n.setTimeout(e.timeout),e.data&&"string"==typeof e.data&&n.write(e.data),n.end(),t.onCancellationRequested(()=>{n.abort(),o(u.canceled())})}))}};g=s([o(0,h.IConfigurationService),o(1,f.ILogService)],g),t.RequestService=g}),define(t[136],i([1,0,155,15,13]),function(e,t,i,n,r){"use strict";function s(e){return r.net.request}Object.defineProperty(t,"__esModule",{value:!0})
;class o extends i.RequestService{request(e,t){return super.request(n.assign({},e||{},{getRawRequest:s}),t)}}t.RequestService=o}),define(t[211],i([1,0,13,15,2,22,201,40,17,76,24,51,63,124,62,59,7,156,38,11,141,16,147,47,136,20,169,10,45,135,133,18,56,50,152,153,65,175]),function(e,t,i,r,s,o,a,c,l,u,d,h,f,p,g,m,v,w,y,S,b,_,E,C,k,I,P,M,A,D,O,W,L,R,F,T,x){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class U extends Error{constructor(){super(...arguments),this.isExpected=!0}}class N{main(){W.setUnexpectedErrorHandler(e=>console.error(e));let e;try{e=a.parseMainProcessArgv(process.argv),e=u.validatePaths(e)}catch(e){return console.error(e.message),void i.app.exit(1)}if(e.wait&&!e.waitMarkerFilePath){const t=c.createWaitMarkerFile(e.verbose);t&&(c.addArg(process.argv,"--waitMarkerFilePath",t),e.waitMarkerFilePath=t)}this.startup(e)}startup(e){return n(this,void 0,void 0,function*(){const t=new O.BufferLogService,[i,r]=this.createServices(e,t);try{
yield i.invokeFunction(e=>n(this,void 0,void 0,function*(){const t=e.get(S.IEnvironmentService),i=e.get(_.IConfigurationService),n=e.get(y.IStateService);try{yield this.initServices(t,i,n)}catch(e){throw this.handleStartupDataDirError(t,e),e}})),yield i.invokeFunction(e=>n(this,void 0,void 0,function*(){const n=e.get(S.IEnvironmentService),s=e.get(v.ILogService),o=e.get(d.ILifecycleService),a=e.get(_.IConfigurationService),c=yield this.doStartup(s,n,o,i,!0);return t.logger=new D.SpdLogService("main",n.logsPath,t.getLevel()),R.once(o.onWillShutdown)(()=>a.dispose()),i.createInstance(P.CodeApplication,c,r).startup()}))}catch(e){i.invokeFunction(this.quit,e)}})}createServices(e,t){const i=new g.ServiceCollection,n=new b.EnvironmentService(e,process.execPath),r=this.patchEnvironment(n);i.set(S.IEnvironmentService,n);const s=new v.MultiplexLogService([new v.ConsoleLogMainService(v.getLogLevel(n)),t]);return process.once("exit",()=>s.dispose()),i.set(v.ILogService,s),
i.set(_.IConfigurationService,new E.ConfigurationService(n.settingsResource)),i.set(d.ILifecycleService,new m.SyncDescriptor(d.LifecycleService)),i.set(y.IStateService,new m.SyncDescriptor(w.StateService)),i.set(C.IRequestService,new m.SyncDescriptor(k.RequestService)),i.set(L.IThemeMainService,new m.SyncDescriptor(L.ThemeMainService)),i.set(F.ISignService,new m.SyncDescriptor(T.SignService)),[new p.InstantiationService(i,!0),r]}initServices(e,t,i){const n=Promise.all([e.extensionsPath,e.nodeCachedDataDir,e.logsPath,e.globalStorageHome,e.workspaceStorageHome,e.backupHome.fsPath].map(e=>e?l.mkdirp(e):void 0)),r=t.initialize(),s=i.init();return Promise.all([n,r,s])}patchEnvironment(e){const t={VSCODE_IPC_HOOK:e.mainIPCHandle,VSCODE_NLS_CONFIG:process.env.VSCODE_NLS_CONFIG,VSCODE_LOGS:process.env.VSCODE_LOGS};return process.env.VSCODE_PORTABLE&&(t.VSCODE_PORTABLE=process.env.VSCODE_PORTABLE),r.assign(process.env,t),t}doStartup(e,t,r,a,c){return n(this,void 0,void 0,function*(){let l;try{
l=yield h.serve(t.mainIPCHandle),R.once(r.onWillShutdown)(()=>l.dispose())}catch(l){if("EADDRINUSE"!==l.code)throw this.handleStartupDataDirError(t,l),l;s.isMacintosh&&i.app.dock.hide();let u;try{u=yield h.connect(t.mainIPCHandle,"main")}catch(i){if(!c||s.isWindows||"ECONNREFUSED"!==i.code)throw"EPERM"===i.code&&this.showStartupWarningDialog(M.localize(0,null,o.default.nameShort),M.localize(1,null)),i;try{I.unlinkSync(t.mainIPCHandle)}catch(t){throw e.warn("Could not delete obsolete instance handle",t),t}return this.doStartup(e,t,r,a,!1)}if(t.extensionTestsLocationURI&&!t.debugExtensionHost.break){const t="Running extension tests from the command line is currently only supported if no other instance of Code is running.";throw e.error(t),u.dispose(),new Error(t)}let d=void 0;t.wait||t.status||(d=setTimeout(()=>{this.showStartupWarningDialog(M.localize(2,null,o.default.nameShort),M.localize(3,null))},1e4));const p=u.getChannel("launch"),g=new f.LaunchChannelClient(p)
;if(t.args.status)return a.invokeFunction(e=>n(this,void 0,void 0,function*(){const e=(yield h.connect(t.sharedIPCHandle,"main")).getChannel("diagnostics"),i=new x.DiagnosticsService(e),n=yield g.getMainProcessInfo(),r=yield g.getRemoteDiagnostics({includeProcesses:!0,includeWorkspaceMetadata:!0}),s=yield i.getDiagnostics(n,r);throw console.log(s),new U}));throw s.isWindows&&(yield this.windowsAllowSetForegroundWindow(g,e)),e.trace("Sending env to running instance..."),yield g.start(t.args,process.env),yield u.dispose(),d&&clearTimeout(d),new U("Sent env to running instance. Terminating...")}if(t.args.status)throw e.warn("Warning: The --status argument can only be used if Code is already running. Please run it again after Code has started."),new U("Terminating...");return s.isMacintosh&&i.app.dock.show(),process.env.VSCODE_PID=String(process.pid),l})}handleStartupDataDirError(e,t){if("EACCES"===t.code||"EPERM"===t.code){const t=[e.userDataPath];e.extensionsPath&&t.push(e.extensionsPath),
b.xdgRuntimeDir&&t.push(b.xdgRuntimeDir),this.showStartupWarningDialog(M.localize(4,null),M.localize(5,null,t.join("\n")))}}showStartupWarningDialog(e,t){i.dialog.showMessageBox({title:o.default.nameLong,type:"warning",buttons:[A.mnemonicButtonLabel(M.localize(6,null))],message:e,detail:t,noLink:!0})}windowsAllowSetForegroundWindow(t,i){return n(this,void 0,void 0,function*(){if(s.isWindows){const n=yield t.getMainProcessId();i.trace("Sending some foreground love to the running instance:",n);try{(yield new Promise((t,i)=>{e(["windows-foreground-love"],t,i)})).allowSetForegroundWindow(n)}catch(e){i.error(e)}}})}quit(e,t){const i=e.get(v.ILogService),n=e.get(d.ILifecycleService);let r=0;t&&(t.isExpected?t.message&&i.trace(t.message):(r=1,t.stack?i.error(t.stack):i.error(`Startup error: ${t.toString()}`))),n.kill(r)}}(new N).main()})}).call(this);
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/b37e54c98e1a74ba89e03073e5a3761284e3ffb0/core/vs/code/electron-main/main.js.map
